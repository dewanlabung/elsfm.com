import{G as w,H as f,b as i,aa as g,I as F,J as y,e as p,a as h,d as j,j as o,t as c,T as m}from"./main-CUJEGI8U.js";function U(){return w({mutationFn:s=>i.post(`users/${s.user.id}/follow`).then(e=>e.data),onSuccess:async(s,{user:e})=>{await g.invalidateQueries({queryKey:["users"]}),F(y("Following :name",{values:{name:e.name}}))},onError:s=>f(s)})}function q(){const{user:s}=p();return h({queryKey:["users","followed","ids"],queryFn:()=>i.get("users/me/followed-users/ids").then(e=>e.data),enabled:!!s})}function C(s){const{data:e,isLoading:a}=q();return{isLoading:a,isFollowing:!!(e!=null&&e.ids.includes(s))}}function v(){return w({mutationFn:s=>E(s),onSuccess:async(s,{user:e})=>{await g.invalidateQueries({queryKey:["users"]}),F(y("Stopped following :name",{values:{name:e.name}}))},onError:s=>f(s)})}function E({user:s}){return i.post(`users/${s.id}/unfollow`).then(e=>e.data)}function K({user:s,className:e,minWidth:a="min-w-82",...t}){const{user:n}=p(),{isFollowing:x,isLoading:l}=C(s.id),u=U(),r=v(),d=j(e,a);return x?o.jsx(c,{...t,className:d,onClick:()=>r.mutate({user:s}),disabled:!n||(n==null?void 0:n.id)===s.id||r.isPending||l,children:o.jsx(m,{message:"Unfollow"})}):o.jsx(c,{...t,className:d,onClick:()=>u.mutate({user:s}),disabled:!n||(n==null?void 0:n.id)===s.id||u.isPending||l,children:o.jsx(m,{message:"Follow"})})}export{K as F};
