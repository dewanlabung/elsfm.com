import{M as P,j as e,P as A,r as _,T as s,Q as y,d as D,W as F,R as z,u as H,V as L,X as I,J as S}from"./main-CUJEGI8U.js";import{a as m}from"./artist-page-tabs-D5ZP2b3D.js";import{A as N}from"./settings-layout-KPbHCtKd.js";import{S as l}from"./settings-panel-CAOxmD0t.js";import{u as C}from"./use-admin-settings-CWPhg6hD.js";import{F as T}from"./select-Z9R0wV6S.js";import{C as M}from"./checkbox-suk8vW77.js";import{F as o}from"./switch-4KDjemPX.js";import{D as R}from"./DragHandle-CQHOqRgB.js";import{D as E}from"./drag-preview-C1yWSaDk.js";import{u as V,m as q}from"./use-sortable-imA7wH2m.js";import{a as W}from"./admin-config-DTFkVWJm.js";import{L as O}from"./external-link-jlnQ3iTs.js";import{T as Q,a as B,b as G}from"./tabs-BVjOaE7L.js";import"./settings-links-6v3CjZ6H.js";import"./middleware-BLXTWOs6.js";import"./use-admin-settings-page-nav-config-C00ols9x.js";import"./datatable-page-with-header-layout-C4e5sJMc.js";import"./dashboard-layout-context-DeTNv3yG.js";import"./file-upload-provider-DWaB2xE4.js";import"./uploaded-file-ksxfN_l-.js";import"./extension-from-filename-O0XMuZye.js";import"./pretty-bytes-bO14ePu9.js";import"./traditional-BcYcLesO.js";import"./confirmation-dialog-DVMbD2S1.js";import"./dialog-footer-jZcc-BBM.js";import"./useSuspenseQuery-13TuSADp.js";import"./combobox-end-adornment-B0xReOuL.js";import"./CheckBoxOutlineBlank-BgWeDdny.js";import"./getScrollParent--OCc5gFh.js";import"./useGlobalListeners-BeXr-yG1.js";import"./Album-pwm22nnR.js";import"./Comment-vFUyF-gf.js";import"./FileUpload-CTBOdaGq.js";import"./Mic-DAPkQZuC.js";import"./PlaylistPlay-DcgxbGJx.js";import"./QueueMusic-CiX-EN5z.js";import"./Sell-D56iqjs7.js";function U({tabs:a,title:n}){var r,c,d;const{data:t}=C(),i=P({defaultValues:{client:{player:{default_artist_view:((r=t.client.player)==null?void 0:r.default_artist_view)??"list"},artistPage:{tabs:((c=t.client.artistPage)==null?void 0:c.tabs)??[],showDescription:((d=t.client.artistPage)==null?void 0:d.showDescription)??!1}}}});return e.jsxs(N,{form:i,title:n,tabs:a,children:[e.jsx(Y,{}),e.jsx(J,{}),e.jsx(X,{})]})}function Y(){const{watch:a}=A(),n=a("client.artistPage.tabs")||[];return e.jsx(l,{layout:"vertical",className:"mb-24",title:e.jsx(s,{message:"Artist page tabs"}),description:e.jsx(s,{message:"Select which tabs should appear on artist page and in which order."}),children:n.map(t=>e.jsx(_.Fragment,{children:K(t.id)},t.id))})}function J(){return e.jsx(l,{className:"mb-24",title:e.jsx(s,{message:"Default albums layout"}),description:e.jsx(s,{message:"How should albums on main artist page be displayed by default."}),children:e.jsxs(T,{className:"my-24",name:"client.player.default_artist_view",selectionMode:"single",label:e.jsx(s,{message:"Layout"}),children:[e.jsx(y,{value:"list",children:e.jsx(s,{message:"List"})}),e.jsx(y,{value:"grid",children:e.jsx(s,{message:"Grid"})})]})})}function X(){return e.jsx(l,{className:"mb-24",title:e.jsx(s,{message:"Description"}),description:e.jsx(s,{message:"Whether short artist biography be shown in main artist page header."}),children:e.jsx(o,{name:"client.artistPage.showDescription",children:e.jsx(s,{message:"Show description"})})})}function K(a){switch(a){case m.tracks:return e.jsx(f,{id:m.tracks,title:e.jsx(s,{message:"Tracks"}),description:e.jsx(s,{message:"Show all artist tracks in a list view."})});case m.albums:return e.jsx(f,{id:m.albums,title:e.jsx(s,{message:"Albums"}),description:e.jsx(s,{message:"Show all artist albums in a list view."})});case m.followers:return e.jsx(f,{id:m.followers,title:e.jsx(s,{message:"Followers"}),description:e.jsx(s,{message:"Shows all users that are currently following an artist."})});case m.similar:return e.jsx(f,{id:m.similar,title:e.jsx(s,{message:"Similar artists"}),description:e.jsx(s,{message:"Shows similar artists."})});case m.about:return e.jsx(f,{id:m.about,title:e.jsx(s,{message:"About"}),description:e.jsx(s,{message:"Shows artist biography/description as well as extra images"})});case m.discography:return e.jsx(f,{id:m.discography,title:e.jsx(s,{message:"Discography"}),description:e.jsx(s,{message:"Shows all artist albums in grid or list view."})})}}function f({title:a,description:n,id:t}){var w;const i=_.useRef(null),r=_.useRef(null),{watch:c,setValue:d}=A(),u=c("client.artistPage.tabs")||[],p=u.map(j=>j.id),x=(w=u.find(j=>j.id===t))==null?void 0:w.active,h=p[0]===t,{sortableProps:g,dragHandleRef:v}=V({ref:i,item:t,items:p,type:"artistPageTabs",preview:r,strategy:"line",onSortEnd:(j,b)=>{d("client.artistPage.tabs",q(u,j,b),{shouldDirty:!0})}});return e.jsxs(_.Fragment,{children:[e.jsxs("div",{className:D("flex w-full items-center gap-8 border-b py-6",h&&"border-t border-t-transparent"),ref:i,...g,children:[e.jsx(F,{ref:v,children:e.jsx(R,{})}),e.jsxs("div",{className:"flex-auto",children:[e.jsx("div",{className:"text-sm",children:a}),e.jsx("div",{className:"text-xs",children:n})]}),e.jsx(M,{checked:x,onChange:()=>{const j=u.map(b=>b.id===t?{...b,active:!b.active}:b);d("client.artistPage.tabs",j,{shouldDirty:!0})}})]}),e.jsx(Z,{title:a,ref:r})]})}const Z=z.forwardRef(({title:a},n)=>e.jsx(E,{ref:n,children:()=>e.jsx("div",{className:"rounded bg-chip p-8 text-sm shadow",children:a})}));function $({tabs:a,title:n}){var c,d,u,p,x,h,g,v,w;const{spotify_is_setup:t}=H(),{data:i}=C(),r=P({defaultValues:{client:{player:{sort_method:((c=i.client.player)==null?void 0:c.sort_method)??"external",default_volume:((d=i.client.player)==null?void 0:d.default_volume)??100,seekbar_type:((u=i.client.player)==null?void 0:u.seekbar_type)??"waveform",enable_repost:((p=i.client.player)==null?void 0:p.enable_repost)??!1,track_comments:((x=i.client.player)==null?void 0:x.track_comments)??!1,show_upload_btn:((h=i.client.player)==null?void 0:h.show_upload_btn)??!1,show_become_artist_btn:((g=i.client.player)==null?void 0:g.show_become_artist_btn)??!1,enable_offlining:((v=i.client.player)==null?void 0:v.enable_offlining)??!1},uploads:{autoMatch:((w=i.client.uploads)==null?void 0:w.autoMatch)??!1}}}});return e.jsxs(N,{form:r,title:n,tabs:a,children:[t&&e.jsx(ee,{}),e.jsx(se,{}),e.jsx(te,{}),e.jsx(ae,{}),e.jsx(ie,{}),e.jsx(ne,{}),e.jsx(re,{})]})}function ee(){return e.jsx(l,{className:"mb-24",title:e.jsx(s,{message:"Content Popularity"}),description:e.jsx(s,{message:"When content is sorted by popularity (e.g. in track tables), choose whether to use Spotify popularity or local play counts."}),children:e.jsxs(T,{size:"sm",name:"client.player.sort_method",selectionMode:"single",label:e.jsx(s,{message:"Popularity source"}),children:[e.jsx(y,{value:"external",children:e.jsx(s,{message:"Spotify popularity"})}),e.jsx(y,{value:"local",children:e.jsx(s,{message:"Local plays"})})]})})}function se(){return e.jsx(l,{className:"mb-24",title:e.jsx(s,{message:"Volume Settings"}),description:e.jsx(s,{message:"Configure default audio volume and playback settings."}),children:e.jsx(L,{size:"sm",name:"client.player.default_volume",label:e.jsx(s,{message:"Default player volume"}),type:"number",min:1,max:100,description:e.jsx(s,{message:"Set the default volume level (1-100) when the player loads."})})})}function te(){return e.jsx(l,{className:"mb-24",title:e.jsx(s,{message:"Player Seekbar"}),description:e.jsx(s,{message:"Choose between waveform visualization or simple line seekbar. Waveforms are generated during upload and will default to simple for auto-imported tracks."}),children:e.jsxs(T,{size:"sm",name:"client.player.seekbar_type",selectionMode:"single",label:e.jsx(s,{message:"Seekbar type"}),children:[e.jsx(y,{value:"waveform",children:e.jsx(s,{message:"Waveform"})}),e.jsx(y,{value:"line",children:e.jsx(s,{message:"Simple"})})]})})}function ae(){return e.jsxs(l,{className:"mb-24",title:e.jsx(s,{message:"Social Features"}),description:e.jsx(s,{message:"Enable or disable social interaction features for tracks and albums."}),children:[e.jsx(o,{size:"sm",name:"client.player.enable_repost",description:e.jsx(s,{message:"Allow users to repost albums and tracks to share them with their followers."}),children:e.jsx(s,{message:"Enable reposts"})}),e.jsx(o,{size:"sm",className:"mt-24",name:"client.player.track_comments",description:e.jsx(s,{message:"Allow users to leave comments on albums and tracks."}),children:e.jsx(s,{message:"Enable commenting"})})]})}function ie(){return e.jsx(l,{className:"mb-24",title:e.jsx(s,{message:"Offline playback"}),description:e.jsx(s,{message:"Control whether users can make music available for offline listening. Does not work for tracks with youtube as the only playback source."}),children:e.jsx(o,{size:"sm",name:"client.player.enable_offlining",children:e.jsx(s,{message:"Enable offline playback functionality"})})})}function ne(){return e.jsxs(l,{className:"mb-24",title:e.jsx(s,{message:"Navigation & Access"}),description:e.jsx(s,{message:"Control which navigation elements and access points are visible to users."}),children:[e.jsx(o,{size:"sm",name:"client.player.show_upload_btn",description:e.jsx(s,{message:"Show upload button in the left sidebar for users with upload permissions."}),children:e.jsx(s,{message:"Show upload button"})}),e.jsx(o,{size:"sm",className:"mt-24",name:"client.player.show_become_artist_btn",description:e.jsx(s,{message:"Show <a>Become artist</a> menu item for users who are not yet artists.",values:{a:a=>e.jsx("a",{target:"_blank",href:W.pages.backstage,className:O,children:a})}}),children:e.jsx(s,{message:"Show become artist menu"})})]})}function re(){return e.jsx(l,{className:"mb-24",title:e.jsx(s,{message:"Content Management"}),description:e.jsx(s,{message:"Configure how uploaded content is processed and matched with existing data."}),children:e.jsx(o,{size:"sm",name:"client.uploads.autoMatch",description:e.jsx(s,{message:"Automatically match uploaded files with existing albums and artists based on metadata, or create new entries if they don't exist."}),children:e.jsx(s,{message:"Enable metadata matching"})})})}function le({tabs:a,title:n}){var r,c,d,u,p,x,h,g;const{data:t}=C(),i=P({defaultValues:{client:{player:{hide_lyrics:((r=t.client.player)==null?void 0:r.hide_lyrics)??!1,hide_queue:((c=t.client.player)==null?void 0:c.hide_queue)??!1,hide_radio_button:((d=t.client.player)==null?void 0:d.hide_radio_button)??!1,enable_download:((u=t.client.player)==null?void 0:u.enable_download)??!1,hide_video_button:((p=t.client.player)==null?void 0:p.hide_video_button)??!1,hide_video:((x=t.client.player)==null?void 0:x.hide_video)??!1,mobile:{auto_open_overlay:((g=(h=t.client.player)==null?void 0:h.mobile)==null?void 0:g.auto_open_overlay)??!1}}}}});return e.jsxs(N,{form:i,title:n,tabs:a,children:[e.jsx(oe,{}),e.jsx(me,{}),e.jsx(ce,{}),e.jsx(de,{}),e.jsx(ue,{}),e.jsx(pe,{})]})}function oe(){return e.jsx(l,{className:"mb-24",title:e.jsx(s,{message:"Lyrics"}),description:e.jsx(s,{message:"Hide the lyrics button from player controls."}),children:e.jsx(o,{size:"sm",name:"client.player.hide_lyrics",children:e.jsx(s,{message:"Hide lyrics button"})})})}function ce(){return e.jsx(l,{className:"mb-24",title:e.jsx(s,{message:"Queue"}),description:e.jsx(s,{message:"Hide the player queue sidebar by default. Users can still toggle it using the queue button."}),children:e.jsx(o,{size:"sm",className:"mt-24",name:"client.player.hide_queue",children:e.jsx(s,{message:"Hide queue sidebar"})})})}function me(){return e.jsx(l,{className:"mb-24",title:e.jsx(s,{message:"Radio"}),description:e.jsx(s,{message:"Hide 'Go to radio' buttons throughout the application."}),children:e.jsx(o,{size:"sm",className:"mt-24",name:"client.player.hide_radio_button",children:e.jsx(s,{message:"Hide radio buttons"})})})}function de(){return e.jsx(l,{className:"mb-24",title:e.jsx(s,{message:"Downloads"}),description:e.jsx(s,{message:"Show download button in player controls. Only appears if track has an audio or video file uploaded."}),children:e.jsx(o,{size:"sm",name:"client.player.enable_download",children:e.jsx(s,{message:"Enable download button"})})})}function ue(){return e.jsxs(l,{className:"mb-24",title:e.jsx(s,{message:"Video Controls"}),description:e.jsx(s,{message:"Configure video player visibility and control buttons."}),children:[e.jsx(o,{size:"sm",name:"client.player.hide_video_button",description:e.jsx(s,{message:"Hide toggle fullscreen button from player controls."}),children:e.jsx(s,{message:"Hide fullscreen button"})}),e.jsx(o,{size:"sm",className:"mt-24",name:"client.player.hide_video",description:e.jsx(s,{message:"Hide the small video player in the bottom right corner by default. Note: This may cause background playback issues with YouTube embeds, especially on mobile."}),children:e.jsx(s,{message:"Hide video player"})})]})}function pe(){return e.jsx(l,{className:"mb-24",title:e.jsx(s,{message:"Mobile Settings"}),description:e.jsx(s,{message:"Configure mobile-specific player behavior and experience."}),children:e.jsx(o,{size:"sm",name:"client.player.mobile.auto_open_overlay",description:e.jsx(s,{message:"Automatically open fullscreen video overlay on mobile when playback starts. Only applies to YouTube streaming."}),children:e.jsx(s,{message:"Auto-open overlay on mobile"})})})}const k=[{name:"functionality",label:S("Functionality")},{name:"interface",label:S("Interface")},{name:"artistPage",label:S("Artist page")}];function $e(){const[a,n]=I(),t=a.get("tab")??"functionality",i=k.findIndex(r=>r.name===t)??0;return e.jsx(_.Fragment,{children:e.jsx(xe,{tabName:t,tabs:e.jsx(Q,{selectedTab:i,onTabChange:r=>{const c=k[r];n({tab:c.name},{replace:!0})},children:e.jsx(B,{className:"mx-24",children:k.map(r=>e.jsx(G,{children:e.jsx(s,{...r.label})},r.name))})})})})}function xe({tabName:a,tabs:n}){const t=e.jsx(s,{message:"Web player"});switch(a){case"functionality":return e.jsx($,{tabs:n,title:t});case"interface":return e.jsx(le,{tabs:n,title:t});case"artistPage":return e.jsx(U,{tabs:n,title:t})}}export{$e as Component};
