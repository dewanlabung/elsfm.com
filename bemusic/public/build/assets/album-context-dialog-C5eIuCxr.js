import{av as c,r as f,j as s,T as t,I as d,J as x,$ as u,ac as g}from"./main-CUJEGI8U.js";import{C as j,b as p,c as a,d as k,l as A,q as h,u as y,o as l}from"./share-media-button-Dw3JV4C-.js";import{A as C,u as M}from"./add-to-queue-menu-button-AYv4MHMe.js";import{A as D}from"./album-image-CkUJpPZs.js";import{g as I,A as T}from"./album-link-DwfnHHp7.js";import{u as B}from"./use-delete-album-VPJfiJbG.js";import{u as m}from"./use-album-permissions-_OgAnUnz.js";import{g as b}from"./artist-link-XkkvBaYk.js";import{A as L}from"./artist-links-YW81uP4U.js";import{T as O,C as E}from"./toggle-in-library-menu-button-CqmQ1GOD.js";import{T as v}from"./toggle-repost-menu-button-DAsBpr-F.js";import{C as P}from"./confirmation-dialog-DVMbD2S1.js";function V({album:e}){var r;const{canEdit:i}=m(e),o=c(),n=f.useCallback(()=>$(e),[e]);return s.jsxs(j,{image:s.jsx(D,{album:e}),title:s.jsx(T,{album:e}),description:s.jsx(L,{artists:e.artists}),loadTracks:n,children:[s.jsx(C,{item:e,loadTracks:n}),s.jsx(p,{}),s.jsx(O,{items:[e]}),s.jsx(R,{album:e}),((r=e.artists)==null?void 0:r[0])&&s.jsx(a,{type:"link",to:b(e.artists[0]),className:"md:hidden",children:s.jsx(t,{message:"Go to artist"})}),!o&&s.jsx(E,{link:I(e,{absolute:!0}),children:s.jsx(t,{message:"Copy album link"})}),s.jsx(k,{item:e}),s.jsx(v,{item:e}),i&&s.jsx(a,{type:"link",to:`/backstage/albums/${e.id}/insights`,children:s.jsx(t,{message:"Insights"})}),i&&s.jsx(a,{type:"link",to:`/backstage/albums/${e.id}/edit`,children:s.jsx(t,{message:"Edit"})}),s.jsx(S,{album:e})]})}function R({album:e}){const{close:i}=u(),o=M(),n=y(r=>r.offlinedAlbumIds.has(e.id));return o?s.jsx(a,{enableWhileOffline:!0,onClick:async()=>{i(),n?l().deleteOfflinedMediaItem(e):l().offlineMediaItem(e)},children:n?s.jsx(t,{message:"Remove from this device"}):s.jsx(t,{message:"Make available offline"})}):null}function S({album:e}){const{close:i}=u(),o=B(),{canDelete:n}=m(e);return n?s.jsx(a,{disabled:o.isPending,onClick:()=>{i(),g(P,{isDanger:!0,title:s.jsx(t,{message:"Delete album"}),body:s.jsx(t,{message:"Are you sure you want to delete this album?"}),confirm:s.jsx(t,{message:"Delete"}),onConfirm:()=>{o.mutate({albumId:e.id})}})},children:s.jsx(t,{message:"Delete"})}):null}async function $(e){if(typeof e.tracks>"u"){const i=await A(h(e));return i.length||d(x("This album has no tracks yet.")),i}return e.tracks||[]}export{V as A};
