import{r as c,bW as Y,b4 as Z,ba as M,j as e,d as u,b7 as _,am as B,b9 as U,bh as D,T as p,t as z,I as ee,c3 as se,W as ae}from"./main-CUJEGI8U.js";import{r as re}from"./file-upload-provider-DWaB2xE4.js";import{u as le}from"./use-active-upload-BwzDBsep.js";import{A as ie}from"./AddAPhoto-y5pGVyq2.js";import{F as te}from"./file-input-config-DrcTpI3-.js";function ne(i){let{value:a=0,minValue:l=0,maxValue:r=100,size:o="md",label:s,showValueLabel:t=!!s,isIndeterminate:n=!1,labelPosition:d="top",className:f,role:b,formatOptions:h={style:"percent"},radius:$="rounded",trackColor:F="bg-primary-light",progressColor:y="bg-primary",trackHeight:P=oe(o)}=i;const N=c.useId();a=Y(a,l,r);const k=(a-l)/(r-l),A=Z(h);let x="";if(!n&&t){const g=h.style==="percent"?k:a;x=A.format(g)}const v={};n||(v.width=`${Math.round(k*100)}%`);const j=M({size:o}),E=(s||x)&&e.jsxs("div",{className:u("my-4 flex justify-between gap-10",j.label),children:[s&&e.jsx("span",{id:N,children:s}),x&&e.jsx("div",{children:x})]});return e.jsxs("div",{"aria-valuenow":n?void 0:a,"aria-valuemin":l,"aria-valuemax":r,"aria-valuetext":n?void 0:x,"aria-labelledby":s?N:void 0,role:b||"progressbar",className:u(f,"min-w-42"),children:[d==="top"&&E,e.jsx("div",{className:`${P} ${$} ${F} overflow-hidden`,children:e.jsx("div",{className:u(y,"fill h-full rounded-l transition-width duration-200",n&&"progress-bar-indeterminate-animate"),style:v})}),d==="bottom"&&E]})}function oe(i){switch(i){case"sm":return"h-6";case"xs":return"h-4";default:return"h-8"}}function ce(i){return e.jsx(ne,{...i})}function de({className:i,label:a,description:l,descriptionPosition:r="top",value:o,onChange:s,defaultValue:t,uploadMetadata:n,showRemoveButton:d,showEditButtonOnHover:f=!1,invalid:b,errorMessage:h,required:$,autoFocus:F,variant:y="input",previewSize:P="h-80",placeholderIcon:N,stretchPreview:k=!1,previewRadius:A,disabled:x,uploadType:v,onFileSelected:j}){const{uploadFile:E,entry:g,uploadStatus:R,deleteEntry:W,isDeletingEntry:H,percentage:G}=le(),S=c.useRef(null);U({autoFocus:F},S);const q=c.useId(),V=a?`${q}-label`:void 0,L=l?`${q}-description`:void 0,T=o||(g==null?void 0:g.url),J={uploadType:v,showToastOnRestrictionFail:!0,restrictions:re({uploadType:v}),metadata:{...n},onSuccess:m=>{s==null||s(m.url,m)},onError:m=>{m&&ee.danger(m)}},w=M({description:l,descriptionPosition:r,invalid:b});let I;y==="avatar"?I=fe:y==="square"?I=ue:I=me;const K=d?e.jsx(z,{variant:"link",color:"danger",size:"xs",disabled:H||!T||x,onClick:()=>{W({onSuccess:()=>s==null?void 0:s("")})},children:e.jsx(p,{message:"Remove image"})}):null,Q=t!=null&&o!==t?e.jsx(z,{variant:"outline",color:"primary",size:"xs",disabled:x,onClick:()=>{s==null||s(t)},children:e.jsx(p,{message:"Use default"})}):null,X=c.useCallback(()=>{var m;(m=S.current)==null||m.click()},[]),O=l?e.jsx("div",{className:w.description,children:l}):null;return e.jsxs("div",{className:u("text-sm",i),children:[a&&e.jsx("div",{id:V,className:w.label,children:a}),r==="top"&&O,e.jsx("div",{"aria-labelledby":V,"aria-describedby":L,children:e.jsxs(D,{fieldClassNames:w,errorMessage:h,invalid:b,children:[e.jsx(I,{inputFieldClassNames:w,placeholderIcon:N,previewSize:P,isLoading:R==="inProgress",imageUrl:T,removeButton:K,useDefaultButton:Q,showEditButtonOnHover:f,stretchPreview:k,previewRadius:A,handleUpload:X,disabled:x,children:e.jsx("input",{ref:S,"aria-labelledby":V,"aria-describedby":L,required:T?!1:$,accept:te.image,type:"file",disabled:R==="inProgress",className:"sr-only",onChange:m=>{var C;(C=m.target.files)!=null&&C.length&&(E(m.target.files[0],J),j==null||j(m.target.files[0]))}})}),R==="inProgress"&&e.jsx(ce,{className:"absolute left-0 right-0 top-0",size:"xs",value:G})]})}),r==="bottom"&&O]})}function me({children:i,inputFieldClassNames:a,imageUrl:l,previewSize:r,stretchPreview:o,isLoading:s,handleUpload:t,removeButton:n,useDefaultButton:d,disabled:f}){return l?e.jsxs(c.Fragment,{children:[e.jsxs("div",{className:`${r} relative mb-10 overflow-hidden rounded border bg-fg-base/8 p-6`,children:[e.jsx("img",{className:u("mx-auto h-full rounded",o?"object-cover":"object-contain"),onClick:()=>t(),src:l,alt:""}),i]}),e.jsx(z,{onClick:()=>t(),disabled:s||f,className:"mr-10",variant:"outline",color:"primary",size:"xs",children:e.jsx(p,{message:"Replace"})}),n&&c.cloneElement(n,{variant:"outline"}),d&&c.cloneElement(d,{variant:"outline"})]}):c.cloneElement(i,{className:u(a.input,"py-8","file:bg-primary file:text-on-primary file:border-none file:rounded file:text-sm file:font-semibold file:px-10 file:h-24 file:mr-10")})}function ue({children:i,placeholderIcon:a,previewSize:l,imageUrl:r,stretchPreview:o,handleUpload:s,removeButton:t,useDefaultButton:n,previewRadius:d="rounded-panel",showEditButtonOnHover:f=!1,disabled:b}){return e.jsxs("div",{children:[e.jsxs("div",{className:u(l,d,!r&&"border border-divider-lighter","group z-20 flex flex-col items-center justify-center gap-14 bg-fg-base/8 bg-center bg-no-repeat",o?"bg-cover":"bg-contain p-6"),style:r?{backgroundImage:`url(${r})`}:void 0,onClick:()=>s(),children:[a&&!r&&c.cloneElement(a,{size:"lg"}),e.jsx(z,{variant:"raised",color:"white",size:"xs",className:u(f&&"invisible group-hover:visible"),disabled:b,children:r?e.jsx(p,{message:"Replace image"}):e.jsx(p,{message:"Upload image"})})]}),i,(t||n)&&e.jsxs("div",{className:"mt-8",children:[t&&c.cloneElement(t,{variant:"link"}),n&&c.cloneElement(n,{variant:"link"})]})]})}function fe({children:i,placeholderIcon:a,previewSize:l,isLoading:r,imageUrl:o,removeButton:s,useDefaultButton:t,handleUpload:n,previewRadius:d="rounded-full",disabled:f}){return a||(a=e.jsx(se,{viewBox:"0 0 48 48",className:u("h-full w-full bg-primary-light/40 text-primary/40",d)})),e.jsxs("div",{children:[e.jsxs("div",{className:u("relative",l),onClick:()=>n(),children:[o?e.jsx("img",{src:o,className:u("h-full w-full object-cover",d),alt:""}):a,e.jsx("div",{className:"absolute -bottom-6 -right-6 rounded-full bg-elevated shadow-xl",children:e.jsx(ae,{disabled:r||f,type:"button",variant:"outline",size:"sm",iconSize:"xs",color:"primary",radius:"rounded-full",children:e.jsx(ie,{})})})]}),i,(s||t)&&e.jsxs("div",{className:"mt-14",children:[s&&c.cloneElement(s,{variant:"link"}),t&&c.cloneElement(t,{variant:"link"})]})]})}function ge(i){const{field:{onChange:a,value:l=null},fieldState:{error:r}}=_({name:i.name}),o={onChange:a,value:l,invalid:r!=null,errorMessage:r?e.jsx(p,{message:"Please select an image."}):null};return e.jsx(de,{...B(o,i)})}export{ge as F,de as I,ce as P};
