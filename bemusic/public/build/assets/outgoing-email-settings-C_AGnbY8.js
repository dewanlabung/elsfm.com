import{cE as C,j as e,T as s,aG as M,P as v,r as c,t as x,I as k,J as y,V as r,Q as m,u as _,M as z}from"./main-CUJEGI8U.js";import{a as j}from"./admin-config-DTFkVWJm.js";import{O as P}from"./outoing-email-not-configured-warning-BkJ7dHms.js";import{A as N}from"./settings-layout-KPbHCtKd.js";import{D as E}from"./settings-links-6v3CjZ6H.js";import{S as g}from"./settings-panel-CAOxmD0t.js";import{T,a as A,b as h}from"./tabs-BVjOaE7L.js";import{u as b}from"./use-admin-settings-CWPhg6hD.js";import{S as F}from"./section-helper-Dtpb8UEn.js";import{E as w}from"./external-link-jlnQ3iTs.js";import{S as G}from"./settings-error-group-DuMk4d-9.js";import{F as S}from"./select-Z9R0wV6S.js";import{u as q}from"./use-social-login-PeP1qq51.js";import"./Album-pwm22nnR.js";import"./Comment-vFUyF-gf.js";import"./FileUpload-CTBOdaGq.js";import"./Mic-DAPkQZuC.js";import"./PlaylistPlay-DcgxbGJx.js";import"./QueueMusic-CiX-EN5z.js";import"./Sell-D56iqjs7.js";import"./middleware-BLXTWOs6.js";import"./use-admin-settings-page-nav-config-C00ols9x.js";import"./datatable-page-with-header-layout-C4e5sJMc.js";import"./dashboard-layout-context-DeTNv3yG.js";import"./file-upload-provider-DWaB2xE4.js";import"./uploaded-file-ksxfN_l-.js";import"./extension-from-filename-O0XMuZye.js";import"./pretty-bytes-bO14ePu9.js";import"./traditional-BcYcLesO.js";import"./confirmation-dialog-DVMbD2S1.js";import"./dialog-footer-jZcc-BBM.js";import"./useSuspenseQuery-13TuSADp.js";import"./combobox-end-adornment-B0xReOuL.js";function L(){const a=C("/admin/settings/email/:page"),i=(a==null?void 0:a.params.page)==="incoming"?1:0;return e.jsx(T,{selectedTab:i,children:e.jsxs(A,{className:"mx-24",children:[e.jsx(h,{to:"/admin/settings/email/outgoing",children:e.jsx(s,{message:"Outgoing"})}),e.jsx(h,{to:"/admin/settings/email/incoming",children:e.jsx(s,{message:"Incoming"})})]})})}const f=M([e.jsx("path",{fill:"#4caf50",d:"M45,16.2l-5,2.75l-5,4.75L35,40h7c1.657,0,3-1.343,3-3V16.2z"},"0"),e.jsx("path",{fill:"#1e88e5",d:"M3,16.2l3.614,1.71L13,23.7V40H6c-1.657,0-3-1.343-3-3V16.2z"},"1"),e.jsx("polygon",{fill:"#e53935",points:"35,11.2 24,19.45 13,11.2 12,17 13,23.7 24,31.95 35,23.7 36,17"},"2"),e.jsx("path",{fill:"#c62828",d:"M3,12.298V16.2l10,7.5V11.2L9.876,8.859C9.132,8.301,8.228,8,7.298,8h0C4.924,8,3,9.924,3,12.298z"},"3"),e.jsx("path",{fill:"#fbc02d",d:"M45,12.298V16.2l-10,7.5V11.2l3.124-2.341C38.868,8.301,39.772,8,40.702,8h0 C43.076,8,45,9.924,45,12.298z"},"4")],"Gmail","0 0 48 48");function V(){const{watch:a,setValue:i}=v(),{connectSocial:t}=q(),n=a("server.connectedGmailAccount"),l=async()=>{const o=await t("secure/settings/mail/gmail/connect");if((o==null?void 0:o.status)==="SUCCESS"){const p=o.callbackData.profile.email;i("server.connectedGmailAccount",p),k(y("Connected gmail account: :email",{values:{email:p}}))}},d=e.jsx(x,{variant:"outline",color:"primary",startIcon:e.jsx(f,{}),onClick:()=>l(),children:e.jsx(s,{message:"Connect gmail account"})}),u=e.jsxs("div",{className:"flex items-center gap-14 rounded border bg-alt px-14 py-6 text-sm",children:[e.jsx(f,{size:"lg"}),n,e.jsx(x,{variant:"text",color:"primary",className:"ml-auto",onClick:()=>l(),children:e.jsx(s,{message:"Reconnect"})})]});return e.jsxs(c.Fragment,{children:[e.jsx("div",{className:"mb-6 text-sm",children:e.jsx(s,{message:"Gmail account"})}),n?u:d]})}function O({isInvalid:a}){return e.jsxs(c.Fragment,{children:[e.jsx(r,{size:"sm",invalid:a,className:"mb-20",name:"server.mailgun_domain",label:e.jsx(s,{message:"Mailgun domain"}),description:e.jsx(s,{message:"Usually the domain of your site (site.com)"}),required:!0}),e.jsx(r,{size:"sm",invalid:a,className:"mb-20",name:"server.mailgun_secret",label:e.jsx(s,{message:"Mailgun API key"}),description:e.jsx(s,{message:"Should start with `key-`"}),required:!0}),e.jsx(r,{size:"sm",invalid:a,name:"server.mailgun_endpoint",label:e.jsx(s,{message:"Mailgun endpoint"}),description:e.jsx(s,{message:"Can be left empty, if your mailgun account is in the US region."}),placeholder:"api.eu.mailgun.net"})]})}function U({isInvalid:a}){return e.jsx(r,{size:"sm",invalid:a,name:"server.postmark_token",label:e.jsx(s,{message:"Postmark token"}),required:!0})}function D({isInvalid:a}){return e.jsxs(c.Fragment,{children:[e.jsx(r,{size:"sm",invalid:a,className:"mb-20",name:"server.ses_key",label:e.jsx(s,{message:"SES key"}),required:!0}),e.jsx(r,{size:"sm",invalid:a,className:"mb-20",name:"server.ses_secret",label:e.jsx(s,{message:"SES secret"}),required:!0}),e.jsx(r,{size:"sm",invalid:a,name:"server.ses_region",label:e.jsx(s,{message:"SES region"}),placeholder:"us-east-1",required:!0})]})}function B({isInvalid:a}){return e.jsxs(e.Fragment,{children:[e.jsx(r,{size:"sm",invalid:a,className:"mb-20",name:"server.mail_host",label:e.jsx(s,{message:"SMTP host"}),required:!0}),e.jsx(r,{size:"sm",invalid:a,className:"mb-20",name:"server.mail_username",label:e.jsx(s,{message:"SMTP username"}),required:!0}),e.jsx(r,{size:"sm",invalid:a,className:"mb-20",type:"password",name:"server.mail_password",label:e.jsx(s,{message:"SMTP password"}),required:!0}),e.jsx(r,{size:"sm",invalid:a,className:"mb-20",type:"number",name:"server.mail_port",label:e.jsx(s,{message:"SMTP port"})}),e.jsxs(S,{size:"sm",selectionMode:"single",invalid:a,name:"server.mail_encryption",label:e.jsx(s,{message:"SMTP encryption"}),children:[e.jsx(m,{value:"",children:e.jsx(s,{message:"None"})}),e.jsx(m,{value:"tls",children:e.jsx(s,{message:"TLS"})}),e.jsx(m,{value:"ssl",children:e.jsx(s,{message:"SSL"})})]})]})}function H(){const{watch:a,clearErrors:i}=v(),t=a("server.mail_mailer"),n=[];return t==="mailgun"&&n.push(O),t==="smtp"&&n.push(B),t==="ses"&&n.push(D),t==="postmark"&&n.push(U),t==="gmailApi"&&n.push(V),e.jsx(G,{separatorTop:!1,separatorBottom:!1,name:"mail_group",children:l=>e.jsxs(c.Fragment,{children:[e.jsxs(S,{size:"sm",onSelectionChange:()=>{i()},invalid:l,selectionMode:"single",name:"server.mail_mailer",label:e.jsx(s,{message:"Outgoing mail method"}),children:[e.jsx(m,{value:"mailgun",children:"Mailgun"}),e.jsx(m,{value:"gmailApi",children:"Gmail Api"}),e.jsx(m,{value:"smtp",children:"SMTP"}),e.jsx(m,{value:"postmark",children:"Postmark"}),e.jsx(m,{value:"ses",children:"Ses (Amazon Simple Email Service)"}),e.jsx(m,{value:"sendmail",children:"SendMail"}),e.jsx(m,{value:"log",children:"Log (Email will be saved to log file instead of sending)"})]}),n.length?e.jsx("div",{className:"mt-30",children:n.map((d,u)=>e.jsx(d,{isInvalid:l},u))}):null]})})}function ye(){var n;const{incoming_email:a}=_(),{data:i}=b(),t=z({defaultValues:{server:{mail_from_address:i.server.mail_from_address??"",mail_from_name:i.server.mail_from_name??"",mail_mailer:i.server.mail_mailer??"",mailgun_domain:i.server.mailgun_domain??"",mailgun_secret:i.server.mailgun_secret??"",mailgun_endpoint:i.server.mailgun_endpoint??"",mail_host:i.server.mail_host??"",mail_username:i.server.mail_username??"",mail_password:i.server.mail_password??"",mail_port:i.server.mail_port??"",mail_encryption:i.server.mail_encryption??"",ses_key:i.server.ses_key??"",ses_secret:i.server.ses_secret??"",ses_region:i.server.ses_region??"",postmark_token:i.server.postmark_token??"",connectedGmailAccount:i.server.connectedGmailAccount??""},client:{mail:{contact_page_address:((n=i.client.mail)==null?void 0:n.contact_page_address)??""}}}});return e.jsxs(N,{form:t,title:e.jsx(s,{message:"Email"}),tabs:a!=null&&a.integrated?e.jsx(L,{}):void 0,children:[e.jsx(P,{}),e.jsx(R,{}),e.jsx(W,{}),e.jsx(I,{})]})}function R(){return e.jsxs(g,{className:"mb-24",title:e.jsx(s,{message:"From Information"}),description:e.jsx(s,{message:"Configure the sender information for all outgoing application emails."}),children:[e.jsx(r,{size:"sm",type:"email",name:"server.mail_from_address",label:e.jsx(s,{message:"From address"}),description:e.jsx(s,{message:"All outgoing application emails will be sent from this email address."}),required:!0,className:"mb-20"}),e.jsx(r,{size:"sm",name:"server.mail_from_name",label:e.jsx(s,{message:"From name"}),description:e.jsx(s,{message:"All outgoing application emails will be sent using this name."}),required:!0,className:"mb-20"}),e.jsx(F,{size:"sm",color:"warning",description:e.jsx(s,{message:"Your selected mail method must be authorized to send emails using this address and name."})})]})}function W(){const{base_url:a}=_(),{data:i}=b(),t=`${a}/contact`;return i.server.enable_contact_page?e.jsx(g,{className:"mb-24",title:e.jsx(s,{message:"Contact Page"}),description:e.jsx(s,{message:"Configure where contact form submissions should be sent."}),children:e.jsx(r,{size:"sm",type:"email",name:"client.mail.contact_page_address",label:e.jsx(s,{message:"Contact page address"}),description:e.jsx(s,{values:{contactPageUrl:e.jsx(w,{href:t,children:t})},message:"Where emails from :contactPageUrl page should be sent to."})})}):null}function I(){return e.jsx(g,{title:e.jsx(s,{message:"Outgoing Mail Method"}),description:e.jsx(s,{message:"Configure which method should be used for sending outgoing application emails."}),link:j.settings.outgoingEmail?e.jsx(E,{link:j.settings.outgoingEmail}):void 0,children:e.jsx(H,{})})}export{ye as Component};
