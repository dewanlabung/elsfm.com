import{z as j,ae as y,q as A,G as v,ag as C,I as E,J as N,aa as k,b as q,M as I,j as t,au as P,T as d,N as _,at as l}from"./main-CUJEGI8U.js";import{C as F}from"./crupdate-artist-form-Cpso1Idg.js";import{g as c}from"./artist-link-XkkvBaYk.js";import{D as Q}from"./paginated-resources-BDxg6DLi.js";import{u as B}from"./use-artist-permissions-BSDv3a1p.js";import{C as D}from"./crupdate-resource-layout-D1LYHbcS.js";import{u as f}from"./use-required-params-Cp5Jywbp.js";import{u as g}from"./useSuspenseQuery-13TuSADp.js";import{B as x,a as o}from"./breadcrumb-FXqyksUv.js";import"./music-Bh2SQVZ2.js";import"./album-image-CkUJpPZs.js";import"./Album-pwm22nnR.js";import"./album-link-DwfnHHp7.js";import"./use-delete-album-VPJfiJbG.js";import"./table-CgoYghfp.js";import"./checkbox-suk8vW77.js";import"./CheckBoxOutlineBlank-BgWeDdny.js";import"./skeleton-BmWW5Jc-.js";import"./ArrowDownward-BHYKFIfy.js";import"./useInteractOutside-BFJZ3Z5N.js";import"./useEffectEvent-pADbdn7r.js";import"./is-ctrl-or-shift-pressed-Bx-mqgCW.js";import"./use-pointer-events-DcvSqvAc.js";import"./useGlobalListeners-BeXr-yG1.js";import"./use-sortable-table-data-wSD3nGow.js";import"./sort-array-of-objects-OJAulda_.js";import"./formatted-date-DzIPJwiH.js";import"./use-date-formatter-m8TmZzOM.js";import"./DateFormatter-Dix9bfnP.js";import"./formatted-number-gsF1qEbc.js";import"./Add-B3RL66ee.js";import"./Edit-BRVJ8AkN.js";import"./confirmation-dialog-DVMbD2S1.js";import"./dialog-footer-jZcc-BBM.js";import"./info-dialog-trigger-icon-DFoUSLJK.js";import"./profile-links-form-D9bVZwzy.js";import"./genre-B_3ZyEC1.js";import"./form-normalized-model-chip-field-R33Z1aXc.js";import"./use-normalized-models-ClA2DWxP.js";import"./form-chip-field-ehb7ckkp.js";import"./input-DAWJLQiY.js";import"./chip-list-D0uDB84E.js";import"./image-selector-GLpYAkj6.js";import"./file-upload-provider-DWaB2xE4.js";import"./uploaded-file-ksxfN_l-.js";import"./extension-from-filename-O0XMuZye.js";import"./pretty-bytes-bO14ePu9.js";import"./traditional-BcYcLesO.js";import"./use-active-upload-BwzDBsep.js";import"./open-upload-window-CboR35vP.js";import"./AddAPhoto-y5pGVyq2.js";import"./file-input-config-DrcTpI3-.js";import"./switch-4KDjemPX.js";import"./tabs-BVjOaE7L.js";import"./tab-panels-BNEb_18b.js";import"./datatable-page-with-header-layout-C4e5sJMc.js";import"./dashboard-layout-context-DeTNv3yG.js";import"./ChevronRight-BB6TpByg.js";import"./MoreHoriz-RUUnngeG.js";const L=i=>`artists/${i}`;function S(i){const{trans:s}=j(),e=y(),{pathname:m}=A();return v({mutationFn:a=>w(a),onSuccess:a=>{E(s(N("Artist updated"))),k.invalidateQueries({queryKey:Q("artists")}),m.includes("admin")?e("/admin/artists"):e(c(a.artist))},onError:a=>C(a,i)})}function w({id:i,...s}){return q.put(L(i),s).then(e=>e.data)}function z({showExternalFields:i=!0,breadcrumbs:s,navbar:e}){var u;const{artistId:m}=f(["artistId"]),a=g(l.artists.show(m).artist("editArtistPage")),r=a.data.artist,{canEdit:b}=B(r),p=I({defaultValues:{id:r.id,name:r.name,verified:r.verified,spotify_id:r.spotify_id,genres:r.genres,image_small:r.image_small,links:r.links,profile:r.profile,profile_images:r.profile_images,disabled:r.disabled}}),n=S(p);return b?t.jsx(D,{form:p,onSubmit:h=>{n.mutate(h)},navbar:e,title:s??t.jsxs(x,{size:"xl",children:[t.jsx(o,{to:"/admin/artists",children:t.jsx(d,{message:"Artists"})}),t.jsx(o,{children:r.name})]}),isLoading:n.isPending,disableSaveWhenNotDirty:!0,children:t.jsx(F,{albums:(u=a.data.albums)==null?void 0:u.data,showExternalFields:i})}):t.jsx(P,{to:"/",replace:!0})}function Gt(){const{artistId:i}=f(["artistId"]),s=g(l.artists.show(i).artist("editArtistPage"));return t.jsx("div",{className:"h-screen",children:t.jsx(z,{showExternalFields:!1,navbar:t.jsx(_,{className:"flex-shrink-0",color:"bg",darkModeColor:"bg"}),breadcrumbs:t.jsxs(x,{size:"xl",children:[t.jsx(o,{to:c(s.data.artist),children:s.data.artist.name}),t.jsx(o,{children:t.jsx(d,{message:"Edit"})})]})})})}export{Gt as BackstageUpdateArtistPage,z as Component};
