import{G as l,H as d,aa as g,b as m,$ as C,u as R,j as n,T as a}from"./main-CUJEGI8U.js";import{c as f}from"./share-media-button-Dw3JV4C-.js";import{c as x}from"./toggle-in-library-menu-button-CqmQ1GOD.js";import{u as h}from"./use-auth-click-capture-B9wu-BP4.js";const u=x("reposts"),r=u.getState;function T(){return l({mutationFn:e=>j(e),onSuccess:(e,{repostable:t})=>{e.action==="added"?r().add([t]):r().remove([t]),g.invalidateQueries({queryKey:["reposts"]})},onError:e=>d(e)})}function j({repostable:e}){const t={repostable_id:e.id,repostable_type:e.model_type};return m.post("reposts/toggle",t).then(s=>s.data)}function _({item:e}){const t=h(),{close:s}=C(),{player:o}=R(),i=T(),p=u(c=>c.has(e));return o!=null&&o.enable_repost?n.jsx(f,{onClickCapture:t,onClick:()=>{s(),i.mutate({repostable:e})},children:p?n.jsx(a,{message:"Reposted"}):n.jsx(a,{message:"Repost"})}):null}export{_ as T,u as a,T as u};
