import{ba as j,j as i,T as v,cx as y,r as l,u as S,aF as T,aA as x}from"./main-CUJEGI8U.js";function A({className:e}){const{label:o}=j();return i.jsxs("div",{className:e,children:[i.jsx("div",{className:o,children:i.jsx(v,{message:"Let us know you're human"})}),i.jsx("div",{id:"captcha-container",className:"h-[65px] w-[300px]"})]})}function N(e,o=!1){var h,w,f,g,k;const{isInsideSettingsPreview:C}=y(),p=l.useRef(!1),n=S(),r=((h=n.captcha)==null?void 0:h.provider)==="turnstile"?"turnstile":"recaptcha",a=r==="recaptcha"?(w=n.captcha)==null?void 0:w.g_site_key:(f=n.captcha)==null?void 0:f.t_site_key,s=!!(!C&&a&&((k=(g=n.captcha)==null?void 0:g.enable)!=null&&k[e])&&!o),[m,d]=l.useState(null);l.useEffect(()=>{let c=!1;if(s&&!c&&!p.current){if(c||p.current)return;const t=()=>{r==="recaptcha"?window.grecaptcha.render("captcha-container",{sitekey:a,action:e,callback:function(u){d(u)}}):turnstile.render("#captcha-container",{sitekey:a,action:e,callback:function(u){d(u)}})};window.turnstile||window.grecaptcha?setTimeout(()=>t()):window.captchaOnloadCallback=function(){t()},E(),p.current=!0}return()=>{var t;c=!0,window.turnstile&&((t=window.turnstile)==null||t.remove("#captcha-container"))}},[s,a]);const b=l.useCallback(()=>{var c,t;!a||!s||(r==="turnstile"?(c=window.turnstile)==null||c.reset("#captcha-container"):(t=window.grecaptcha)==null||t.reset())},[a,s,r]);return{captchaToken:m,captchaEnabled:s,resetCaptcha:b}}function E(){var e;return((e=T().settings.captcha)==null?void 0:e.provider)==="turnstile"?x.loadAsset("https://challenges.cloudflare.com/turnstile/v0/api.js?onload=captchaOnloadCallback&render=explicit",{id:"turnstile-js"}):x.loadAsset("https://www.google.com/recaptcha/api.js?onload=captchaOnloadCallback&render=explicit",{id:"recaptcha-js"})}export{A as C,N as u};
