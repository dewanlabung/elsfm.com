import{J as u,P as x,j as e,r as w,V as l,T as a,D as C,t as p,M as j,$ as g,a0 as y,a1 as v,a2 as k,as as S,G as U,H as W,b as D,z as _,Q as m,_ as b,ag as O,bS as J,a4 as X,W as K,a5 as Q,ac as $,u as I,a as Y,b7 as Z,am as ee,R as se,ap as ae}from"./main-CUJEGI8U.js";import{a as F}from"./admin-config-DTFkVWJm.js";import{S as te}from"./settings-error-group-DuMk4d-9.js";import{A as ie}from"./settings-layout-KPbHCtKd.js";import{a as V,S as q}from"./settings-panel-CAOxmD0t.js";import{D as ne}from"./settings-links-6v3CjZ6H.js";import{D as z}from"./dialog-footer-jZcc-BBM.js";import{F as f}from"./switch-4KDjemPX.js";import{F as B}from"./select-Z9R0wV6S.js";import{S as M}from"./section-helper-Dtpb8UEn.js";import{u as h}from"./use-admin-settings-CWPhg6hD.js";import{T as oe}from"./table-CgoYghfp.js";import{F as re}from"./formatted-bytes-D84zpjBD.js";import{F as le}from"./formatted-number-gsF1qEbc.js";import{A as ce}from"./Add-B3RL66ee.js";import{M as de}from"./MoreHoriz-RUUnngeG.js";import{S as me}from"./Storage-B9JowOf2.js";import{C as T}from"./confirmation-dialog-DVMbD2S1.js";import{C as ue,F as pe}from"./form-chip-field-ehb7ckkp.js";import"./Album-pwm22nnR.js";import"./Comment-vFUyF-gf.js";import"./FileUpload-CTBOdaGq.js";import"./Mic-DAPkQZuC.js";import"./PlaylistPlay-DcgxbGJx.js";import"./QueueMusic-CiX-EN5z.js";import"./Sell-D56iqjs7.js";import"./middleware-BLXTWOs6.js";import"./use-admin-settings-page-nav-config-C00ols9x.js";import"./datatable-page-with-header-layout-C4e5sJMc.js";import"./dashboard-layout-context-DeTNv3yG.js";import"./file-upload-provider-DWaB2xE4.js";import"./uploaded-file-ksxfN_l-.js";import"./extension-from-filename-O0XMuZye.js";import"./pretty-bytes-bO14ePu9.js";import"./traditional-BcYcLesO.js";import"./external-link-jlnQ3iTs.js";import"./combobox-end-adornment-B0xReOuL.js";import"./useSuspenseQuery-13TuSADp.js";import"./checkbox-suk8vW77.js";import"./CheckBoxOutlineBlank-BgWeDdny.js";import"./skeleton-BmWW5Jc-.js";import"./ArrowDownward-BHYKFIfy.js";import"./useInteractOutside-BFJZ3Z5N.js";import"./useEffectEvent-pADbdn7r.js";import"./is-ctrl-or-shift-pressed-Bx-mqgCW.js";import"./use-pointer-events-DcvSqvAc.js";import"./useGlobalListeners-BeXr-yG1.js";import"./input-DAWJLQiY.js";import"./chip-list-D0uDB84E.js";const R=[{type:"local",label:u("Local disk")},{type:"s3",label:u("Amazon S3")},{type:"s3_compatible",label:u("S3 API compatible provider")},{type:"backblaze",label:u("Backblaze")},{type:"webdav",label:u("WebDAV")},{type:"ftp",label:u("FTP")},{type:"sftp",label:u("SFTP")},{type:"digitalocean",label:u("DigitalOcean spaces")}];function xe({isInvalid:s,formPrefix:t}){const{watch:i,setValue:n}=x(),o=i(`credentials.${t}.app_key`),r=i(`credentials.${t}.app_secret`);return e.jsxs(w.Fragment,{children:[e.jsx(l,{invalid:s,className:"mb-20",name:`credentials.${t}.app_key`,label:e.jsx(a,{message:"Dropbox application key"}),required:!0}),e.jsx(l,{invalid:s,className:"mb-20",name:`credentials.${t}.app_secret`,label:e.jsx(a,{message:"Dropbox application secret"}),required:!0}),e.jsx(l,{invalid:s,className:"mb-20",name:`credentials.${t}.refresh_token`,label:e.jsx(a,{message:"Dropbox refresh token"}),required:!0}),e.jsxs(C,{type:"modal",onClose:c=>{c&&n(`credentials.${t}.refresh_token`,c,{shouldDirty:!0})},children:[e.jsx(p,{variant:"outline",color:"primary",size:"xs",disabled:!o||!r,children:e.jsx(a,{message:"Get dropbox refresh token"})}),e.jsx(je,{appKey:o,appSecret:r})]})]})}function je({appKey:s,appSecret:t}){const i=j(),{formId:n,close:o}=g(),r=ge();return e.jsxs(y,{children:[e.jsx(v,{children:e.jsx(a,{message:"Connect dropbox account"})}),e.jsx(k,{children:e.jsxs(S,{id:n,form:i,onSubmit:c=>{r.mutate({app_key:s,app_secret:t,access_code:c.accessCode},{onSuccess:d=>{o(d.refreshToken)}})},children:[e.jsxs("div",{className:"mb-20 border-b pb-20",children:[e.jsx("div",{className:"mb-10 text-sm text-muted",children:e.jsx(a,{message:"Click the 'get access code' button to get dropbox access code, then paste it into the field below."})}),e.jsx(p,{variant:"outline",color:"primary",size:"xs",elementType:"a",target:"_blank",href:`https://www.dropbox.com/oauth2/authorize?client_id=${s}&token_access_type=offline&response_type=code`,children:e.jsx(a,{message:"Get access code"})})]}),e.jsx(l,{name:"accessCode",label:e.jsx(a,{message:"Dropbox access code"}),required:!0})]})}),e.jsxs(z,{children:[e.jsx(p,{onClick:()=>{o()},children:e.jsx(a,{message:"Cancel"})}),e.jsx(p,{variant:"flat",color:"primary",form:n,type:"submit",disabled:!s||!t||r.isPending,children:e.jsx(a,{message:"Connect"})})]})]})}function ge(){return U({mutationFn:s=>D.post("settings/uploading/dropbox-refresh-token",s).then(t=>t.data),onError:s=>W(s)})}function be({isInvalid:s,formPrefix:t}){return e.jsxs("div",{children:[e.jsx(l,{invalid:s,size:"sm",className:"mb-20",name:`config.${t}.host`,label:e.jsx(a,{message:"FTP hostname"}),required:!0}),e.jsx(l,{invalid:s,size:"sm",className:"mb-20",name:`config.${t}.username`,label:e.jsx(a,{message:"FTP username"}),required:!0}),e.jsx(l,{invalid:s,size:"sm",className:"mb-20",name:`config.${t}.password`,label:e.jsx(a,{message:"FTP password"}),type:"password",required:!0}),e.jsx(l,{invalid:s,size:"sm",className:"mb-20",name:`config.${t}.port`,label:e.jsx(a,{message:"FTP port"}),type:"number",min:0,placeholder:"21"}),e.jsx(f,{invalid:s,name:`config.${t}.passive`,className:"mb-10",children:e.jsx(a,{message:"Passive"})}),e.jsx(f,{invalid:s,name:`config.${t}.ssl`,children:e.jsx(a,{message:"SSL"})})]})}function A({isInvalid:s,formPrefix:t,showEndpointField:i}){return e.jsxs("div",{children:[i&&e.jsx(l,{size:"sm",className:"mb-20",invalid:s,name:`config.${t}.endpoint`,label:e.jsx(a,{message:"Endpoint"})}),e.jsx(l,{size:"sm",invalid:s,className:"mb-20",name:`config.${t}.key`,label:e.jsx(a,{message:"Access key"}),required:!0}),e.jsx(l,{size:"sm",invalid:s,className:"mb-20",name:`config.${t}.secret`,label:e.jsx(a,{message:"Secret key"}),required:!0}),e.jsx(l,{size:"sm",invalid:s,className:"mb-20",name:`config.${t}.region`,label:e.jsx(a,{message:"Region"}),placeholder:"us-east-1",required:!0}),e.jsx(l,{size:"sm",className:"mb-20",invalid:s,name:`config.${t}.bucket`,label:e.jsx(a,{message:"Bucket"}),required:!0}),e.jsx(f,{size:"sm",name:`config.${t}.direct_upload`,description:e.jsx(a,{message:"Upload files directly from user's browser to cloud storage, bypassing your server. This improves upload speeds and reduces server bandwidth usage."}),children:e.jsx(a,{message:"Enable direct upload"})}),i&&e.jsx(f,{className:"mt-20",size:"sm",name:`config.${t}.use_path_style_endpoint`,description:e.jsx(a,{message:"Use 'domain.com/bucket/file.jpg' url style instead of 'bucket.domain.com/file.jpg'"}),children:e.jsx(a,{message:"Use path style endpoint"})})]})}function he({isInvalid:s,formPrefix:t}){const{trans:i}=_();return e.jsxs("div",{children:[e.jsx(l,{invalid:s,size:"sm",className:"mb-20",name:`config.${t}.host`,label:e.jsx(a,{message:"SFTP hostname"}),required:!0}),e.jsx(l,{invalid:s,size:"sm",className:"mb-20",name:`config.${t}.username`,label:e.jsx(a,{message:"SFTP username"}),required:!0}),e.jsx(l,{invalid:s,size:"sm",className:"mb-20",type:"password",name:`config.${t}.password`,label:e.jsx(a,{message:"SFTP password"}),placeholder:i(u("Optional, if using key-based authentication"))}),e.jsx(l,{invalid:s,size:"sm",className:"mb-20",name:`config.${t}.port`,label:e.jsx(a,{message:"SFTP port"}),type:"number",min:0,placeholder:"22"}),e.jsx(l,{invalid:s,size:"sm",className:"mb-20",name:`config.${t}.root`,label:e.jsx(a,{message:"Root path"}),placeholder:"/"}),e.jsx(l,{invalid:s,size:"sm",className:"mb-20",name:`config.${t}.privateKey`,label:e.jsx(a,{message:"Private key path"}),placeholder:i(u("Optional")),descriptionPosition:"top",description:e.jsx(a,{message:"Absolute path to private key file for key-based authentication"})}),e.jsx(l,{invalid:s,size:"sm",className:"mb-20",name:`config.${t}.passphrase`,label:e.jsx(a,{message:"Passphrase"}),placeholder:i(u("Optional")),description:e.jsx(a,{message:"Passphrase for encrypted private key"}),descriptionPosition:"top",type:"password"})]})}function fe({isInvalid:s,formPrefix:t}){return e.jsxs("div",{children:[e.jsx(l,{invalid:s,size:"sm",className:"mb-20",name:`credentials.${t}.baseUri`,label:e.jsx(a,{message:"WebDAV URL"}),required:!0}),e.jsx(l,{invalid:s,size:"sm",className:"mb-20",name:`credentials.${t}.username`,label:e.jsx(a,{message:"WebDAV username"}),required:!0}),e.jsx(l,{invalid:s,size:"sm",className:"mb-20",name:`credentials.${t}.password`,label:e.jsx(a,{message:"WebDAV password"}),type:"password",required:!0})]})}function P(){const{trans:s}=_();return e.jsxs(e.Fragment,{children:[e.jsx(l,{size:"sm",className:"mb-20",name:"name",label:e.jsx(a,{message:"Name"}),required:!0}),e.jsx(l,{size:"sm",className:"mb-20",name:"root",label:e.jsx(a,{message:"Storage path"}),descriptionPosition:"top",description:e.jsx(a,{message:"Relative or absolute path where uploads should be stored. Leave empty to use default location."}),required:!0}),e.jsx(l,{size:"sm",className:"mb-20",type:"url",name:"domain",label:e.jsx(a,{message:"Custom domain"}),placeholder:s(u("Optional")),descriptionPosition:"top",description:e.jsx(a,{message:"Custom domain or CDN url from which to serve files uploaded to this backend."})}),e.jsx(ye,{}),e.jsx(ke,{})]})}function ye(){const{clearErrors:s}=x();return e.jsx(B,{size:"sm",className:"mb-20",name:"type",label:e.jsx(a,{message:"Type"}),onSelectionChange:()=>s(),description:e.jsx(ve,{}),children:R.map(t=>e.jsx(m,{value:t.type,children:e.jsx(a,{...t.label})},t.type))})}function ve(){const s=b({name:"type"});let t=null;return s==="s3"?t=F.settings.s3:s==="backblaze"&&(t=F.settings.backblaze),t?e.jsx(ne,{link:t}):null}function ke(){const s=b({name:"type"});switch(s){case"s3":case"digitalocean":case"backblaze":return e.jsx(A,{formPrefix:s});case"s3_compatible":return e.jsx(A,{formPrefix:s,showEndpointField:!0});case"ftp":return e.jsx(be,{formPrefix:s});case"sftp":return e.jsx(he,{formPrefix:s});case"webdav":return e.jsx(fe,{formPrefix:s});case"dropbox":return e.jsx(xe,{formPrefix:s});default:return null}}function E(s){return U({mutationFn:t=>D.put("settings/uploading/validate-backend-credentials",t),onError:t=>O(t,s)})}function Se(){const{formId:s,close:t}=g(),i=j({defaultValues:{type:"local",root:"",name:"",config:{}}}),n=E(i);return e.jsxs(y,{size:"lg",children:[e.jsx(v,{children:e.jsx(a,{message:"Create backend"})}),e.jsx(k,{children:e.jsx(S,{disableNativeValidation:!0,id:s,form:i,onSubmit:o=>{const r={id:J(10),...o,config:o.config[o.type]};n.mutate(r,{onSuccess:()=>t(r)})},children:e.jsx(P,{})})}),e.jsxs(z,{children:[e.jsx(p,{variant:"outline",onClick:()=>t(),children:e.jsx(a,{message:"Cancel"})}),e.jsx(p,{variant:"flat",color:"primary",type:"submit",form:s,disabled:n.isPending,children:e.jsx(a,{message:"Create"})})]})]})}function ze({backend:s}){const{formId:t,close:i}=g(),n=j({defaultValues:{type:s.type,name:s.name,root:s.root,domain:s.domain,config:s.config?{[s.type]:s.config}:void 0}}),o=E(n);return e.jsxs(y,{size:"lg",children:[e.jsx(v,{children:e.jsx(a,{message:"Update backend"})}),e.jsxs(k,{children:[e.jsx(M,{className:"mb-34",color:"danger",description:e.jsx(a,{message:"Changing type, path, host or bucket settings will make files previosuly uploaded to this backend unavailable. Consider creating a new backend instead."})}),e.jsx(S,{disableNativeValidation:!0,id:t,form:n,onBeforeSubmit:()=>n.clearErrors(),onSubmit:r=>{var d;const c={...r,id:s.id,config:(d=r.config)==null?void 0:d[r.type]};o.mutate(c,{onSuccess:()=>{i(c)}})},children:e.jsx(P,{})})]}),e.jsxs(z,{children:[e.jsx(p,{onClick:()=>i(),children:e.jsx(a,{message:"Cancel"})}),e.jsx(p,{variant:"flat",color:"primary",type:"submit",form:t,disabled:o.isPending,children:e.jsx(a,{message:"Update"})})]})]})}const Ne=[{key:"name",allowsSorting:!0,width:"min-w-200",visibleInMode:"all",header:()=>e.jsx(a,{message:"Name"}),body:s=>e.jsx("span",{className:"font-semibold",children:s.name})},{key:"type",allowsSorting:!0,header:()=>e.jsx(a,{message:"Type"}),body:s=>{var i;const t=(i=R.find(n=>n.type===s.type))==null?void 0:i.label;return t?e.jsx(a,{...t}):s.type}},{key:"fileCount",allowsSorting:!0,header:()=>e.jsx(a,{message:"Files"}),body:s=>e.jsx(we,{backend:s})},{key:"size",allowsSorting:!0,header:()=>e.jsx(a,{message:"Size"}),body:s=>e.jsx(Fe,{backend:s})},{key:"actions",visibleInMode:"all",header:()=>e.jsx(a,{message:"Actions"}),hideHeader:!0,body:s=>e.jsx(Ce,{backend:s}),width:"w-36"}];function Fe({backend:s}){var n,o;const{data:t}=h(),i=(o=(n=t.uploading.file_counts)==null?void 0:n.find(r=>r.backend_id===s.id))==null?void 0:o.total_size;return i?e.jsx(re,{bytes:i}):"-"}function we({backend:s}){var n,o;const{data:t}=h(),i=(o=(n=t.uploading.file_counts)==null?void 0:n.find(r=>r.backend_id===s.id))==null?void 0:o.file_count;return i?e.jsx(le,{value:i}):"-"}function Ce({backend:s}){const{setValue:t,getValues:i}=x(),n=async()=>{const r=await $(ze,{backend:s});if(r){const c=(i("client.uploading.backends")??[]).map(d=>d.id===s.id?{...d,...r}:d);t("client.uploading.backends",c,{shouldDirty:!0})}},o=async()=>{if(await $(_e,{backend:s})){const c=(i("client.uploading.backends")??[]).filter(d=>d.id!==s.id);t("client.uploading.backends",c,{shouldDirty:!0})}};return e.jsxs(X,{children:[e.jsx(K,{className:"text-muted",size:"sm",children:e.jsx(de,{})}),e.jsxs(Q,{children:[e.jsx(m,{value:"edit",onSelected:()=>n(),children:e.jsx(a,{message:"Edit"})}),e.jsx(m,{value:"remove",onSelected:()=>o(),children:e.jsx(a,{message:"Remove"})})]})]})}function De(){const{setValue:s,getValues:t}=x(),i=b({name:"client.uploading.backends"})??[];return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-16 pl-8",children:[e.jsx("div",{className:"flex size-32 items-center justify-center rounded-button bg-fg-base/6",children:e.jsx(me,{size:"xs"})}),e.jsx("div",{className:"text-base font-semibold",children:e.jsx(a,{message:"Storage backends"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"ml-24 h-24 w-2 bg-fg-base/6"}),e.jsx("div",{className:"mb-12 overflow-hidden rounded-panel border-x border-t max-md:border-b",children:e.jsx(oe,{tableStyle:"html",enableSelection:!1,columns:Ne,data:i,cellHeight:"h-44",headerCellHeight:"h-36",headerRowBg:"bg-fg-base/4"})}),e.jsxs(C,{type:"modal",onClose:n=>{if(n){const o=t("client.uploading.backends")??[];s("client.uploading.backends",[...o,n],{shouldDirty:!0})}},children:[e.jsx(p,{size:"xs",variant:"outline",startIcon:e.jsx(ce,{}),children:e.jsx(a,{message:"Add backend"})}),e.jsx(Se,{})]})]})]})}function _e({backend:s}){var r;const{close:t}=g(),{base_url:i}=I(),{data:n}=h();return Object.entries(((r=n.client.uploading)==null?void 0:r.types)??{}).some(([c,d])=>d.backends.includes(s.id))?e.jsx(T,{hideClose:!0,title:e.jsx(a,{message:"Remove backend"}),body:e.jsx(a,{message:"This backend is used by some upload types. Detach it first to remove."}),confirm:e.jsx(a,{message:"Got it"}),onConfirm:()=>t(!1)}):e.jsx(T,{title:e.jsx(a,{message:"Remove backend"}),isDanger:!0,body:e.jsxs("div",{children:[e.jsx("p",{className:"mb-8",children:e.jsx(a,{message:"Are you sure you want to remove this backend?"})}),e.jsx("p",{className:"mb-8",children:e.jsx(a,{message:"This <b>will not</b> delete files uploaded using this backend, so you can re-attach it later at the same path.",values:{b:c=>e.jsx("strong",{children:c})}})}),e.jsx("p",{children:e.jsx(a,{message:"If you want to delete the files first, you can do it from the <a>files</a> page, using backend filter.",values:{a:c=>e.jsx("a",{className:"font-semibold underline",target:"_blank",href:`${i}/admin/files`,children:c})}})})]}),confirm:e.jsx(a,{message:"Remove"})})}function $e(){return D.get("uploads/server-max-file-size").then(s=>s.data)}function Te(){return Y({queryKey:["MaxServerUploadSize"],queryFn:()=>$e()})}function Ae({children:s,...t}){const{field:{onChange:i,onBlur:n,value:o=[],ref:r},fieldState:{invalid:c,error:d}}=Z({name:t.name}),H=w.useMemo(()=>{const N=o;return typeof N=="string"?JSON.parse(N):N},[o]),L={onChange:i,onBlur:n,value:H,invalid:c,errorMessage:d==null?void 0:d.message};return e.jsx(ue,{valueKey:"name",ref:r,...ee(L,t),children:s})}const Ue=0x630000000000,G=se.forwardRef(({name:s,...t},i)=>e.jsx(l,{name:s,...t,ref:i,min:1,max:Ue,type:"number",endAdornment:e.jsx("span",{className:"mr-12 text-xs text-muted",children:e.jsx(a,{message:"Bytes"})})}));function Ve(){const{data:s}=h(),t=x(),i=b({name:"client.uploading.backends"})??[];return e.jsxs(w.Fragment,{children:[e.jsxs(V,{margin:"mt-44 mb-12",size:"lg",children:[e.jsx(a,{message:"Upload types"}),e.jsx(a,{message:"Configure storage backends and file restrictions for different upload types across the site."})]}),e.jsx("div",{className:"space-y-12",children:Object.entries(s.uploading.types).map(([n,o])=>e.jsxs(C,{type:"modal",onClose:r=>{r&&t.setValue(`client.uploading.types.${n}`,r,{shouldValidate:!0,shouldDirty:!0})},children:[e.jsxs("div",{role:"button",tabIndex:0,className:"flex cursor-pointer items-center rounded-panel border p-16 transition-button hover:bg-hover",children:[e.jsxs("div",{children:[e.jsx("div",{className:"pb-2 text-sm font-semibold",children:e.jsx(a,{message:o.label})}),e.jsx("div",{className:"text-xs text-muted",children:e.jsx(a,{message:o.description})})]}),e.jsx(ae,{className:"ml-auto text-muted",size:"sm"})]}),e.jsx(qe,{name:n,availableBackends:i})]},n))})]})}function qe({name:s,availableBackends:t}){const{formId:i,close:n}=g(),o=b({name:`client.uploading.types.${s}`}),r=j({defaultValues:o});return e.jsxs(y,{size:"lg",children:[e.jsx(v,{children:e.jsx(a,{message:"Update upload type"})}),e.jsx(k,{children:e.jsxs(S,{form:r,id:i,onSubmit:c=>n(c),className:"space-y-20",children:[e.jsx(Be,{availableBackends:t}),e.jsx(l,{name:"root",label:e.jsx(a,{message:"Folder"}),descriptionPosition:"top",description:e.jsx(a,{message:"Where in the backend should the uploads be stored. Leave empty to use default folder."})}),e.jsx(Me,{}),e.jsx(Re,{})]})}),e.jsxs(z,{children:[e.jsx(p,{onClick:()=>n(),children:e.jsx(a,{message:"Cancel"})}),e.jsx(p,{type:"submit",variant:"flat",color:"primary",form:i,children:e.jsx(a,{message:"Update"})})]})]})}function Be({availableBackends:s}){return e.jsx(pe,{required:!0,label:e.jsx(a,{message:"Storage backends"}),name:"backends",suggestions:s,valueKey:"id",displayWith:t=>{var i;return(i=s==null?void 0:s.find(n=>n.id===t.id))==null?void 0:i.name},description:e.jsx(a,{message:"Select in which backend(s) these uploads should be stored."}),children:t=>e.jsx(m,{value:t.id,children:t.name},t.id)})}function Me(){return e.jsx(G,{min:1,descriptionPosition:"top",label:e.jsx(a,{message:"Maximum file size"}),name:"max_file_size",description:e.jsx(a,{message:"Size (in bytes) for a single file user can upload."})})}function Re(){const{trans:s}=_();return e.jsxs(Ae,{name:"accept",placeholder:s(u("Select or enter a type...")),label:e.jsx(a,{message:"Allowed file types"}),descriptionPosition:"top",allowCustomValue:!0,description:e.jsx(a,{message:"Extension, mime type or file type. Leave empty to use defaults."}),children:[e.jsx(m,{value:"image",children:e.jsx(a,{message:"Image"})}),e.jsx(m,{value:"video",children:e.jsx(a,{message:"Video"})}),e.jsx(m,{value:"audio",children:e.jsx(a,{message:"Audio"})}),e.jsx(m,{value:".png",children:e.jsx(a,{message:"PNG"})}),e.jsx(m,{value:".jpeg",children:e.jsx(a,{message:"JPG"})}),e.jsx(m,{value:".gif",children:e.jsx(a,{message:"GIF"})}),e.jsx(m,{value:".mp3",children:e.jsx(a,{message:"MP3"})}),e.jsx(m,{value:".mp4",children:e.jsx(a,{message:"MP4"})})]})}function Ms(){const{data:s}=h(),t=j({defaultValues:{client:{uploading:s.client.uploading??{}},server:{static_file_delivery:s.server.static_file_delivery??""}}});return e.jsxs(ie,{form:t,title:e.jsx(a,{message:"Uploading"}),docsLink:F.settings.uploading,children:[e.jsx(De,{}),e.jsx(Ve,{}),e.jsx(Pe,{})]})}function Pe(){return e.jsxs("div",{children:[e.jsxs(V,{margin:"mt-44 mb-12",size:"lg",children:[e.jsx(a,{message:"Global settings"}),e.jsx(a,{message:"Settings that will apply to all upload types and backends."})]}),e.jsx(Ee,{}),e.jsx(Ge,{})]})}function Ee(){return e.jsx(q,{className:"mb-24",title:e.jsx(a,{message:"File preview optimization (local backend only)"}),description:e.jsx(a,{message:"Integrate with X-Sendfile or X-Accel on the server to improve file preview performance."}),children:e.jsx(te,{name:"static_delivery_group",separatorBottom:!1,separatorTop:!1,children:s=>e.jsxs(B,{invalid:s,size:"sm",name:"server.static_file_delivery",children:[e.jsx(m,{value:"",children:e.jsx(a,{message:"None"})}),e.jsx(m,{value:"xsendfile",children:e.jsx(a,{message:"X-Sendfile (Apache)"})}),e.jsx(m,{value:"xaccel",children:e.jsx(a,{message:"X-Accel (Nginx)"})})]})})})}function Ge(){const{data:s}=Te();return e.jsxs(q,{className:"mb-24",title:e.jsx(a,{message:"Chunk Size"}),description:e.jsx(a,{message:"Upload larger files in specified size chunks to improve upload speed and allow resumable uploads."}),children:[e.jsx(G,{size:"sm",name:"client.uploading.chunk_size"}),e.jsx(M,{className:"mt-12",color:"warning",size:"sm",description:e.jsx(a,{message:"Maximum upload size on your server currently is set to <b>:size</b>",values:{size:s==null?void 0:s.maxSize,b:t=>e.jsx("b",{children:t})}})})]})}export{Ms as Component};
