import{j as e,v as C,d as y,aG as K,T as b,a8 as O,W as T,al as $,r as m,K as B,ce as z,Y as F,cf as S,y as Q}from"./main-CUJEGI8U.js";import{A as _}from"./album-C9ItuPVf.js";import{A as U}from"./album-grid-item-gFm1NFxn.js";import{A as H}from"./artist-C2fP4kQS.js";import{A as W}from"./artist-grid-item-DuZ7UhTD.js";import{G as V}from"./genre-B_3ZyEC1.js";import{u as Y}from"./genre-image-BDzwDh4k.js";import{g as J}from"./genre-link-DnbOgUf-.js";import{P as X}from"./playlist-BqUIfvab.js";import{b as Z}from"./playlist-context-dialog-DH_eECE6.js";import{T as g}from"./track-BCLqLBLk.js";import{T as tt}from"./track-grid-item-0f2uF-Sf.js";import{U as et,u as nt}from"./user-grid-item-CTdxZxQk.js";import{U as rt}from"./user-D6GCMJ6c.js";import{u as it,g as ot}from"./use-should-show-radio-button-CEtJUckB.js";import{K as G}from"./KeyboardArrowRight-CjTKdvdU.js";import{C as v}from"./content-grid-hmapBiIW.js";import{f as st}from"./index-C-eCv2z-.js";import{u as N,P as f,a as at}from"./use-channel-CT18zEfV.js";import{I as mt}from"./infinite-scroll-sentinel-Br7e5Kqx.js";import{A}from"./album-list-0Nh0E9IJ.js";import{T as E}from"./track-list-Ybrg_2qr.js";import{V as ct}from"./virtual-table-body-DQGnEfcL.js";import{T as R}from"./track-table-CY1bAvY-.js";import{C as lt}from"./channel-CQzLS58I.js";import{P as ut}from"./player-page-header-gradient-B98PHS1w.js";import{P as dt}from"./player-page-suspsense-nQjKTdHX.js";import{A as k}from"./ad-host-3MKQnMjM.js";import{P as pt}from"./page-meta-tags-CEAowLoU.js";import"./entitiy-offline-indicator-icon-B5v2rY9X.js";import"./share-media-button-Dw3JV4C-.js";import"./offline-media-items-Dlxt2ETB.js";import"./extension-from-filename-O0XMuZye.js";import"./play-arrow-filled-BrHo1wfG.js";import"./use-player-store-BWFGgN3k.js";import"./is-ctrl-or-shift-pressed-Bx-mqgCW.js";import"./middleware-BLXTWOs6.js";import"./traditional-BcYcLesO.js";import"./Pause-B4fj-x54.js";import"./create-playlist-dialog-DeyZkjsM.js";import"./image-selector-GLpYAkj6.js";import"./file-upload-provider-DWaB2xE4.js";import"./uploaded-file-ksxfN_l-.js";import"./pretty-bytes-bO14ePu9.js";import"./use-active-upload-BwzDBsep.js";import"./open-upload-window-CboR35vP.js";import"./AddAPhoto-y5pGVyq2.js";import"./file-input-config-DrcTpI3-.js";import"./switch-4KDjemPX.js";import"./Image-DWFqsH18.js";import"./dialog-footer-jZcc-BBM.js";import"./use-auth-click-capture-B9wu-BP4.js";import"./Add-B3RL66ee.js";import"./FavoriteBorder-D1CUmnAo.js";import"./use-previous-BgqS7ski.js";import"./album-image-CkUJpPZs.js";import"./Album-pwm22nnR.js";import"./album-link-DwfnHHp7.js";import"./small-artist-image-BqXmK0zy.js";import"./Mic-DAPkQZuC.js";import"./artist-link-XkkvBaYk.js";import"./playlist-image-zogte8rn.js";import"./PlaylistPlay-DcgxbGJx.js";import"./playlist-link-CLw6NzkW.js";import"./share-media-buttons-DtF-m4-I.js";import"./Share-C8wHCu8Q.js";import"./track-image-B3DSRXTB.js";import"./MusicNote-SjrQa4Nt.js";import"./track-link-D8mIwI0F.js";import"./tabs-BVjOaE7L.js";import"./tab-panels-BNEb_18b.js";import"./use-clipboard-CQvDhy4G.js";import"./check-circle-filled-BwqtgJPU.js";import"./album-context-dialog-C5eIuCxr.js";import"./add-to-queue-menu-button-AYv4MHMe.js";import"./use-delete-album-VPJfiJbG.js";import"./use-album-permissions-_OgAnUnz.js";import"./artist-links-YW81uP4U.js";import"./toggle-in-library-menu-button-CqmQ1GOD.js";import"./toggle-repost-menu-button-DAsBpr-F.js";import"./confirmation-dialog-DVMbD2S1.js";import"./like-icon-button-ppQBH-Cs.js";import"./playable-grid-item-Cb5d38jQ.js";import"./MoreHoriz-RUUnngeG.js";import"./artist-context-dialog-8LB7e1RZ.js";import"./use-artist-permissions-BSDv3a1p.js";import"./update-playlist-dialog-D3q_Y3lO.js";import"./track-context-dialog-DU1dwrB2.js";import"./use-track-permissions-ChTh4jJA.js";import"./download-file-from-url-BVaKcxRP.js";import"./infiniteQueryObserver-CQEL_EnT.js";import"./user-image-CEN5XkJA.js";import"./Star-CDg8HN-f.js";import"./getScrollParent--OCc5gFh.js";import"./formatted-number-gsF1qEbc.js";import"./FirstPage-Cg09yWCI.js";import"./useSuspenseQuery-13TuSADp.js";import"./album-list-item-DE1HgISW.js";import"./track-list-item-CzKF7uNf.js";import"./waveform-O_aCNRMS.js";import"./comment-bar-new-comment-form-CyGo8E79.js";import"./Repeat-DTFydNM6.js";import"./useInteractOutside-BFJZ3Z5N.js";import"./useEffectEvent-pADbdn7r.js";import"./use-slider-B78Jo8sh.js";import"./useGlobalListeners-BeXr-yG1.js";import"./use-pointer-events-DcvSqvAc.js";import"./generate-waveform-data-BFwf5N3g.js";import"./formatted-duration-2_MIaPa4.js";import"./use-current-date-time-BhbL04rR.js";import"./slider-BDqMUq69.js";import"./table-CgoYghfp.js";import"./checkbox-suk8vW77.js";import"./CheckBoxOutlineBlank-BgWeDdny.js";import"./skeleton-BmWW5Jc-.js";import"./ArrowDownward-BHYKFIfy.js";import"./index-B5ww1iWt.js";import"./MoreVert-BiULonS7.js";import"./Schedule-D2nn-qO3.js";import"./TrendingUp-hWFiGDg8.js";import"./default-meta-tags-Cim_8kSD.js";function ft({genre:t,layout:r}){const i=Y(t);return e.jsxs(C,{to:J(t),className:y("relative isolate flex h-120 items-center justify-center overflow-hidden rounded-panel bg-chip p-12 text-xl font-semibold capitalize",r==="compact"?"h-88 my-10":"h-120"),children:[t.image?e.jsx("img",{src:t.image,alt:"",className:"absolute inset-0 z-10 h-full w-full object-cover"}):null,e.jsx("div",{className:"absolute inset-0 z-20 h-full w-full",style:{backgroundColor:i,opacity:t.image?.9:1}}),e.jsx("div",{className:"relative z-30 text-center text-white",children:t.display_name||t.name})]})}function P({item:t,items:r,layout:i}){switch(t.model_type){case H:return e.jsx(W,{artist:t,layout:i});case _:return e.jsx(U,{album:t,layout:i});case V:return e.jsx(ft,{genre:t,layout:i});case g:return e.jsx(tt,{track:t,newQueue:r,layout:i});case X:return e.jsx(Z,{playlist:t,layout:i});case rt:return e.jsx(et,{user:t,layout:i});default:return null}}const xt=K(e.jsx("path",{d:"M12 7.5c.69 0 1.27.23 1.76.7s.74 1.07.74 1.8c0 1.05-.5 1.81-1.5 2.28V21h-2v-8.72c-1-.47-1.5-1.23-1.5-2.28 0-.73.26-1.33.74-1.8s1.07-.7 1.76-.7m4.69-2.2c1.25 1.25 1.92 2.81 2.01 4.7 0 1.8-.67 3.38-2.01 4.72L15.5 13.5c1-.91 1.5-2.08 1.5-3.5 0-1.33-.5-2.5-1.5-3.5l1.19-1.2M6.09 4.08C4.5 5.67 3.7 7.64 3.7 10s.8 4.3 2.39 5.89l-1.17 1.22C3 15.08 2 12.7 2 10s1-5.06 2.92-7.09l1.17 1.17m12.99-1.17C21 4.94 22 7.3 22 10c0 2.8-1 5.17-2.92 7.11l-1.17-1.22C19.5 14.3 20.3 12.33 20.3 10s-.8-4.33-2.39-5.92l1.17-1.17M7.31 5.3L8.5 6.5C7.5 7.42 7 8.58 7 10c0 1.33.5 2.5 1.5 3.5l-1.19 1.22C5.97 13.38 5.3 11.8 5.3 10c0-1.8.67-3.36 2.01-4.7z"}),"Radio");function j({channel:t,isNested:r,margin:i=r?"mb-16 md:mb-20":"mb-20 md:mb-40"}){var n;const o=it();return t.config.hideTitle?null:r?e.jsxs("div",{className:y("flex items-center gap-4 text-xl",i),children:[e.jsx(gt,{channel:t}),e.jsx(G,{className:"mt-4"})]}):o&&((n=t.restriction)==null?void 0:n.model_type)==="genre"?e.jsxs("div",{className:y("flex items-center justify-between gap-24",i),children:[e.jsx("h1",{className:"flex-auto text-3xl",children:e.jsx(b,{message:t.name})}),e.jsx(O,{label:e.jsx(b,{message:"Genre radio"}),children:e.jsx(T,{className:"flex-shrink-0",elementType:C,to:ot(t.restriction),children:e.jsx(xt,{})})})]}):e.jsx("h1",{className:y("text-3xl",i),children:e.jsx(b,{message:t.name})})}function gt({channel:t}){const{restriction:r}=$();return e.jsx(C,{className:"outline-none hover:underline focus-visible:underline",to:t.config.restriction==="genre"&&r?`/${t.slug}/${r}`:`/${t.slug}`,children:e.jsx(b,{message:t.name})})}function jt(t){var x;const{channel:r,layout:i}=t,o=m.useRef(null),n=m.useRef(0),[c,a]=m.useState(!1),[l,u]=m.useState(!0),d=m.useCallback(()=>{const s=o.current;s&&n.current&&(a(s.scrollLeft>0),u(s.scrollWidth-s.scrollLeft!==s.clientWidth))},[]);m.useEffect(()=>{const s=o.current,p=st(()=>d(),100);return s&&s.addEventListener("scroll",p),()=>s==null?void 0:s.removeEventListener("scroll",p)},[d]);const h=()=>n.current*2;return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-14 flex items-center justify-between gap-24",children:[e.jsx(j,{...t,margin:"mb-4"}),e.jsxs("div",{children:[e.jsx(T,{disabled:!c,onClick:()=>{o.current&&o.current.scrollBy({left:-h()})},children:e.jsx(B,{})}),e.jsx(T,{disabled:!l,onClick:()=>{o.current&&o.current.scrollBy({left:h()})},children:e.jsx(G,{})})]})]}),e.jsx(v,{layout:i,isCarousel:!0,contentModel:r.config.contentModel,containerRef:s=>{if(s){o.current=s;const p=s.children.item(0),L=new ResizeObserver(D=>{n.current=D[0].contentRect.width,d()});return p&&L.observe(p),()=>(o.current=null,L.unobserve(s))}},children:(x=r.content)==null?void 0:x.data.map(s=>{var p;return e.jsx(P,{layout:i,item:s,items:(p=r.content)==null?void 0:p.data},`${s.id}-${s.model_type}`)})})]})}function I(t){var a;const r=z(),i=F.showInfinite(t.id,"channelPage",r),o=m.useRef(S(i.queryKey)).current,n=nt({...i,placeholderData:Q,initialData:()=>{if(!(!t.content||S(i.queryKey)!==o))return{pageParams:[void 0,1],pages:[{channel:t}]}}}),c=m.useMemo(()=>{var l;return(l=n.data)!=null&&l.pages?n.data.pages.reduce((u,d)=>{var x,s;const h=((s=(x=d.channel)==null?void 0:x.content)==null?void 0:s.data)??[];return[...u,...h]},[]):[]},[(a=n.data)==null?void 0:a.pages]);return{query:n,items:c}}function ht(t){const r=!t.isNested&&(!t.channel.config.paginationType||t.channel.config.paginationType==="infiniteScroll");return e.jsxs(m.Fragment,{children:[e.jsx(j,{...t}),r?e.jsx(bt,{...t}):e.jsx(yt,{isCarousel:t.isCarousel,...t})]})}function yt({channel:t,isNested:r,layout:i,isCarousel:o}){var l,u;const n=!r,{query:c}=N(t,"channelPage"),a=(u=(l=c.data)==null?void 0:l.channel)==null?void 0:u.content;return e.jsxs("div",{children:[n&&e.jsx(f,{pagination:a,type:t.config.paginationType,className:"mb-24"}),e.jsx(v,{layout:i,isCarousel:o,contentModel:t.config.contentModel,children:a==null?void 0:a.data.map(d=>e.jsx(P,{layout:i,item:d,items:a==null?void 0:a.data},`${d.id}-${d.model_type}`))}),n&&e.jsx(f,{pagination:a,type:t.config.paginationType,className:"mt-24",scrollToTop:!0})]})}function bt({channel:t,layout:r}){const{query:i,items:o}=I(t);return e.jsxs("div",{children:[e.jsx(v,{layout:r,contentModel:t.config.contentModel,children:o.map(n=>e.jsx(P,{layout:r,item:n,items:o},`${n.id}-${n.model_type}`))}),e.jsx(mt,{query:i})]})}function M(t){const r=!t.isNested&&(!t.channel.config.paginationType||t.channel.config.paginationType==="infiniteScroll");return e.jsxs(m.Fragment,{children:[e.jsx(j,{...t}),r?e.jsx(Tt,{...t}):e.jsx(Ct,{...t})]})}function Tt({channel:t}){const{query:r,items:i}=I(t),o=t.content&&"total"in t.content?t.content.total:void 0;return t.config.contentModel===g?e.jsx(E,{query:r,tracks:i,totalTracks:o}):e.jsx(A,{query:r,albums:i})}function Ct({channel:t,isNested:r}){var l,u;const i=!r,{query:o}=N(t,"channelPage"),n=(u=(l=o.data)==null?void 0:l.channel)==null?void 0:u.content,c=(n==null?void 0:n.data)||[],a=t.config.contentModel===g?e.jsx(E,{tracks:c,totalTracks:c.length}):e.jsx(A,{albums:c});return e.jsxs("div",{children:[i&&e.jsx(f,{pagination:n,type:t.config.paginationType,className:"mb-24"}),a,i&&e.jsx(f,{pagination:n,type:t.config.paginationType,className:"mt-24",scrollToTop:!0})]})}function vt(t){const r=!t.isNested&&(!t.channel.config.paginationType||t.channel.config.paginationType==="infiniteScroll");return e.jsxs(m.Fragment,{children:[e.jsx(j,{...t}),r?e.jsx(Pt,{...t}):e.jsx(Nt,{...t})]})}function Nt({channel:t,isNested:r}){var c,a;const i=!r,{query:o}=N(t,"channelPage"),n=(a=(c=o.data)==null?void 0:c.channel)==null?void 0:a.content;return e.jsxs("div",{children:[i&&e.jsx(f,{pagination:n,type:t.config.paginationType,className:"mb-24"}),e.jsx(R,{tracks:(n==null?void 0:n.data)||[],enableSorting:!1}),i&&e.jsx(f,{pagination:n,type:t.config.paginationType,className:"mt-24",scrollToTop:!0})]})}function Pt({channel:t}){const{query:r,items:i}=I(t),o=t.content&&"total"in t.content?t.content.total:void 0;return e.jsx(R,{enableSorting:!1,tracks:i,tableBody:e.jsx(ct,{query:r,totalItems:o})})}function w(t){const{channel:r,isNested:i}=t,o=r.config.contentModel,n=i?r.config.nestedLayout:r.config.layout;return r.content?o===g&&n==="list"?e.jsx(M,{...t}):o===_&&n==="list"?e.jsx(M,{...t}):o===g&&n==="trackTable"?e.jsx(vt,{...t}):o===lt?e.jsx(It,{...t}):n==="carousel"||n==="compactGrid"?e.jsx(jt,{layout:n==="compactGrid"?"compact":void 0,...t}):e.jsx(ht,{...t}):null}function It({channel:t}){var r;return e.jsxs(m.Fragment,{children:[e.jsx(j,{channel:t}),(r=t.content)==null?void 0:r.data.map(i=>e.jsx("div",{className:"mb-50",children:e.jsx(w,{channel:i,isNested:!0})},i.id))]})}function Bn({slugOrId:t}){return e.jsx(dt,{children:e.jsx(Lt,{slugOrId:t})})}function Lt({slugOrId:t}){const r=at(t,"channelPage"),i=m.useMemo(()=>q(r.data.channel),[r.data.channel]);return e.jsxs(e.Fragment,{children:[e.jsx(pt,{query:r}),i?e.jsx(ut,{image:i,height:"h-[20vh]"}):null,e.jsxs("div",{className:"relative pb-24",children:[e.jsx(k,{slot:"general_top",className:"mb-34"}),e.jsx(w,{channel:r.data.channel},r.data.channel.id),e.jsx(k,{slot:"general_bottom",className:"mt-34"})]})]})}function q(t){var i,o;const r=((i=t.content)==null?void 0:i.data)??[];for(const n of r){if(n.model_type==="channel")return q(n);if(n.model_type==="artist"&&n.image_small)return n.image_small;if(n.model_type==="album"&&n.image)return n.image;if(n.model_type==="track"&&n.image){if(n.image)return n.image;if((o=n.album)!=null&&o.image)return n.album.image}if(n.model_type==="genre"&&n.image||n.model_type==="playlist"&&n.image||n.model_type==="user"&&n.image)return n.image}}export{Bn as Component};
