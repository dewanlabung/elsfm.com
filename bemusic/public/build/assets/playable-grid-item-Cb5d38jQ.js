import{j as e,r as n,d as i,D as v,W as f,ae as N}from"./main-CUJEGI8U.js";import{q as x,P as j}from"./share-media-button-Dw3JV4C-.js";import{T as b}from"./track-BCLqLBLk.js";import{u as h}from"./use-player-store-BWFGgN3k.js";import{M as g}from"./MoreHoriz-RUUnngeG.js";function M(t){return t.layout==="compact"?e.jsx(z,{...t}):e.jsx(I,{...t})}function I({image:t,title:c,subtitle:d,model:l,newQueue:u,link:m,likeButton:o,contextDialog:r,radius:s="rounded-panel"}){const p=N();return e.jsxs("div",{className:"snap-start snap-normal",children:[e.jsxs(v,{type:"popover",placement:"bottom-start",mobileType:"tray",triggerOnContextMenu:!0,children:[e.jsxs("div",{className:"group relative isolate w-full",children:[e.jsx("div",{className:"this aspect-square w-full",onClick:()=>p(m),children:n.cloneElement(t,{size:"w-full h-full",className:`${s} shadow-md z-10`})}),e.jsx("div",{className:`absolute left-0 top-0 h-full w-full bg-gradient-to-b from-transparent to-black/75 ${s} pointer-events-none z-20 opacity-0 transition-opacity duration-300 group-hover:opacity-100`},"bg-overlay"),e.jsxs("div",{className:i("absolute bottom-0 left-0 z-30 flex w-full items-center gap-14 p-12",s==="rounded-full"&&"pointer-events-none right-0 top-0 justify-center"),children:[e.jsx(j,{size:s==="rounded-full"?"lg":"md",radius:"rounded-full",className:i("pointer-events-auto shadow-md",s==="rounded-full"&&"invisible group-hover:visible"),variant:"flat",color:"white",buttonType:"icon",track:l.model_type===b?l:void 0,tracks:u,queueId:x(l)}),s!=="rounded-full"&&e.jsxs(v,{type:"popover",mobileType:"tray",children:[e.jsx(f,{className:"invisible md:group-hover:visible",color:"white",children:e.jsx(g,{})}),r]}),s!=="rounded-full"&&o&&n.cloneElement(o,{className:"invisible md:group-hover:visible ml-auto",size:"md",color:"white"})]})]}),r]}),e.jsxs("div",{className:i(s==="rounded-full"&&"text-center","mt-12 text-sm"),children:[e.jsx("div",{className:"line-clamp-2 overflow-ellipsis",children:c}),e.jsx("div",{className:"mt-4 overflow-hidden overflow-ellipsis whitespace-nowrap text-muted",children:d})]})]})}function z({image:t,title:c,subtitle:d,model:l,newQueue:u,contextDialog:m}){const o=x(l),[r,s]=n.useState(!1),p=h(a=>a.isPlaying),w=h(a=>!!(a.cuedMedia&&a.cuedMedia.groupId===o)),y=p&&w;return e.jsxs("div",{className:"flex snap-start snap-normal items-center gap-16 border-t py-10",children:[e.jsxs("div",{className:"group relative h-42 w-42 flex-shrink-0 cursor-pointer overflow-hidden rounded-md",onPointerEnter:()=>s(!0),onPointerLeave:()=>s(!1),children:[n.cloneElement(t,{size:"w-full h-full",className:"shadow-md z-10"}),e.jsx("div",{className:i("absolute bottom-0 left-0 right-0 top-0 bg-black/50",r||y?"block":"hidden"),children:e.jsx(j,{buttonType:"icon",track:l.model_type===b?l:void 0,tracks:u,queueId:o,color:"white",equalizerColor:"white",radius:"rounded-none"})})]}),e.jsxs("div",{className:"overflow-hidden overflow-ellipsis text-sm",children:[e.jsx("div",{className:"whitespace-nowrap",children:c}),e.jsx("div",{className:"whitespace-nowrap text-muted",children:d})]}),e.jsxs(v,{type:"popover",mobileType:"tray",children:[e.jsx(f,{size:"sm",className:"ml-auto",children:e.jsx(g,{})}),m]})]})}export{M as P};
