const D=1240,E=45;function _(o){const s=new window.AudioContext;return new Promise((e,n)=>{const t=document.createElement("canvas"),c=t.getContext("2d");if(!c){n();return}t.width=1240,t.height=45;const u=new FileReader;u.onload=l=>{var A;const a=(A=l.target)==null?void 0:A.result;a?s.decodeAudioData(a,r=>{const H=W(r,c);e(H)},()=>e(null)):n()},u.readAsArrayBuffer(o)})}function W(o,s){const e=[],n=o.getChannelData(0),t=1240,c=Math.floor(n.length/t),u=45,l=[];for(let a=0;a<t;a+=3)l.push(f(a*c,c,n)*1e4);for(let a=0;a<t;a+=3){const A=u/Math.max(...l);let r=f(a*c,c,n)*1e4;r*=A,r+=1,e.push(i(a,r))}return s.clearRect(0,0,1240,45),e}function f(o,s,e){let n=0;for(let t=o;t<=o+s-1;t++)n+=Math.pow(e[t],2);return Math.sqrt(n/e.length)}function i(o,s){let e=3;e*=Math.abs(1-.5);const n=o+e/2,t=45-s;return[n,t,e,s]}export{D as W,E as a,_ as g};
