import{j as e,r as d,T as p,n as P,d as c,A as E,o as b,p as y,R as h,q as k,S as z,t as N,v as w,O as A}from"./main-CUJEGI8U.js";import{T as B}from"./TrendingUp-hWFiGDg8.js";import{T as I,a as O}from"./TrendingFlat-BPIMWdQY.js";import{F as R}from"./formatted-number-gsF1qEbc.js";import{F as V}from"./formatted-bytes-D84zpjBD.js";import{S as H}from"./skeleton-BmWW5Jc-.js";import{F as L}from"./formatted-duration-2_MIaPa4.js";import{R as M}from"./report-date-selector-D_2CHJ1I.js";import{u as q}from"./use-admin-report-BK6Lnk_R.js";import{D as G}from"./datatable-page-with-header-layout-C4e5sJMc.js";import{D as U}from"./use-date-range-picker-state-CSWp3d1-.js";import"./pretty-bytes-bO14ePu9.js";import"./use-current-date-time-BhbL04rR.js";import"./formatted-date-DzIPJwiH.js";import"./use-date-formatter-m8TmZzOM.js";import"./DateFormatter-Dix9bfnP.js";import"./DateRange-Bhvye4F9.js";import"./dashboard-layout-context-DeTNv3yG.js";import"./list-C96mDrnJ.js";import"./switch-4KDjemPX.js";import"./ArrowRightAlt-iO8zeT1U.js";import"./dialog-footer-jZcc-BBM.js";import"./is-tablet-media-query-DhMPnSWn.js";import"./use-base-date-picker-state-DaWG2IMs.js";import"./input-DAWJLQiY.js";import"./KeyboardArrowRight-CjTKdvdU.js";function W({report:t,isLoading:s}){return t?e.jsx(d.Fragment,{children:t==null?void 0:t.map(r=>e.jsx(C,{icon:r.icon,type:r.type,currentValue:r.currentValue,previousValue:r.previousValue,percentageChange:r.percentageChange,isLoading:s,children:e.jsx(p,{message:r.name})},r.name))}):e.jsx("div",{className:"col-span-12 row-span-3"})}function C({icon:t,children:s,type:r,currentValue:n,previousValue:l,percentageChange:f,isLoading:m=!1,colSpan:o="col-span-3",rowSpan:j="row-span-3"}){let u;if(t)if(d.isValidElement(t))u=d.cloneElement(t,{size:"sm"});else{const v=P(t);u=v?e.jsx(v,{size:"sm"}):null}return e.jsxs("div",{className:c("compact-scrollbar flex flex-col justify-between overflow-x-auto overflow-y-hidden whitespace-nowrap rounded-panel border px-20 py-14",o,j),children:[e.jsxs("div",{className:"flex items-center gap-6",children:[u,e.jsx("h2",{className:"text-sm font-semibold",children:s})]}),e.jsxs("div",{className:"flex gap-10",children:[e.jsx("div",{className:"text-4xl font-medium text-main",children:e.jsx(E,{initial:!1,mode:"wait",children:m?e.jsx(b.div,{...y,children:e.jsx(H,{className:"min-w-40"})},"skeleton"):e.jsx(b.div,{...y,children:e.jsx(J,{type:r,value:n})},"value")})}),n!=null&&(f!=null||l!=null)&&e.jsx("div",{className:"flex items-center gap-10",children:e.jsx(K,{currentValue:n,previousValue:l,percentageChange:f})})]})]})}function J({type:t,value:s}){if(s==null)return"â€”";switch(t){case"fileSize":return e.jsx(V,{bytes:s});case"percentage":return e.jsx(R,{value:s,style:"percent",maximumFractionDigits:1});case"durationInSeconds":return e.jsx(L,{seconds:s,verbose:!0});default:return e.jsx(R,{value:s})}}function K(t){const s=Q(t);let r;return s>0?r=e.jsx(B,{size:"md",className:"text-positive"}):s===0?r=e.jsx(I,{className:"text-muted"}):r=e.jsx(O,{className:"text-danger"}),e.jsxs(d.Fragment,{children:[r,e.jsxs("div",{className:"text-sm font-semibold text-muted",children:[s,"%"]})]})}function Q({percentageChange:t,previousValue:s,currentValue:r}){return t!=null||s==null||r==null?t??0:s===0?100:Math.round((r-s)/s*100)}function X({children:t,color:s,variant:r,radius:n="rounded-button",size:l,className:f,value:m,onChange:o,multiple:j,disabled:u}){const v=a=>m===void 0?!1:j?m.includes(a):a===m,F=a=>{const x=[...m],i=m.indexOf(a);return i>-1?x.splice(i,1):x.push(a),x},T=h.Children.map(t,(a,x)=>{if(h.isValidElement(a)){const i=a.props,g=v(i.value),S=g?"primary":s;return h.cloneElement(a,{color:g?"primary":s,variant:r,size:l,radius:null,disabled:i.disabled||u,...i,onClick:D=>{i.onClick&&i.onClick(D),o&&(j?o==null||o(F(i.value)):o==null||o(i.value))},className:c(i.className,g?"z-20":"z-10",Y(x,t,n,S))})}});return e.jsx("div",{className:c(n,"isolate inline-flex",f),children:T})}function Y(t,s,r,n){return t===0?c(r,"rounded-tr-none rounded-br-none",!n&&"border-r-transparent disabled:border-r-transparent"):t===s.length-1?c(r,"rounded-tl-none rounded-bl-none -ml-1"):c("rounded-none -ml-1",!n&&"border-r-transparent disabled:border-r-transparent")}function Re(){const[t,s]=d.useState(()=>U[2].getRangeValue()),{pathname:r}=k(),n=r.endsWith("visitors")?"visitors":"plays",l=n==="visitors"?e.jsx(p,{message:"Visitors report"}):e.jsx(p,{message:"Plays report"});return e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx(z,{children:l}),e.jsx(G,{showSidebarToggleButton:!0,title:l,rightContent:e.jsxs(d.Fragment,{children:[e.jsxs(X,{variant:"outline",value:n,children:[e.jsx(N,{value:"plays",elementType:w,to:"plays",children:e.jsx(p,{message:"Plays"})}),e.jsx(N,{value:"visitors",elementType:w,to:"visitors",children:e.jsx(p,{message:"Visitors"})})]}),e.jsx(M,{value:t,onChange:s})]})}),e.jsxs("div",{className:"flex-auto overflow-auto p-12 md:p-24",children:[e.jsx(Z,{dateRange:t}),e.jsx(A,{context:{dateRange:t,setDateRange:s}})]})]})}function Z({dateRange:t}){const{data:s}=q({types:["header"],dateRange:t});return e.jsx("div",{className:"chart-grid mb-20",children:e.jsx(W,{report:s==null?void 0:s.headerReport})})}export{Re as Component};
