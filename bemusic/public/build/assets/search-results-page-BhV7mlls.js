import{al as c,j as t,r as x,ae as N,z as S,aN as P,ar as k,J as O,at as M,ai as y,T as r,ao as T,v as m,O as q,u as F}from"./main-CUJEGI8U.js";import{P as I}from"./player-page-suspsense-nQjKTdHX.js";import{searchResultsTabNames as R}from"./search-results-tab-cqmdbk8_.js";import{u as w}from"./useSuspenseQuery-13TuSADp.js";import{T as z,a as A,b as p}from"./tabs-BVjOaE7L.js";import{f as $}from"./index-C-eCv2z-.js";import"./album-C9ItuPVf.js";import"./album-grid-item-gFm1NFxn.js";import"./entitiy-offline-indicator-icon-B5v2rY9X.js";import"./share-media-button-Dw3JV4C-.js";import"./offline-media-items-Dlxt2ETB.js";import"./extension-from-filename-O0XMuZye.js";import"./play-arrow-filled-BrHo1wfG.js";import"./use-player-store-BWFGgN3k.js";import"./is-ctrl-or-shift-pressed-Bx-mqgCW.js";import"./middleware-BLXTWOs6.js";import"./traditional-BcYcLesO.js";import"./Pause-B4fj-x54.js";import"./create-playlist-dialog-DeyZkjsM.js";import"./image-selector-GLpYAkj6.js";import"./file-upload-provider-DWaB2xE4.js";import"./uploaded-file-ksxfN_l-.js";import"./pretty-bytes-bO14ePu9.js";import"./use-active-upload-BwzDBsep.js";import"./open-upload-window-CboR35vP.js";import"./AddAPhoto-y5pGVyq2.js";import"./file-input-config-DrcTpI3-.js";import"./switch-4KDjemPX.js";import"./Image-DWFqsH18.js";import"./dialog-footer-jZcc-BBM.js";import"./use-auth-click-capture-B9wu-BP4.js";import"./Add-B3RL66ee.js";import"./KeyboardArrowRight-CjTKdvdU.js";import"./FavoriteBorder-D1CUmnAo.js";import"./use-previous-BgqS7ski.js";import"./album-image-CkUJpPZs.js";import"./Album-pwm22nnR.js";import"./album-link-DwfnHHp7.js";import"./small-artist-image-BqXmK0zy.js";import"./Mic-DAPkQZuC.js";import"./artist-link-XkkvBaYk.js";import"./playlist-image-zogte8rn.js";import"./PlaylistPlay-DcgxbGJx.js";import"./playlist-link-CLw6NzkW.js";import"./share-media-buttons-DtF-m4-I.js";import"./Share-C8wHCu8Q.js";import"./track-image-B3DSRXTB.js";import"./MusicNote-SjrQa4Nt.js";import"./track-link-D8mIwI0F.js";import"./tab-panels-BNEb_18b.js";import"./use-clipboard-CQvDhy4G.js";import"./check-circle-filled-BwqtgJPU.js";import"./album-context-dialog-C5eIuCxr.js";import"./add-to-queue-menu-button-AYv4MHMe.js";import"./use-delete-album-VPJfiJbG.js";import"./use-album-permissions-_OgAnUnz.js";import"./artist-links-YW81uP4U.js";import"./toggle-in-library-menu-button-CqmQ1GOD.js";import"./toggle-repost-menu-button-DAsBpr-F.js";import"./confirmation-dialog-DVMbD2S1.js";import"./like-icon-button-ppQBH-Cs.js";import"./playable-grid-item-Cb5d38jQ.js";import"./track-BCLqLBLk.js";import"./MoreHoriz-RUUnngeG.js";import"./artist-C2fP4kQS.js";import"./artist-grid-item-DuZ7UhTD.js";import"./artist-context-dialog-8LB7e1RZ.js";import"./use-artist-permissions-BSDv3a1p.js";import"./use-should-show-radio-button-CEtJUckB.js";import"./content-grid-hmapBiIW.js";import"./genre-B_3ZyEC1.js";import"./playlist-BqUIfvab.js";import"./playlist-context-dialog-DH_eECE6.js";import"./update-playlist-dialog-D3q_Y3lO.js";import"./track-table-CY1bAvY-.js";import"./track-context-dialog-DU1dwrB2.js";import"./use-track-permissions-ChTh4jJA.js";import"./download-file-from-url-BVaKcxRP.js";import"./table-CgoYghfp.js";import"./checkbox-suk8vW77.js";import"./CheckBoxOutlineBlank-BgWeDdny.js";import"./skeleton-BmWW5Jc-.js";import"./ArrowDownward-BHYKFIfy.js";import"./useInteractOutside-BFJZ3Z5N.js";import"./useEffectEvent-pADbdn7r.js";import"./use-pointer-events-DcvSqvAc.js";import"./useGlobalListeners-BeXr-yG1.js";import"./MoreVert-BiULonS7.js";import"./formatted-duration-2_MIaPa4.js";import"./use-current-date-time-BhbL04rR.js";import"./Schedule-D2nn-qO3.js";import"./TrendingUp-hWFiGDg8.js";import"./user-grid-item-CTdxZxQk.js";import"./infiniteQueryObserver-CQEL_EnT.js";import"./user-image-CEN5XkJA.js";import"./Star-CDg8HN-f.js";import"./infinite-scroll-sentinel-Br7e5Kqx.js";import"./use-flat-infinite-query-items-3ilhvvhN.js";import"./use-required-params-Cp5Jywbp.js";import"./getScrollParent--OCc5gFh.js";import"./user-D6GCMJ6c.js";function ze(){const{searchQuery:s}=c();return t.jsxs(x.Fragment,{children:[t.jsx(C,{}),s?t.jsx(I,{resetSuspenseOnNavigate:!1,children:t.jsx(L,{searchQuery:s})}):t.jsx(E,{})]})}function C(){const s=c(),l=N(),{trans:g}=S(),e=P("(max-width: 1024px)"),u=x.useCallback($(o=>l(`/search/${o}`,{replace:!0}),300),[l]);return e?t.jsx(k,{defaultValue:s.searchQuery||"",onChange:o=>u(o.target.value),autoFocus:!0,className:"w-full",size:"lg",placeholder:g(O("Search..."))}):null}function E(){const{branding:s}=F();return t.jsx(y,{className:"mt-40",image:t.jsx(T,{size:"xl"}),imageHeight:"h-auto",imageMargin:"mb-12",title:t.jsx(r,{message:"Search :siteName",values:{siteName:s.site_name}}),description:t.jsx(r,{message:"Find songs, artists, albums, playlists and more."})})}function L({searchQuery:s}){var h,d,j,f,b;const l=c(),e=w(M.search.results("searchPage",s)).data.results;if(!e)throw new Error(`Invalid response from api: ${JSON.stringify(e)}`);const u=l.tabName??"home",o=x.useMemo(()=>R.filter(i=>{var n;return i==="home"||((n=e[i])==null?void 0:n.data.length)}),[e]),v=o.indexOf(u)>-1?o.indexOf(u):0,a=i=>{let n=`/search/${s}`;return i&&(n+=`/${i}`),n};return Object.entries(e).some(([,i])=>i==null?void 0:i.data.length)?t.jsxs(z,{selectedTab:v,children:[t.jsxs(A,{children:[t.jsx(p,{elementType:m,to:a(),children:t.jsx(r,{message:"Top results"})}),(h=e.tracks)!=null&&h.data.length?t.jsx(p,{elementType:m,to:a("tracks"),children:t.jsx(r,{message:"Tracks"})}):null,(d=e.artists)!=null&&d.data.length?t.jsx(p,{elementType:m,to:a("artists"),children:t.jsx(r,{message:"Artists"})}):null,(j=e.albums)!=null&&j.data.length?t.jsx(p,{elementType:m,to:a("albums"),children:t.jsx(r,{message:"Albums"})}):null,(f=e.playlists)!=null&&f.data.length?t.jsx(p,{elementType:m,to:a("playlists"),children:t.jsx(r,{message:"Playlists"})}):null,(b=e.users)!=null&&b.data.length?t.jsx(p,{elementType:m,to:a("users"),children:t.jsx(r,{message:"Profiles"})}):null]}),t.jsx("div",{className:"pt-8",children:t.jsx(q,{context:e})})]}):t.jsx(y,{className:"mt-40",image:t.jsx(T,{size:"xl"}),imageHeight:"h-auto",title:t.jsx(r,{message:"Not results for “:query“",values:{query:s}}),description:t.jsx(r,{message:"Please try a different search query"})})}export{ze as Component};
