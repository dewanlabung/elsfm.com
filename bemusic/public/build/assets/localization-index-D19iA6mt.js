import{af as N,G as f,ag as k,I as b,J as g,bx as x,b as y,z as D,$ as h,M as S,j as e,a0 as v,a1 as w,T as a,a2 as F,as as L,V as T,Q as m,t as d,r as U,ab as A,D as j,a8 as E,W as z,v as C,H,aa as Q,a4 as B,a5 as K,ac as R}from"./main-CUJEGI8U.js";import{a as V,T as W}from"./admin-config-DTFkVWJm.js";import{D as $}from"./settings-links-6v3CjZ6H.js";import{u as G,a as J}from"./update-localization-BQ8pBl04.js";import{u as O,a as _,G as X,D as Y,b as Z,c as ee}from"./use-datatable-query-D9uebfzx.js";import{a as ae,D as se,b as te,c as oe}from"./datatable-page-with-header-layout-C4e5sJMc.js";import{T as ie}from"./table-CgoYghfp.js";import{F as re}from"./file-upload-provider-DWaB2xE4.js";import{F as ne}from"./formatted-date-DzIPJwiH.js";import{M as le}from"./MoreVert-BiULonS7.js";import{C as me}from"./confirmation-dialog-DVMbD2S1.js";import{d as ce}from"./download-file-from-url-BVaKcxRP.js";import{F as de}from"./file-input-config-DrcTpI3-.js";import{o as ue}from"./open-upload-window-CboR35vP.js";import{D as ge}from"./data-table-add-item-button-_qDHIKil.js";import{F as u}from"./select-Z9R0wV6S.js";import{D as P}from"./dialog-footer-jZcc-BBM.js";import{g as I}from"./languages-D8Et6jrs.js";import"./Album-pwm22nnR.js";import"./Comment-vFUyF-gf.js";import"./FileUpload-CTBOdaGq.js";import"./Mic-DAPkQZuC.js";import"./PlaylistPlay-DcgxbGJx.js";import"./QueueMusic-CiX-EN5z.js";import"./Sell-D56iqjs7.js";import"./external-link-jlnQ3iTs.js";import"./FilterAlt-Cw-mRuQp.js";import"./form-normalized-model-chip-field-R33Z1aXc.js";import"./use-normalized-models-ClA2DWxP.js";import"./form-chip-field-ehb7ckkp.js";import"./input-DAWJLQiY.js";import"./chip-list-D0uDB84E.js";import"./accordion-BALGWyw-.js";import"./checkbox-suk8vW77.js";import"./CheckBoxOutlineBlank-BgWeDdny.js";import"./ArrowRightAlt-iO8zeT1U.js";import"./DateRange-Bhvye4F9.js";import"./use-base-date-picker-state-DaWG2IMs.js";import"./use-date-formatter-m8TmZzOM.js";import"./DateFormatter-Dix9bfnP.js";import"./KeyboardArrowRight-CjTKdvdU.js";import"./use-date-range-picker-state-CSWp3d1-.js";import"./list-C96mDrnJ.js";import"./switch-4KDjemPX.js";import"./is-tablet-media-query-DhMPnSWn.js";import"./use-current-date-time-BhbL04rR.js";import"./normalized-model-field-8T9JWy8W.js";import"./Edit-BRVJ8AkN.js";import"./skeleton-BmWW5Jc-.js";import"./dashboard-layout-context-DeTNv3yG.js";import"./ArrowDownward-BHYKFIfy.js";import"./useInteractOutside-BFJZ3Z5N.js";import"./useEffectEvent-pADbdn7r.js";import"./is-ctrl-or-shift-pressed-Bx-mqgCW.js";import"./use-pointer-events-DcvSqvAc.js";import"./useGlobalListeners-BeXr-yG1.js";import"./uploaded-file-ksxfN_l-.js";import"./extension-from-filename-O0XMuZye.js";import"./pretty-bytes-bO14ePu9.js";import"./traditional-BcYcLesO.js";import"./Add-B3RL66ee.js";import"./combobox-end-adornment-B0xReOuL.js";import"./countries-0u-1JqGJ.js";const pe=""+new URL("around-the-world-DwONd8Eq.svg",import.meta.url).href;function xe(s){return y.post("localizations",s).then(o=>o.data)}function he(s){const o=N();return f({mutationFn:t=>xe(t),onSuccess:()=>{b(g("Localization created")),o.invalidateQueries({queryKey:x.localizations.invalidateKey})},onError:t=>k(t,s)})}function je(){const{trans:s}=D(),{formId:o,close:t}=h(),i=S({defaultValues:{language:"en",direction:"ltr"}}),r=I(),c=he(i);return e.jsxs(v,{children:[e.jsx(w,{children:e.jsx(a,{message:"Create localization"})}),e.jsx(F,{children:e.jsxs(L,{form:i,id:o,onSubmit:n=>{c.mutate(n,{onSuccess:t})},children:[e.jsx(T,{autoFocus:!0,name:"name",label:e.jsx(a,{message:"Name"}),className:"mb-30",required:!0}),e.jsx(u,{required:!0,name:"language",label:e.jsx(a,{message:"Language"}),selectionMode:"single",showSearchField:!0,className:"mb-30",searchPlaceholder:s(g("Search languages")),children:r.map(n=>e.jsx(m,{value:n.code,children:n.name},n.code))}),e.jsxs(u,{required:!0,name:"direction",label:e.jsx(a,{message:"Direction"}),selectionMode:"single",showSearchField:!0,children:[e.jsx(m,{value:"ltr",children:e.jsx(a,{message:"Left to right (default)"})},"ltr"),e.jsx(m,{value:"rtl",children:e.jsx(a,{message:"Right to left"})},"rtl")]})]})}),e.jsxs(P,{children:[e.jsx(d,{onClick:t,children:e.jsx(a,{message:"Cancel"})}),e.jsx(d,{variant:"flat",color:"primary",type:"submit",form:o,disabled:c.isPending,children:e.jsx(a,{message:"Save"})})]})]})}function fe({localization:s}){const{trans:o}=D(),{formId:t,close:i}=h(),r=S({defaultValues:{id:s.id,name:s.name,language:s.language,direction:s.direction}}),c=I(),n=G(r);return e.jsxs(v,{children:[e.jsx(w,{children:e.jsx(a,{message:"Update localization"})}),e.jsx(F,{children:e.jsxs(L,{form:r,id:t,onSubmit:l=>{n.mutate(l,{onSuccess:i})},children:[e.jsx(T,{name:"name",label:e.jsx(a,{message:"Name"}),className:"mb-30",required:!0}),e.jsx(u,{required:!0,name:"language",label:e.jsx(a,{message:"Language"}),className:"mb-30",selectionMode:"single",showSearchField:!0,searchPlaceholder:o(g("Search languages")),children:c.map(l=>e.jsx(m,{value:l.code,children:l.name},l.code))}),e.jsxs(u,{required:!0,name:"direction",label:e.jsx(a,{message:"Direction"}),selectionMode:"single",showSearchField:!0,children:[e.jsx(m,{value:"ltr",children:e.jsx(a,{message:"Left to right (default)"})},"ltr"),e.jsx(m,{value:"rtl",children:e.jsx(a,{message:"Right to left"})},"rtl")]})]})}),e.jsxs(P,{children:[e.jsx(d,{onClick:i,children:e.jsx(a,{message:"Cancel"})}),e.jsx(d,{variant:"flat",color:"primary",type:"submit",form:t,disabled:n.isPending,children:e.jsx(a,{message:"Save"})})]})]})}const be=[{key:"name",allowsSorting:!0,sortingKey:"name",visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(a,{message:"Name"}),body:s=>s.name},{key:"language",allowsSorting:!0,sortingKey:"language",header:()=>e.jsx(a,{message:"Language code"}),body:s=>e.jsx("span",{className:"uppercase",children:s.language})},{key:"direction",allowsSorting:!0,sortingKey:"direction",header:()=>e.jsx(a,{message:"Direction"}),body:s=>e.jsx("span",{className:"uppercase",children:s.direction})},{key:"updatedAt",allowsSorting:!0,width:"w-100",header:()=>e.jsx(a,{message:"Last updated"}),body:s=>e.jsx(ne,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(a,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-144 flex-shrink-0",visibleInMode:"all",body:s=>e.jsxs("div",{className:"text-muted",children:[e.jsx(E,{label:e.jsx(a,{message:"Translate"}),children:e.jsx(z,{size:"md",elementType:C,to:`${s.id}/translate`,children:e.jsx(W,{})})}),e.jsx(re,{children:e.jsx(ye,{locale:s})})]})}];function Ia(){const[s,o]=U.useState([]),{searchParams:t,sortDescriptor:i,mergeIntoSearchParams:r,setSearchQuery:c,isFiltering:n}=O(A),l=_(x.localizations.index(t)),M=e.jsxs(j,{type:"modal",children:[e.jsx(d,{variant:"flat",color:"danger",children:e.jsx(a,{message:"Delete"})}),e.jsx(De,{selectedIds:s,onDelete:()=>o([])})]}),q=e.jsxs(j,{type:"modal",children:[e.jsx(ge,{children:e.jsx(a,{message:"Add new localization"})}),e.jsx(je,{})]});return e.jsxs(ae,{children:[e.jsx(X,{query:l}),e.jsx(se,{title:e.jsx(a,{message:"Localizations"}),showSidebarToggleButton:!0,rightContent:e.jsx($,{variant:"button",link:V.pages.translations,size:"xs"})}),e.jsxs(te,{children:[e.jsx(Y,{searchValue:t.query,onSearchChange:c,actions:q,selectedItems:s,selectedActions:M}),e.jsxs(oe,{children:[e.jsx(ie,{columns:be,data:l.items,sortDescriptor:i,onSortChange:r,enableSelection:!0,selectedRows:s,onSelectionChange:o,cellHeight:"h-60"}),l.isEmpty&&e.jsx(Z,{isFiltering:n,image:pe,title:e.jsx(a,{message:"No localizations have been created yet"}),filteringTitle:e.jsx(a,{message:"No matching localizations"})}),e.jsx(ee,{query:l,onPageChange:p=>r({page:p}),onPerPageChange:p=>r({perPage:p})})]})]})]})}function ye({locale:s}){const o=J();return e.jsxs(B,{children:[e.jsx(z,{disabled:o.isPending,children:e.jsx(le,{})}),e.jsxs(K,{children:[e.jsx(m,{value:"translate",elementType:C,to:`${s.id}/translate`,children:e.jsx(a,{message:"Translate"})}),e.jsx(m,{value:"rename",onSelected:()=>R(fe,{localization:s}),children:e.jsx(a,{message:"Update"})}),e.jsx(m,{value:"download",onSelected:()=>ce(`api/v1/localizations/${s.id}/download`),children:e.jsx(a,{message:"Download"})}),e.jsx(m,{value:"upload",onSelected:async()=>{const t=await ue({types:[de.json]});t.length==1&&o.mutate({localeId:s.id,file:t[0]})},children:e.jsx(a,{message:"Upload"})})]})]})}function De({selectedIds:s,onDelete:o}){const{close:t}=h(),i=f({mutationFn:()=>y.delete(`localizations/${s.join(",")}`),onSuccess:async()=>{await Q.invalidateQueries({queryKey:x.localizations.invalidateKey}),b(g("Localizations deleted")),o(),t()},onError:r=>H(r)});return e.jsx(me,{isDanger:!0,isLoading:i.isPending,title:e.jsx(a,{message:"Delete localizations"}),body:e.jsx(a,{message:"Are you sure you want to delete selected localizations?",values:{count:s.length}}),confirm:e.jsx(a,{message:"Delete"}),onConfirm:()=>i.mutate()})}export{Ia as Component,De as DeleteLocalizationsDialog};
