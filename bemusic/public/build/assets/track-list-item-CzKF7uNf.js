import{j as s,d as c,r as i,u,aw as h,co as v,a9 as p,A as g}from"./main-CUJEGI8U.js";import{A as b}from"./artist-links-YW81uP4U.js";import{G as C}from"./genre-link-DnbOgUf-.js";import{P as T}from"./share-media-button-Dw3JV4C-.js";import{u as w,W as N}from"./waveform-O_aCNRMS.js";import{S as k}from"./slider-BDqMUq69.js";import{F as d}from"./formatted-duration-2_MIaPa4.js";import{u as P}from"./use-track-permissions-ChTh4jJA.js";import{C as F,T as L,a as S,b as W}from"./comment-bar-new-comment-form-CyGo8E79.js";import{T as _}from"./track-image-B3DSRXTB.js";import{T as y}from"./track-link-D8mIwI0F.js";import{t as z}from"./track-context-dialog-DU1dwrB2.js";import{R as B}from"./Repeat-DTFydNM6.js";function R({track:e,queue:a,className:t}){const{duration:o,...r}=w(e,a);return s.jsxs("div",{className:c("flex items-center gap-12",t),children:[s.jsx("div",{className:"min-w-40 flex-shrink-0 text-right text-xs text-muted",children:r.value?s.jsx(d,{seconds:r.value}):"0:00"}),s.jsx(k,{trackColor:"neutral",thumbSize:"w-14 h-14",showThumbOnHoverOnly:!0,className:"flex-auto",width:"w-auto",...r}),s.jsx("div",{className:"min-w-40 flex-shrink-0 text-xs text-muted",children:s.jsx(d,{seconds:o})})]})}const Y=i.memo(({track:e,queue:a,reposter:t,className:o,hideArtwork:r=!1,hideActions:l=!1,linksInNewTab:m=!1})=>{var x;const{player:n}=u(),{managesTrack:f}=P([e]),j=(n==null?void 0:n.seekbar_type)==="waveform"&&z(e);return s.jsxs("div",{className:c("overflow-hidden",!r&&"md:flex md:gap-24",o),children:[!r&&s.jsx(_,{track:e,className:"flex-shrink-0 rounded max-md:hidden",size:"w-184 h-184"}),s.jsxs("div",{className:"min-w-0 flex-auto",children:[s.jsxs("div",{className:"flex items-center gap-14",children:[s.jsx(T,{track:e,tracks:a,buttonType:"icon",color:"primary",variant:"flat",radius:"rounded-full",equalizerColor:"white"}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-6 text-sm text-muted",children:[s.jsx(b,{artists:e.artists,target:m?"_blank":void 0}),t&&s.jsxs(i.Fragment,{children:[s.jsx(B,{size:"xs"}),s.jsx(h,{user:t,target:m?"_blank":void 0})]})]}),s.jsx("div",{children:s.jsx(y,{track:e,target:m?"_blank":void 0})})]}),s.jsxs("div",{className:"ml-auto text-sm",children:[s.jsx(v,{date:e.created_at}),(x=e.genres)!=null&&x.length?s.jsx(p,{className:"mt-6 w-max",size:"xs",children:s.jsx(C,{genre:e.genres[0],target:m?"_blank":void 0})}):null]})]}),s.jsx("div",{className:"mt-20",children:j?s.jsx(F,{disableCommenting:l,children:s.jsx(A,{track:e,queue:a})}):s.jsx(R,{track:e,queue:a})}),!l&&s.jsx(L,{item:e,managesItem:f,className:"mt-20"})]})]})});function A({track:e,queue:a}){const{markerIsVisible:t}=i.useContext(S);return s.jsxs(i.Fragment,{children:[s.jsx(N,{track:e,queue:a}),s.jsx(g,{mode:"wait",children:t&&s.jsx(W,{className:"mb-8 mt-28",commentable:e})})]})}export{Y as T,A as W,R as a};
