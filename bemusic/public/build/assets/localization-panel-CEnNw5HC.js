import{G as j,ag as f,H as b,b as S,I as L,J as p,z as h,j as e,bZ as T,Q as d,aD as x,cv as F,r as y,M as z,cP as v,as as I,T as i,t as P}from"./main-CUJEGI8U.js";import{A,a as C}from"./account-settings-sidenav-b3HqyYgG.js";import"./combobox-BECNHGKY.js";import{F as g}from"./select-Z9R0wV6S.js";import{g as E}from"./countries-0u-1JqGJ.js";function M(n,t){return j({mutationFn:a=>S.put(`users/${n}`,a).then(o=>o.data),onSuccess:()=>{L(p("Updated account details"))},onError:a=>t?f(a,t):b(a)})}function D({name:n,size:t,timezones:a,label:o,...r}){const{trans:l}=h();return e.jsx(g,{selectionMode:"single",name:n,size:t,label:o,showSearchField:!0,searchPlaceholder:l(p("Search timezones")),...r,children:Object.entries(a).map(([u,m])=>e.jsx(T,{label:u,children:m.map(c=>e.jsx(d,{value:c,children:c},c))},u))})}const Z=x(()=>Intl.supportedValuesOf("timeZone")),$=x(()=>{const n=Z(),t={};for(const a of n){const[o,r]=a.split("/");t[o]||(t[o]=[]),t[o].push(a)}return t});function H({user:n}){const t=F(s=>s.data.i18n.locales),a=y.useId(),{trans:o}=h(),r=z({defaultValues:{language:n.language||"",country:n.country||"",timezone:n.timezone||"UTC"}}),l=M(n.id,r),u=v(),m=E(),c=$();return e.jsx(A,{id:C.LocationAndLanguage,title:e.jsx(i,{message:"Date, time and language"}),actions:e.jsx(P,{type:"submit",variant:"flat",color:"primary",form:a,disabled:l.isPending||!r.formState.isValid,children:e.jsx(i,{message:"Save"})}),children:e.jsxs(I,{form:r,onSubmit:s=>{l.mutate(s),u.mutate({locale:s.language})},id:a,children:[e.jsx(g,{className:"mb-24",selectionMode:"single",name:"language",label:e.jsx(i,{message:"Language"}),children:t.map(s=>e.jsx(d,{value:s.language,children:s.name},s.language))}),e.jsx(g,{className:"mb-24",selectionMode:"single",name:"country",label:e.jsx(i,{message:"Country"}),showSearchField:!0,searchPlaceholder:o(p("Search countries")),children:m.map(s=>e.jsx(d,{value:s.code,children:s.name},s.code))}),e.jsx(D,{label:e.jsx(i,{message:"Timezone"}),name:"timezone",timezones:c})]})})}export{H as L,M as u};
