import{r as m,aP as S,b2 as j,b1 as O,aT as R,z,b7 as F,aU as $,j as t,am as E,d as A,D as B,a0 as H,a2 as L,t as k,T as v}from"./main-CUJEGI8U.js";import{u as T}from"./use-current-date-time-BhbL04rR.js";import{u as M}from"./use-date-formatter-m8TmZzOM.js";import{D as N}from"./DateRange-Bhvye4F9.js";import{D as U}from"./dialog-footer-jZcc-BBM.js";import{u as Z,t as V,D as q,a as G,C as J}from"./use-base-date-picker-state-DaWG2IMs.js";function K(a){const o=T(),[e,f]=m.useState(!a.value&&!a.defaultValue),s=a.onChange,[n,i]=S(a.value||o,a.defaultValue||o,r=>{f(!1),s==null||s(r)}),{min:d,max:l,granularity:b,timezone:g,calendarIsOpen:D,setCalendarIsOpen:c,closeDialogOnSelection:p}=Z(n,a),h=m.useCallback(()=>{f(!0),i(o),s==null||s(null),c(!1)},[o,i,s,c]),[u,x]=m.useState(()=>[j(n)]),C=m.useCallback(r=>{d&&r.compare(d)<0?r=d:l&&r.compare(l)>0&&(r=l);const P=n?n.set(r):V(r,g);i(P),x([j(P)]),f(!1)},[i,d,l,n,g]),I=m.useCallback(r=>!e&&O(n,r),[n,e]),y=m.useCallback(r=>({onClick:()=>{C==null||C(r),p&&(c==null||c(!1))}}),[C,c,p]);return{selectedValue:n,setSelectedValue:i,calendarIsOpen:D,setCalendarIsOpen:c,dayIsActive:I,dayIsHighlighted:()=>!1,dayIsRangeStart:()=>!1,dayIsRangeEnd:()=>!1,getCellProps:y,calendarDates:u,setCalendarDates:x,isPlaceholder:e,clear:h,setIsPlaceholder:f,min:d,max:l,granularity:b,timezone:g,closeDialogOnSelection:p}}function Q({showCalendarFooter:a,...o}){const e=K(o),f=m.useRef(null),s=T(),n=a&&t.jsx(U,{padding:"px-14 pb-14",startAction:t.jsx(k,{disabled:e.isPlaceholder,variant:"text",color:"primary",onClick:()=>{e.clear()},children:t.jsx(v,{message:"Clear"})}),children:t.jsx(k,{variant:"text",color:"primary",onClick:()=>{e.setSelectedValue(s),e.setCalendarIsOpen(!1)},children:t.jsx(v,{message:"Today"})})}),i=t.jsx(B,{offset:8,placement:"bottom-start",isOpen:e.calendarIsOpen,onOpenChange:e.setCalendarIsOpen,type:"popover",triggerRef:f,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:t.jsxs(H,{size:"auto",children:[t.jsx(L,{className:"flex items-start gap-40",padding:a?"px-24 pt-20 pb-10":null,children:t.jsx(J,{state:e,visibleMonths:1})}),n]})}),d={onClick:l=>{l.stopPropagation(),l.preventDefault(),W(l)?e.setCalendarIsOpen(!1):e.setCalendarIsOpen(!0)}};return t.jsxs(m.Fragment,{children:[t.jsx(q,{ref:f,wrapperProps:d,endAdornment:t.jsx(N,{className:A(o.disabled&&"text-disabled")}),...o,children:t.jsx(G,{segmentProps:d,state:e,value:e.selectedValue,onChange:e.setSelectedValue,isPlaceholder:e.isPlaceholder})}),i]})}function te(a){const{min:o,max:e}=a,f=R(),s=a.timezone||f,{trans:n}=z(),{format:i}=M({timeZone:s}),{field:{onChange:d,onBlur:l,value:b=null,ref:g},fieldState:{invalid:D,error:c}}=F({name:a.name,rules:{validate:u=>{if(!u)return;const x=$(u,s);if(o&&x.compare(o)<0)return n({message:"Enter a date after :date",values:{date:i(u)}});if(e&&x.compare(e)>0)return n({message:"Enter a date before :date",values:{date:i(u)}})}}}),p=b?$(b,s):null,h={onChange:u=>{d(u&&u.toAbsoluteString())},onBlur:l,value:p,invalid:D,errorMessage:c==null?void 0:c.message,inputRef:g};return t.jsx(Q,{...E(h,a)})}function W(a){return["hour","minute","dayPeriod"].includes(a.currentTarget.ariaLabel||"")}export{te as F};
