import{u as useSettings,e as useAuth,r as reactExports,ci as dot,j as jsxRuntimeExports,d as clsx,aA as lazyLoader}from"./main-CUJEGI8U.js";import{$ as $62d8ded9296f3872$export$cfa2225e87938781}from"./getScrollParent--OCc5gFh.js";function AdHost({slot:t,className:n}){var i;const c=useSettings(),{isSubscribed:s}=useAuth(),e=reactExports.useMemo(()=>dot.pick(`ads.${t}`,c),[t,c]);return(i=c.ads)!=null&&i.disable||s||!e?null:jsxRuntimeExports.jsx(InvariantAd,{className:n,slot:t,adCode:e})}const InvariantAd=reactExports.memo(({slot:t,adCode:n,className:c})=>{const s=reactExports.useRef(null),e=reactExports.useId();return reactExports.useEffect(()=>(s.current&&loadAdScripts(n,s.current).then(()=>{executeAdJavascript(n,e)}),()=>{delete window.google_ad_modifications}),[n,e]),reactExports.useEffect(()=>{if(s.current){const i=$62d8ded9296f3872$export$cfa2225e87938781(s.current);if(i){const o=new MutationObserver(function(){i.style.height="",i.style.minHeight=""});return o.observe(i,{attributes:!0,attributeFilter:["style"]}),()=>o.disconnect()}}},[]),jsxRuntimeExports.jsx("div",{ref:s,id:e,className:clsx("ad-host flex max-h-[600px] min-h-90 w-full max-w-full items-center justify-center overflow-hidden",`${t.replace(/\./g,"-")}-host`,c),dangerouslySetInnerHTML:{__html:getAdHtml(n)}})},()=>!1);function getAdHtml(t){return t==null?void 0:t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").trim()}function loadAdScripts(t,n){const c=[],s=/<script.*?src=['"](.*?)['"]/g;let e;for(;e=s.exec(t);)e[1]&&c.push(lazyLoader.loadAsset(e[1],{type:"js",parentEl:n}));return Promise.all(c)}function executeAdJavascript(adCode,id){const pattern=/<script\b[^>]*>([\s\S]*?)<\/script>/g;let content;for(;content=pattern.exec(adCode);)if(content[1]){const r=`var d = document.createElement('div'); d.innerHTML = $1; document.getElementById('${id}').appendChild(d.firstChild);`,toEval=content[1].replace(/document.write\((.+?)\);/,r);eval(toEval)}}export{AdHost as A};
