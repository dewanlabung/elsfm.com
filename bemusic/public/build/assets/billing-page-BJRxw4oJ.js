import{cw as r,j as e,r as m,t as o,v as l,T as t,a9 as p,u as g,aj as y}from"./main-CUJEGI8U.js";import{B as c,A as b}from"./billing-plan-panel-CgbdcCNE.js";import{u as i}from"./useSuspenseQuery-13TuSADp.js";import{F as j,a as x}from"./formatted-price-o7rYOnCC.js";import{S as f}from"./section-helper-Dtpb8UEn.js";import{F as u}from"./formatted-date-DzIPJwiH.js";import{C as v}from"./CalendarToday-B1Sttl9s.js";import{O as w}from"./OpenInNew-BW4EtK-8.js";import{E as h}from"./Edit-BRVJ8AkN.js";import"./use-date-formatter-m8TmZzOM.js";import"./DateFormatter-Dix9bfnP.js";function N(){const s=i(r.user()),a=e.jsx(u,{preset:"long",date:s.data.subscription.renews_at});return e.jsxs(m.Fragment,{children:[s.data.subscription.past_due?e.jsx(_,{}):null,e.jsx(c,{title:e.jsx(t,{message:"Current plan"}),children:e.jsxs("div",{className:"mt-24 flex justify-between gap-20",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 text-xl font-bold",children:s.data.subscription.product.name}),e.jsx(j,{className:"mb-2 text-xl",price:s.data.subscription.price}),e.jsx("div",{className:"text-base",children:e.jsx(P,{subscription:s.data.subscription,renewDate:a})})]}),e.jsxs("div",{className:"w-[233px]",children:[e.jsx(o,{variant:"flat",color:"primary",size:"md",className:"mb-12 w-full",elementType:l,to:"/billing/change-plan",disabled:s.data.subscription.gateway_name==="none",children:e.jsx(t,{message:"Change plan"})}),e.jsx(o,{variant:"outline",color:"danger",size:"md",className:"w-full",elementType:l,to:"/billing/cancel",children:e.jsx(t,{message:"Cancel plan"})})]})]})})]})}function P({subscription:s,renewDate:a}){return s.on_trial?e.jsx(t,{message:"You will be automatically charged after your free trial ends on :date.",values:{date:a}}):e.jsx(t,{message:"Your plan renews on :date",values:{date:a}})}function _(){return e.jsx(f,{className:"mb-24",color:"danger",title:"Payment is past due",description:"Your recent recurring payment has failed with the payment method we have on file. Please update your payment method to avoid any service interruptions."})}function C(){const s=i(r.user()),a=e.jsx("span",{className:"whitespace-nowrap",children:e.jsx(u,{preset:"long",date:s.data.subscription.ends_at})});return e.jsx(c,{title:e.jsx(t,{message:"Current plan"}),children:e.jsxs("div",{className:"mt-24 flex flex-col justify-between gap-20",children:[e.jsxs("div",{children:[e.jsx(p,{className:"mb-10 w-min",size:"xs",radius:"rounded",color:"danger",children:e.jsx(t,{message:"Canceled"})}),e.jsx("div",{className:"mb-2 text-xl font-bold",children:s.data.subscription.product.name}),e.jsx(j,{className:"mb-8 text-xl",price:s.data.subscription.price}),e.jsxs("div",{className:"flex items-center gap-8 text-base",children:[e.jsx(v,{size:"sm",className:"text-muted"}),e.jsx("div",{className:"flex-auto",children:s.data.subscription.on_trial?e.jsx(t,{message:"Trial will end on :date and you will not be charged.",values:{date:a}}):e.jsx(t,{message:"Your plan will be canceled on :date",values:{date:a}})})]})]}),e.jsx("div",{className:"w-[233px]",children:e.jsx(o,{variant:"flat",color:"primary",size:"md",className:"mb-12 w-full",elementType:l,to:"/billing/renew",children:e.jsx(t,{message:"Renew plan"})})})]})})}function z(){const s=i(r.user());return e.jsx(c,{title:e.jsx(t,{message:"Invoices"}),children:e.jsx("div",{className:"max-w-[464px]",children:e.jsx(q,{data:s.data})})})}function q({data:s}){const{base_url:a}=g();return e.jsxs("div",{children:[s.invoices.length?void 0:e.jsx("div",{className:"italic text-muted",children:e.jsx(t,{message:"No invoices yet"})}),s.invoices.map(n=>e.jsxs("div",{className:"mb-14 flex items-center justify-between gap-10 whitespace-nowrap text-base",children:[e.jsxs("a",{href:`${a}/billing/invoices/${n.uuid}`,target:"_blank",className:"flex items-center gap-8 hover:underline",rel:"noreferrer",children:[e.jsx(u,{date:n.created_at}),e.jsx(w,{size:"xs"})]}),e.jsx(I,{invoice:n}),e.jsx(p,{size:"xs",color:n.status==="paid"?"positive":"danger",radius:"rounded",children:n.status==="paid"?e.jsx(t,{message:"Paid"}):e.jsx(t,{message:"Unpaid"})}),e.jsx("div",{children:s.subscription.product.name})]},n.id))]})}function I({invoice:s}){var n;const a=s.currency||((n=s.subscription.price)==null?void 0:n.currency)||"USD";return s.amount_paid!=null?e.jsx(x,{valueInCents:s.amount_paid,currency:a}):s.subscription.price?e.jsx(x,{value:s.subscription.price.amount,currency:a}):null}const F=""+new URL("paypal-B29zazWi.svg",import.meta.url).href;function T(){const n=i(r.user()).data.subscription.gateway_name==="paypal"?M:S;return e.jsx(c,{title:e.jsx(t,{message:"Payment method"}),children:e.jsx(n,{methodClassName:"whitespace-nowrap text-base max-w-[464px] flex items-center gap-10",linkClassName:"flex items-center gap-4 text-muted mt-18 block hover:underline"})})}function S({methodClassName:s,linkClassName:a}){const n=i(r.user()),d=n.data.user;return e.jsxs(m.Fragment,{children:[e.jsxs("div",{className:s,children:[e.jsx("span",{className:"capitalize",children:n.data.user.card_brand})," ••••",d.card_last_four,d.card_expires&&e.jsx("div",{className:"ml-auto",children:e.jsx(t,{message:"Expires :date",values:{date:d.card_expires}})})]}),e.jsxs(l,{className:a,to:"/billing/change-payment-method",children:[e.jsx(h,{size:"sm"}),e.jsx(t,{message:"Change payment method"})]})]})}function M({methodClassName:s,linkClassName:a}){const n=i(r.user());return e.jsxs(m.Fragment,{children:[e.jsx("div",{className:s,children:e.jsx(y,{src:F})}),e.jsxs("a",{className:a,href:`https://www.sandbox.paypal.com/myaccount/autopay/connect/${n.data.subscription.gateway_id}/funding`,target:"_blank",rel:"noreferrer",children:[e.jsx(h,{size:"sm"}),e.jsx(t,{message:"Change payment method"})]})]})}function O(){const a=i(r.user()).data.subscription.ends_at?e.jsx(C,{}):e.jsx(N,{});return e.jsxs("div",{children:[e.jsx(b,{className:"mb-44"}),a,e.jsx(T,{}),e.jsx(z,{})]})}export{O as Component};
