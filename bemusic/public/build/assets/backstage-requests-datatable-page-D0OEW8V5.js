import{J as s,j as e,T as a,d as b,t as u,v as j,r as f,at as g,S as D,ab as k,D as v,$ as S,G as w,H as q,b as T,aa as C,I as P}from"./main-CUJEGI8U.js";import{a as R}from"./admin-config-DTFkVWJm.js";import{F as d,d as p,u as A,a as B,G as F,D as N,b as E,c as H}from"./use-datatable-query-D9uebfzx.js";import{U as I}from"./user-D6GCMJ6c.js";import{c as L,u as M}from"./timestamp-filters-DydeeDDl.js";import{F as U}from"./formatted-date-DzIPJwiH.js";import{N as _}from"./name-with-avatar-CpbvmPVO.js";import{S as O}from"./small-artist-image-BqXmK0zy.js";import{A as V}from"./artist-link-XkkvBaYk.js";import{B as W}from"./backstage-request-type-CLKnoTCa.js";import{D as z}from"./settings-links-6v3CjZ6H.js";import{D as G}from"./datatable-filters-DFYg3QEK.js";import{a as Q,D as $,b as K,c as J}from"./datatable-page-with-header-layout-C4e5sJMc.js";import{T as X}from"./table-CgoYghfp.js";import{C as Y}from"./confirmation-dialog-DVMbD2S1.js";import"./Album-pwm22nnR.js";import"./Comment-vFUyF-gf.js";import"./FileUpload-CTBOdaGq.js";import"./Mic-DAPkQZuC.js";import"./PlaylistPlay-DcgxbGJx.js";import"./QueueMusic-CiX-EN5z.js";import"./Sell-D56iqjs7.js";import"./FilterAlt-Cw-mRuQp.js";import"./form-normalized-model-chip-field-R33Z1aXc.js";import"./use-normalized-models-ClA2DWxP.js";import"./form-chip-field-ehb7ckkp.js";import"./input-DAWJLQiY.js";import"./chip-list-D0uDB84E.js";import"./accordion-BALGWyw-.js";import"./checkbox-suk8vW77.js";import"./CheckBoxOutlineBlank-BgWeDdny.js";import"./ArrowRightAlt-iO8zeT1U.js";import"./DateRange-Bhvye4F9.js";import"./use-base-date-picker-state-DaWG2IMs.js";import"./use-date-formatter-m8TmZzOM.js";import"./DateFormatter-Dix9bfnP.js";import"./KeyboardArrowRight-CjTKdvdU.js";import"./use-date-range-picker-state-CSWp3d1-.js";import"./list-C96mDrnJ.js";import"./switch-4KDjemPX.js";import"./dialog-footer-jZcc-BBM.js";import"./is-tablet-media-query-DhMPnSWn.js";import"./use-current-date-time-BhbL04rR.js";import"./select-Z9R0wV6S.js";import"./combobox-end-adornment-B0xReOuL.js";import"./normalized-model-field-8T9JWy8W.js";import"./Edit-BRVJ8AkN.js";import"./skeleton-BmWW5Jc-.js";import"./formatted-number-gsF1qEbc.js";import"./external-link-jlnQ3iTs.js";import"./dashboard-layout-context-DeTNv3yG.js";import"./ArrowDownward-BHYKFIfy.js";import"./useInteractOutside-BFJZ3Z5N.js";import"./useEffectEvent-pADbdn7r.js";import"./is-ctrl-or-shift-pressed-Bx-mqgCW.js";import"./use-pointer-events-DcvSqvAc.js";import"./useGlobalListeners-BeXr-yG1.js";const c=[{key:"type",label:s("Type"),description:s("Type of the request"),defaultOperator:p.eq,control:{type:d.Select,defaultValue:"become-artist",options:[{key:"become-artist",label:s("Become artist"),value:"become-artist"},{key:"verify-artist",label:s("Verify artist"),value:"verify-artist"},{key:"claim-artist",label:s("Claim artist"),value:"claim-artist"}]}},{key:"status",label:s("Status"),description:s("Status of the request"),defaultOperator:p.eq,control:{type:d.Select,defaultValue:"pending",options:[{key:"pending",label:s("Pending"),value:"pending"},{key:"approved",label:s("Approved"),value:"approved"},{key:"denied",label:s("Denied"),value:"denied"}]}},{key:"user_id",label:s("Requester"),description:s("User that submitted the request"),defaultOperator:p.eq,control:{type:d.SelectModel,model:I}},L({description:s("Date request was created")}),M({description:s("Date request was last updated")})],Z=[{key:"type",allowsSorting:!0,minWidth:"min-w-100",header:()=>e.jsx(a,{message:"Type"}),body:t=>e.jsx(W,{type:t.type})},{key:"status",allowsSorting:!0,visibleInMode:"all",minWidth:"min-w-100",header:()=>e.jsx(a,{message:"Status"}),body:t=>e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("div",{className:b("h-10 w-10 flex-shrink-0 rounded-full",t.status==="approved"&&"bg-positive",t.status==="pending"&&"bg-warning",t.status==="denied"&&"bg-danger")}),e.jsx("div",{className:"capitalize",children:e.jsx(a,{message:t.status})})]})},{key:"user",allowsSorting:!0,visibleInMode:"all",width:"flex-3",header:()=>e.jsx(a,{message:"User"}),body:t=>t.user?e.jsx(_,{image:t.user.image,label:t.user.name,description:t.user.email}):null},{key:"artist",allowsSorting:!0,width:"flex-3",header:()=>e.jsx(a,{message:"Artist"}),body:t=>t.artist?e.jsxs("div",{className:"flex w-max items-center gap-12",children:[e.jsx(O,{artist:t.artist,className:"flex-shrink-0 rounded",size:"w-34 h-34"}),e.jsx(V,{artist:t.artist})]}):t.artist_name},{key:"created_at",allowsSorting:!0,width:"w-100",header:()=>e.jsx(a,{message:"Requested at"}),body:t=>t.created_at?e.jsx(U,{date:t.created_at}):""},{key:"actions",header:()=>e.jsx(a,{message:"Actions"}),hideHeader:!0,align:"end",visibleInMode:"all",width:"w-60 flex-shrink-0",body:t=>e.jsx(u,{elementType:j,to:`${t.id}`,color:"primary",variant:"outline",size:"xs",children:e.jsx(a,{message:"View"})})}],ee=""+new URL("accept-request-Gsr-Benp.svg",import.meta.url).href;function it(){const[t,i]=f.useState([]),{searchParams:o,sortDescriptor:l,mergeIntoSearchParams:r,setSearchQuery:x,isFiltering:h}=A(k),n=B(g.backstageRequests.index(o)),y=e.jsxs(v,{type:"modal",children:[e.jsx(u,{variant:"flat",color:"danger",children:e.jsx(a,{message:"Delete"})}),e.jsx(te,{selectedIds:t,onDelete:()=>i([])})]});return e.jsxs(Q,{children:[e.jsx(F,{query:n}),e.jsx(D,{children:e.jsx(a,{message:"Backstage requests"})}),e.jsx($,{title:e.jsx(a,{message:"Backstage requests"}),showSidebarToggleButton:!0,rightContent:e.jsx(z,{variant:"button",link:R.pages.backstage,size:"xs"})}),e.jsxs(K,{children:[e.jsx(N,{searchValue:o.query,onSearchChange:x,selectedItems:t,selectedActions:y,filters:c}),e.jsx(G,{filters:c}),e.jsxs(J,{children:[e.jsx(X,{columns:Z,data:n.items,sortDescriptor:l,onSortChange:r,enableSelection:!0,selectedRows:t,onSelectionChange:i,cellHeight:"h-54"}),n.isEmpty&&e.jsx(E,{isFiltering:h,image:ee,title:e.jsx(a,{message:"No requests have been created yet"}),filteringTitle:e.jsx(a,{message:"No matching requests"})}),e.jsx(H,{query:n,onPageChange:m=>r({page:m}),onPerPageChange:m=>r({perPage:m})})]})]})]})}function te({selectedIds:t,onDelete:i}){const{close:o}=S(),l=w({mutationFn:()=>T.delete(`backstage-requests/${t.join(",")}`),onSuccess:async()=>{await C.invalidateQueries({queryKey:g.backstageRequests.invalidateKey}),P(s("Requests deleted")),i(),o()},onError:r=>q(r)});return e.jsx(Y,{isDanger:!0,isLoading:l.isPending,title:e.jsx(a,{message:"Delete requests"}),body:e.jsx(a,{message:"Are you sure you want to delete selected requests?",values:{count:t.length}}),confirm:e.jsx(a,{message:"Delete"}),onConfirm:()=>l.mutate()})}export{it as Component};
