import{by as Z,b7 as _,j as e,am as ee,bz as se,T as ne,bA as te,bg as ae,r as le,d as K,ba as oe,bB as ie,bC as re,bD as ce,bh as de,ar as ue,ao as me}from"./main-CUJEGI8U.js";import{C as pe}from"./combobox-end-adornment-B0xReOuL.js";function he(n){const a=se(),{hideCaret:u,placeholder:m=e.jsx(ne,{message:"Select an option..."}),selectedValue:b,onItemSelected:g,onOpenChange:C,onInputValueChange:v,onSelectionChange:l,selectionMode:r="single",minWidth:p="min-w-128",children:fe,searchPlaceholder:M,showEmptyMessage:T,showSearchField:i,defaultInputValue:xe,defaultSelectedValue:be,inputValue:ge,isLoading:w,isAsync:Ce,valueClassName:k,floatingWidth:L=a?"auto":"matchTrigger",ref:z,showCheckmark:A,inputRadius:O,appearance:E,...j}=n,h=te({...n,selectionMode:r,showCheckmark:A,clearInputOnItemSelection:!0,showEmptyMessage:T||i,floatingWidth:L,role:"listbox",virtualFocus:i},z),{state:{selectedValues:f,isOpen:o,setIsOpen:P,activeIndex:y,setSelectedIndex:R,inputValue:B,setInputValue:$},collections:I,focusItem:q,listboxId:S,reference:W,refs:d,listContent:F,onInputChange:G}=h,{fieldProps:N,inputProps:H}=ae({...j,focusRef:d.reference});let x=e.jsx("span",{className:"text-main/50",children:m});if(r==="multiple"){const s=f.map(t=>{var c;return(c=I.collection.get(t))==null?void 0:c.element.props.children}).filter(Boolean);s.length>0&&(x=e.jsx("span",{className:"flex items-center overflow-hidden overflow-ellipsis whitespace-nowrap",children:s.map((t,c)=>e.jsxs(le.Fragment,{children:[e.jsx("div",{className:"block",children:t}),c<s.length-1?e.jsx("span",{className:"mr-4 block",children:","}):null]},c))}))}else if(r==="single"){const s=I.collection.get(f[0]);s&&(x=e.jsxs("span",{className:"flex items-center gap-10",children:[s.element.props.startIcon,e.jsx("span",{className:K("overflow-hidden overflow-ellipsis whitespace-nowrap",k),children:s.element.props.children})]}))}const V=oe({...n,inputRadius:O||(E==="dropdown"?"rounded-button":"rounded-input"),endAdornment:!0}),{handleTriggerKeyDown:J,handleListboxKeyboardNavigation:Q,handleListboxSearchFieldKeydown:U}=ce(h),{findMatchingItem:D}=ie(),X=s=>{if(!o)return;const t=D(s,F,y);t!=null&&q("increment",t)},Y=s=>{if(o)return;const t=D(s,F,y);t!=null&&R(t)};return e.jsx(re,{listbox:h,onKeyDownCapture:i?void 0:X,onKeyDown:Q,onClose:i?()=>$(""):void 0,isLoading:w,searchField:i&&e.jsx(ue,{size:n.size==="xs"||n.size==="sm"?"xs":"sm",placeholder:M,startAdornment:e.jsx(me,{}),className:"flex-shrink-0 px-8 pb-8 pt-4",autoFocus:!0,"aria-expanded":o?"true":"false","aria-haspopup":"listbox","aria-controls":o?S:void 0,"aria-autocomplete":"list",autoComplete:"off",autoCorrect:"off",spellCheck:"false",value:B,onChange:G,onKeyDown:s=>{U(s)}}),children:e.jsxs(de,{fieldClassNames:V,...N,endAdornment:!u&&e.jsx(pe,{isLoading:w,size:n.size}),children:[e.jsx("button",{...H,type:"button","aria-expanded":o?"true":"false","aria-haspopup":"listbox","aria-controls":o?S:void 0,ref:W,onKeyDown:J,onKeyDownCapture:i?void 0:Y,disabled:j.disabled,onClick:()=>{P(!o)},className:K(V.input,!N.unstyled&&p),children:x}),e.jsx("div",{"aria-hidden":!0,className:"pointer-events-none absolute bottom-0 left-0 w-full opacity-0",children:e.jsx("label",{children:e.jsx("input",{tabIndex:-1,required:n.required,name:n.name,value:f[0],onChange:()=>{},onFocus:()=>{d.reference.current&&"focus"in d.reference.current&&d.reference.current.focus()}})})})]})})}function je({children:n,...a}){const u=Z(a),{field:{onChange:m,onBlur:b,value:g=null,ref:C},fieldState:{invalid:v,error:l}}=_({name:a.name,rules:u}),r={onSelectionChange:m,onBlur:b,selectedValue:g,invalid:v,errorMessage:l==null?void 0:l.message,name:a.name},p=a.errorMessage||(l==null?void 0:l.message);return e.jsx(he,{ref:C,...ee(r,a,{errorMessage:p}),children:n})}export{je as F,he as S};
