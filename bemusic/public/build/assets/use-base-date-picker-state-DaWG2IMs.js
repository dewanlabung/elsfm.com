import{bb as Q,av as U,r as P,x as I,bc as Y,j as m,am as Z,bd as J,be as ee,bf as te,R as se,ba as re,b8 as ae,bg as ie,d as N,bh as ne,bi as oe,bj as le,bk as ce,bl as ue,b3 as me,bm as de,aW as B,o as fe,aY as X,W as M,K as pe,aX as L,b2 as he,bn as z,aT as be}from"./main-CUJEGI8U.js";import{u as k}from"./use-date-formatter-m8TmZzOM.js";import{I as ye}from"./input-DAWJLQiY.js";import{K as xe}from"./KeyboardArrowRight-CjTKdvdU.js";const ge=new RegExp("^.*\\(.*\\).*$"),$e=["latn","arab","hanidec","deva","beng","fullwide"];class q{parse(t){return E(this.locale,this.options,t).parse(t)}isValidPartialNumber(t,s,r){return E(this.locale,this.options,t).isValidPartialNumber(t,s,r)}getNumberingSystem(t){return E(this.locale,this.options,t).options.numberingSystem}constructor(t,s={}){this.locale=t,this.options=s}}const K=new Map;function E(e,t,s){let r=W(e,t);if(!e.includes("-nu-")&&!r.isValidPartialNumber(s)){for(let a of $e)if(a!==r.options.numberingSystem){let n=W(e+(e.includes("-u-")?"-nu-":"-u-nu-")+a,t);if(n.isValidPartialNumber(s))return n}}return r}function W(e,t){let s=e+(t?Object.entries(t).sort((a,n)=>a[0]<n[0]?-1:1).join():""),r=K.get(s);return r||(r=new we(e,t),K.set(s,r)),r}class we{parse(t){let s=this.sanitize(t);if(this.symbols.group&&(s=j(s,this.symbols.group,"")),this.symbols.decimal&&(s=s.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(s=s.replace(this.symbols.minusSign,"-")),s=s.replace(this.symbols.numeral,this.symbols.index),this.options.style==="percent"){let c=s.indexOf("-");s=s.replace("-",""),s=s.replace("+","");let l=s.indexOf(".");l===-1&&(l=s.length),s=s.replace(".",""),l-2===0?s=`0.${s}`:l-2===-1?s=`0.0${s}`:l-2===-2?s="0.00":s=`${s.slice(0,l-2)}.${s.slice(l-2)}`,c>-1&&(s=`-${s}`)}let r=s?+s:NaN;if(isNaN(r))return NaN;if(this.options.style==="percent"){var a,n;let c={...this.options,style:"decimal",minimumFractionDigits:Math.min(((a=this.options.minimumFractionDigits)!==null&&a!==void 0?a:0)+2,20),maximumFractionDigits:Math.min(((n=this.options.maximumFractionDigits)!==null&&n!==void 0?n:0)+2,20)};return new q(this.locale,c).parse(new Q(this.locale,c).format(r))}return this.options.currencySign==="accounting"&&ge.test(t)&&(r=-1*r),r}sanitize(t){return t=t.replace(this.symbols.literals,""),this.symbols.minusSign&&(t=t.replace("-",this.symbols.minusSign)),this.options.numberingSystem==="arab"&&(this.symbols.decimal&&(t=t.replace(",",this.symbols.decimal),t=t.replace("،",this.symbols.decimal)),this.symbols.group&&(t=j(t,".",this.symbols.group))),this.symbols.group==="’"&&t.includes("'")&&(t=j(t,"'",this.symbols.group)),this.options.locale==="fr-FR"&&this.symbols.group&&(t=j(t," ",this.symbols.group),t=j(t,/\u00A0/g,this.symbols.group)),t}isValidPartialNumber(t,s=-1/0,r=1/0){return t=this.sanitize(t),this.symbols.minusSign&&t.startsWith(this.symbols.minusSign)&&s<0?t=t.slice(this.symbols.minusSign.length):this.symbols.plusSign&&t.startsWith(this.symbols.plusSign)&&r>0&&(t=t.slice(this.symbols.plusSign.length)),this.symbols.group&&t.startsWith(this.symbols.group)||this.symbols.decimal&&t.indexOf(this.symbols.decimal)>-1&&this.options.maximumFractionDigits===0?!1:(this.symbols.group&&(t=j(t,this.symbols.group,"")),t=t.replace(this.symbols.numeral,""),this.symbols.decimal&&(t=t.replace(this.symbols.decimal,"")),t.length===0)}constructor(t,s={}){this.locale=t,s.roundingIncrement!==1&&s.roundingIncrement!=null&&(s.maximumFractionDigits==null&&s.minimumFractionDigits==null?(s.maximumFractionDigits=0,s.minimumFractionDigits=0):s.maximumFractionDigits==null?s.maximumFractionDigits=s.minimumFractionDigits:s.minimumFractionDigits==null&&(s.minimumFractionDigits=s.maximumFractionDigits)),this.formatter=new Intl.NumberFormat(t,s),this.options=this.formatter.resolvedOptions(),this.symbols=Se(t,this.formatter,this.options,s);var r,a;this.options.style==="percent"&&(((r=this.options.minimumFractionDigits)!==null&&r!==void 0?r:0)>18||((a=this.options.maximumFractionDigits)!==null&&a!==void 0?a:0)>18)&&console.warn("NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.")}}const _=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),Pe=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function Se(e,t,s,r){var a,n,c,l;let f=new Intl.NumberFormat(e,{...s,minimumSignificantDigits:1,maximumSignificantDigits:21,roundingIncrement:1,roundingPriority:"auto",roundingMode:"halfExpand"}),d=f.formatToParts(-10000.111),h=f.formatToParts(10000.111),o=Pe.map(u=>f.formatToParts(u));var p;let b=(p=(a=d.find(u=>u.type==="minusSign"))===null||a===void 0?void 0:a.value)!==null&&p!==void 0?p:"-",y=(n=h.find(u=>u.type==="plusSign"))===null||n===void 0?void 0:n.value;!y&&((r==null?void 0:r.signDisplay)==="exceptZero"||(r==null?void 0:r.signDisplay)==="always")&&(y="+");let v=(c=new Intl.NumberFormat(e,{...s,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001).find(u=>u.type==="decimal"))===null||c===void 0?void 0:c.value,D=(l=d.find(u=>u.type==="group"))===null||l===void 0?void 0:l.value,w=d.filter(u=>!_.has(u.type)).map(u=>O(u.value)),C=o.flatMap(u=>u.filter($=>!_.has($.type)).map($=>O($.value))),V=[...new Set([...w,...C])].sort((u,$)=>$.length-u.length),R=V.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${V.join("|")}|[\\p{White_Space}]`,"gu"),F=[...new Intl.NumberFormat(s.locale,{useGrouping:!1}).format(9876543210)].reverse(),i=new Map(F.map((u,$)=>[u,$])),x=new RegExp(`[${F.join("")}]`,"g");return{minusSign:b,plusSign:y,decimal:v,group:D,literals:R,numeral:x,index:u=>String(i.get(u))}}function j(e,t,s){return e.replaceAll?e.replaceAll(t,s):e.split(t).join(s)}function O(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function De(e,t,s,r){switch(t){case"era":case"year":case"month":case"day":return e.cycle(t,s,{round:t==="year"})}if("hour"in e)switch(t){case"dayPeriod":{const a=e.hour,n=a>=12;return e.set({hour:n?a-12:a+12})}case"hour":case"minute":case"second":return e.cycle(t,s,{round:t!=="hour",hourCycle:r.hour12?12:24})}return e}function Ne(e,t,s,r){switch(t){case"day":case"month":case"year":return e.set({[t]:s})}if("hour"in e)switch(t){case"dayPeriod":{const a=e.hour,n=a>=12;return s>=12===n?e:e.set({hour:n?a-12:a+12})}case"hour":if(r.hour12){const n=e.hour>=12;!n&&s===12&&(s=0),n&&s<12&&(s+=12)}case"minute":case"second":return e.set({[t]:s})}return e}const G={year:5,month:2,day:7,hour:2,minute:15,second:15,dayPeriod:1};function ve({segment:e,domProps:t,value:s,onChange:r,isPlaceholder:a,state:{timezone:n,calendarIsOpen:c,setCalendarIsOpen:l}}){const f=U(),d=P.useRef(""),{localeCode:h}=I(),o=Y(),p=k({timeZone:n}),b=P.useMemo(()=>new q(h,{maximumFractionDigits:0}),[h]),y=i=>{r(Ne(s,e.type,i,p.resolvedOptions()))},S=i=>{r(De(s,e.type,i,p.resolvedOptions()))},v=()=>{if(b.isValidPartialNumber(e.text)){const i=e.text.slice(0,-1),x=b.parse(i);if(i.length===0||x===0){const g=J(n);e.type in g&&y(g[e.type])}else y(x);d.current=i}else e.type==="dayPeriod"&&S(-1)},D=i=>{var x;if(!(i.ctrlKey||i.metaKey||i.shiftKey||i.altKey)){switch(i.key){case"ArrowLeft":i.preventDefault(),i.stopPropagation(),o==null||o.focusPrevious();break;case"ArrowRight":i.preventDefault(),i.stopPropagation(),o==null||o.focusNext();break;case"Enter":(x=i.target.closest("form"))==null||x.requestSubmit(),l(!c);break;case"Tab":break;case"Backspace":case"Delete":{i.preventDefault(),i.stopPropagation(),v();break}case"ArrowUp":i.preventDefault(),d.current="",S(1);break;case"ArrowDown":i.preventDefault(),d.current="",S(-1);break;case"PageUp":i.preventDefault(),d.current="",S(G[e.type]||1);break;case"PageDown":i.preventDefault(),d.current="",S(-(G[e.type]||1));break;case"Home":i.preventDefault(),d.current="",y(e.maxValue);break;case"End":i.preventDefault(),d.current="",y(e.minValue);break}R(i.key)}},w=k({hour:"numeric",hour12:!0}),C=P.useMemo(()=>{const i=new Date;return i.setHours(0),w.formatToParts(i).find(x=>x.type==="dayPeriod").value},[w]),V=P.useMemo(()=>{const i=new Date;return i.setHours(12),w.formatToParts(i).find(x=>x.type==="dayPeriod").value},[w]),R=i=>{const x=d.current+i;switch(e.type){case"dayPeriod":if(C.toLowerCase().startsWith(i))y(0);else if(V.toLowerCase().startsWith(i))y(12);else break;o==null||o.focusNext();break;case"day":case"hour":case"minute":case"second":case"month":case"year":{if(!b.isValidPartialNumber(x))return;let g=b.parse(x),u=g,$=e.minValue===0;if(e.type==="hour"&&p.resolvedOptions().hour12){switch(p.resolvedOptions().hourCycle){case"h11":g>11&&(u=b.parse(i));break;case"h12":$=!1,g>12&&(u=b.parse(i));break}e.value>=12&&g>1&&(g+=12)}else g>e.maxValue&&(u=b.parse(i));if(Number.isNaN(g))return;const T=u!==0||$;T&&y(u),+`${g}0`>e.maxValue||x.length>=String(e.maxValue).length?(d.current="",T&&(o==null||o.focusNext())):d.current=x;break}}},F=f?{}:{"aria-label":e.type,"aria-valuetext":a?void 0:`${e.value}`,"aria-valuemin":e.minValue,"aria-valuemax":e.maxValue,"aria-valuenow":a?void 0:e.value,tabIndex:0,onKeyDown:D};return m.jsx("div",{...Z(t,{...F,onFocus:i=>{d.current="",i.target.scrollIntoView({block:"nearest"})},onClick:i=>{i.preventDefault(),i.stopPropagation()}}),className:"box-content cursor-default select-none whitespace-nowrap rounded p-2 text-center tabular-nums caret-transparent outline-none focus:bg-primary focus:text-on-primary",children:e.text.padStart(e.minLength,"0")})}function je({segment:e,domProps:t}){const s=Y();return m.jsx("div",{...t,onPointerDown:r=>{r.pointerType==="mouse"&&(r.preventDefault(),s!=null&&s.focusNext({from:r.target})||s==null||s.focusPrevious({from:r.target}))},"aria-hidden":!0,className:"min-w-4 cursor-default select-none",children:e.text})}function ke(e,t,s){switch(t){case"year":return{value:e.year,placeholder:"yyyy",minValue:1,maxValue:e.calendar.getYearsInEra(e)};case"month":return{value:e.month,placeholder:"mm",minValue:te(e),maxValue:e.calendar.getMonthsInYear(e)};case"day":return{value:e.day,minValue:ee(e),maxValue:e.calendar.getDaysInMonth(e),placeholder:"dd"}}if("hour"in e)switch(t){case"dayPeriod":return{value:e.hour>=12?12:0,minValue:0,maxValue:12,placeholder:"--"};case"hour":if(s.hour12){const r=e.hour>=12;return{value:e.hour,minValue:r?12:0,maxValue:r?23:11,placeholder:"--"}}return{value:e.hour,minValue:0,maxValue:23,placeholder:"--"};case"minute":return{value:e.minute,minValue:0,maxValue:59,placeholder:"--"}}return{}}function Le({segmentProps:e,state:t,value:s,onChange:r,isPlaceholder:a}){const{granularity:n,timezone:c}=t,l=P.useMemo(()=>{const o={year:"numeric",month:"numeric",day:"numeric",timeZone:c};return n==="minute"&&(o.hour="numeric",o.minute="numeric"),o},[n,c]),f=k(l),d=P.useMemo(()=>s.toDate(),[s]),h=P.useMemo(()=>f.formatToParts(d).map(o=>{const p=ke(s,o.type,f.resolvedOptions()),b=a&&o.type!=="literal"?p.placeholder:o.value;return{type:o.type,text:o.value===", "?" ":b,...p,minLength:o.type!=="literal"?String(p.maxValue).length:1}}),[d,f,a,s]);return m.jsx("div",{className:"flex items-center",children:h.map((o,p)=>o.type==="literal"?m.jsx(je,{domProps:e,segment:o},p):m.jsx(ve,{isPlaceholder:a,domProps:e,state:t,value:s,onChange:r,segment:o},p))})}const ze=se.forwardRef(({inputRef:e,wrapperProps:t,children:s,onBlur:r,...a},n)=>{const c=re(a),l=ae(n),{fieldProps:f,inputProps:d}=ie({...a,focusRef:l,labelElementType:"span"});return c.wrapper=N(c.wrapper,a.disabled&&"pointer-events-none"),m.jsx(ne,{wrapperProps:Z(t,{onBlur:h=>{var o;(o=l.current)!=null&&o.contains(h.relatedTarget)||r==null||r(h)},onClick:()=>{const h=oe(l);h==null||h.focusFirst()}}),fieldClassNames:c,ref:l,...f,children:m.jsx(ye,{inputProps:d,className:N(c.input,"gap-10"),ref:e,children:s})})});function Ve(e){return e instanceof le?"day":"minute"}function A(e,t,s){return t!=null&&e.compare(t)<0||s!=null&&e.compare(s)>0}function Fe({date:e,currentMonth:t,state:{dayIsActive:s,dayIsHighlighted:r,dayIsRangeStart:a,dayIsRangeEnd:n,getCellProps:c,timezone:l,min:f,max:d}}){const{localeCode:h}=I(),o=ce(e,h),p=s(e),b=r(e),y=a(e),S=n(e),v=ue(e,l),D=me(e,t),w=A(e,f,d);return m.jsxs("div",{role:"button","aria-disabled":w,className:N("relative isolate h-40 w-40 flex-shrink-0 text-sm",w&&"pointer-events-none text-disabled",!D&&"pointer-events-none invisible"),...c(e,D),children:[m.jsx("span",{className:N("absolute inset-0 z-10 flex h-full w-full cursor-pointer select-none items-center justify-center rounded-full",!p&&!v&&"hover:bg-hover",p&&"bg-primary font-semibold text-on-primary",v&&!p&&"bg-chip"),children:e.day}),b&&D&&m.jsx("span",{className:N("absolute inset-0 h-full w-full bg-primary/focus",(y||o===0||e.day===1)&&"rounded-l-full",(S||o===6||e.day===t.calendar.getDaysInMonth(t))&&"rounded-r-full")})]})}function Ie({startDate:e,state:t,isFirst:s,isLast:r}){const{localeCode:a}=I(),n=de(e,a),c=B(e,a);return m.jsxs("div",{className:"w-280 flex-shrink-0",children:[m.jsx(Ce,{isFirst:s,isLast:r,state:t,currentMonth:e}),m.jsxs("div",{className:"block",role:"grid",children:[m.jsx(Re,{state:t,startDate:e}),[...new Array(n).keys()].map(l=>m.jsx(fe.div,{className:"mb-6 flex",children:[...new Array(7).keys()].map(f=>m.jsx(Fe,{date:c.add({weeks:l,days:f}),currentMonth:e,state:t},f))},l))]})]})}function Ce({currentMonth:e,isFirst:t,isLast:s,state:{calendarDates:r,setCalendarDates:a,timezone:n,min:c,max:l}}){const f=p=>{let b;p==="forward"?b=r.map(y=>L(y.add({months:1}))):b=r.map(y=>L(y.subtract({months:1}))),a(b)},d=k({month:"long",year:"numeric",era:e.calendar.identifier!=="gregory"?"long":void 0,calendar:e.calendar.identifier}),h=A(e.subtract({days:1}),c,l),o=A(X(e.add({months:1})),c,l);return m.jsxs("div",{className:"flex items-center justify-between gap-10",children:[m.jsx(M,{size:"md",className:N("text-muted",!t&&"invisible"),disabled:!t||h,"aria-hidden":!t,onClick:()=>{f("backward")},children:m.jsx(pe,{})}),m.jsx("div",{className:"select-none text-sm font-semibold",children:d.format(e.toDate(n))}),m.jsx(M,{size:"md",className:N("text-muted",!s&&"invisible"),disabled:!s||o,"aria-hidden":!s,onClick:()=>{f("forward")},children:m.jsx(xe,{})})]})}function Re({state:{timezone:e},startDate:t}){const{localeCode:s}=I(),r=k({weekday:"short"}),a=B(t,s);return m.jsx("div",{className:"flex",children:[...new Array(7).keys()].map(n=>{const l=a.add({days:n}).toDate(e),f=r.format(l);return m.jsx("div",{className:"relative h-40 w-40 flex-shrink-0 text-sm font-semibold",children:m.jsx("div",{className:"absolute flex h-full w-full select-none items-center justify-center",children:f})},n)})})}function Ke({state:e,visibleMonths:t=1}){return U()&&(t=1),m.jsx(P.Fragment,{children:[...new Array(t).keys()].map(r=>{const a=he(X(e.calendarDates[r])),n=r===0,c=r===t-1;return m.jsx(Ie,{state:e,startDate:a,isFirst:n,isLast:c},r)})})}function H(e,t,s){try{return z(e,t,s)}catch{return z(e,"UTC",s)}}function We(e,t){const s=be(),r=t.timezone??s,[a,n]=P.useState(!1),c=t.closeDialogOnSelection??!0,l=t.granularity||Ve(e),f=t.min?H(t.min,r):void 0,d=t.max?H(t.max,r):void 0;return{timezone:r,granularity:l,min:f,max:d,calendarIsOpen:a,setCalendarIsOpen:n,closeDialogOnSelection:c}}export{Ke as C,ze as D,Le as a,H as t,We as u};
