import{a as j,b as v,c as w,j as e,d as i,L as y,C as S,r as d,K as N,e as h,D as I,f as D,T as A,B as L,h as z,i as k,U as C,k as K,O as f,l as T,E,m as _,s as B}from"./main-CUJEGI8U.js";import{D as U,a as F}from"./dashboard-layout-BZhWa9Ee.js";import{D as M}from"./dashboard-sidenav-BybmKPij.js";import{S as R}from"./section-helper-Dtpb8UEn.js";import{I as q}from"./Info-B2Ah6jS6.js";import{A as H}from"./admin-config-DTFkVWJm.js";import{D as b}from"./dashboard-layout-context-DeTNv3yG.js";import{K as O}from"./KeyboardArrowRight-CjTKdvdU.js";import{K as Q}from"./KeyboardArrowUp-8xF761W9.js";import"./Album-pwm22nnR.js";import"./Comment-vFUyF-gf.js";import"./FileUpload-CTBOdaGq.js";import"./Mic-DAPkQZuC.js";import"./PlaylistPlay-DcgxbGJx.js";import"./QueueMusic-CiX-EN5z.js";import"./Sell-D56iqjs7.js";function G(){return j({queryKey:["admin-site-alerts"],queryFn:()=>v.get("admin/site-alerts").then(t=>t.data)})}function J({className:t,isCompactMode:s=!1,matchDescendants:a,menuName:o,bottomContent:n,isOverlayMode:r,showToggleSidebarButton:l=!0,defaultIcons:c,customMenuRender:m}){const u=w();return e.jsxs("div",{className:i(t,"relative flex h-full w-full flex-col gap-20 overflow-y-auto overflow-x-hidden text-sm font-medium text-muted",r&&"border-r bg"),children:[e.jsxs("div",{className:i(s?"px-6 pt-6":"px-12 pt-24"),children:[e.jsx(y,{color:u?"light":"dark",logoType:s?"compact":"wide",className:s?"mx-auto mt-12":"mb-12 ml-10",size:s?"h-34 w-34":"h-36"}),l&&e.jsx(P,{})]}),e.jsx(S,{defaultIcons:c,matchDescendants:a,menu:o,orientation:"vertical",onlyShowIcons:s,iconSize:s?"md":"sm",gap:s?"gap-2":"gap-4",className:i("compact-scrollbar flex-auto overflow-y-auto overflow-x-hidden",s?"px-6":"px-12"),itemClassName:({isActive:x})=>g({isActive:x,isCompactMode:s}),children:m}),e.jsx("div",{className:i("mt-auto space-y-2 border-t pb-6 pt-16",s?"mx-auto px-6":"px-12"),children:n})]})}function P(){const{leftSidenavStatus:t,toggleLeftSidenavCompactMode:s,isMobileMode:a}=d.use(b);return a?null:e.jsx("button",{className:i("fixed bottom-180 z-10 flex select-none appearance-none items-center justify-center rounded-full border bg align-middle outline-none transition-[left,color,shadow] duration-200 hover:text-primary focus-visible:ring",t==="open"?"left-[212px]":"left-48"),onClick:()=>s(),children:t==="open"?e.jsx(N,{size:"sm"}):e.jsx(O,{size:"sm"})})}const V=d.forwardRef(({elementType:t="button",isCompact:s=!1,children:[a,o,...n],className:r,target:l,to:c,...m},u)=>{const x=t;return e.jsxs(x,{ref:u,...m,target:l,to:c,className:i(r,"flex",s?"gap-2":"gap-8",g({isActive:!1,isCompactMode:s})),children:[d.cloneElement(a,{size:s?"md":"sm"}),!s&&o,n]})});function g({isActive:t,isCompactMode:s}){return i("rounded-panel flex-shrink-0",s?"w-48 h-48 items-center justify-center":"w-full py-12 px-16 block justify-start",t?"bg-primary/6 text-primary font-semibold":"hover:bg-hover")}function W(t){const{isMobileMode:s,leftSidenavStatus:a}=d.useContext(b),o=!s&&a==="compact",n=e.jsxs(d.Fragment,{children:[e.jsx(X,{isCompact:o}),e.jsx(Y,{isCompact:o})]});return e.jsx(J,{...t,defaultIcons:H,matchDescendants:r=>r==="/admin",menuName:"admin-sidebar",bottomContent:n,showToggleSidebarButton:!1})}function X({isCompact:t}){const{user:s}=h(),a=!!(s!=null&&s.unread_notifications_count);return e.jsxs(I,{type:"popover",placement:"top",children:[e.jsxs(V,{isCompact:t,className:"relative",children:[e.jsx(D,{}),e.jsx(A,{message:"Notifications"}),a?e.jsx(L,{children:s==null?void 0:s.unread_notifications_count}):void 0]}),e.jsx(z,{settingsLink:null})]})}function Y({isCompact:t,avatar:s,accountSettingsLink:a}){const{user:o}=h();if(!o)return null;const n=s||C,r=e.jsx(n,{user:o,size:"w-32 h-32"});return e.jsx(k,{placement:"top",accountSettingsLink:a,children:t?e.jsx("button",{"aria-label":"toggle authentication menu",className:"flex h-48 w-48 items-center justify-center rounded-panel hover:bg-hover",children:r}):e.jsxs("button",{className:"flex w-full items-center rounded-panel px-12 py-8 hover:bg-hover",children:[r,e.jsx("span",{className:"ml-8 block min-w-0 overflow-x-hidden overflow-ellipsis whitespace-nowrap text-sm",children:o.name}),e.jsx(Q,{size:"xs",className:"ml-auto block"})]})})}function pe(){const s=K().some(a=>{var o;return(o=a.handle)==null?void 0:o.customDashboardLayout});return e.jsxs(U,{name:"admin",leftSidenavCanBeCompact:!0,className:"dashboard-layout-with-spacing",children:[e.jsx(M,{position:"left",size:"sm",children:e.jsx(W,{})}),s?e.jsxs(e.Fragment,{children:[e.jsx(p,{}),e.jsx(f,{})]}):e.jsx(F,{isScrollable:!0,stableScrollbar:!1,children:e.jsxs("div",{className:"dashboard-rounded-panel",children:[e.jsx(p,{}),e.jsx(f,{})]})})]})}function p(){const{data:t}=G(),[s]=T("dismissed-site-alerts",[]),a=t==null?void 0:t.alerts.filter(o=>!(s!=null&&s.some(n=>n.id===o.id&&Date.now()-n.timestamp<864e5)));return a!=null&&a.length?e.jsx("div",{className:"fixed bottom-24 right-24 z-10 mx-auto flex w-[742px] max-w-[calc(100%-48px)] flex-col gap-12",children:a.map(o=>e.jsx(Z,{alert:o},o.id))}):null}function Z({alert:t}){const s=e.jsx("div",{dangerouslySetInnerHTML:{__html:t.description}}),a=()=>{const n=_("dismissed-site-alerts")||[],r={id:t.id,timestamp:Date.now()},l=n.findIndex(c=>c.id===t.id);l===-1?n.push(r):n[l]=r,B("dismissed-site-alerts",n)},o=t.severity==="error"?e.jsx(E,{size:"xs",className:"text-danger"}):e.jsx(q,{size:"xs"});return e.jsx("div",{className:i("overflow-hidden rounded-panel bg shadow-lg"),children:e.jsx(R,{leadingIcon:o,onClose:()=>a(),title:t.title,description:s,color:t.severity==="error"?"danger":"neutral"},t.title)})}export{pe as Component};
