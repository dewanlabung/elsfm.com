import{j as t,at as j,r as n,cH as h,bo as k,a9 as P,v as T,T as p,c1 as C,ai as y}from"./main-CUJEGI8U.js";import{o as A,P as N,q as f}from"./share-media-button-Dw3JV4C-.js";import{O as I,A as v}from"./avatar-group-DBzfgZws.js";import{b as B,o as F}from"./offline-media-items-Dlxt2ETB.js";import{A as D}from"./album-image-CkUJpPZs.js";import{u as S}from"./use-album-permissions-_OgAnUnz.js";import{g as L}from"./artist-link-XkkvBaYk.js";import{B as M}from"./bullet-separated-items-DSt8aXIS.js";import{M as q,a as d}from"./media-page-header-layout-B2pd5UBI.js";import{P as w}from"./player-page-header-gradient-B98PHS1w.js";import{P as E}from"./player-page-suspsense-nQjKTdHX.js";import{u as _,T as G,C as H}from"./truncated-description-C-aw2Igq.js";import{C as O,b as $,T as Q}from"./comment-bar-new-comment-form-CyGo8E79.js";import{T as R}from"./track-table-CY1bAvY-.js";import{A as l}from"./ad-host-3MKQnMjM.js";import{P as z}from"./page-meta-tags-CEAowLoU.js";import{u as g}from"./use-required-params-Cp5Jywbp.js";import{u as V}from"./use-sortable-table-data-wSD3nGow.js";import{u as J}from"./useSuspenseQuery-13TuSADp.js";import{C as K}from"./chip-list-D0uDB84E.js";import{F as U}from"./formatted-date-DzIPJwiH.js";import{F as W}from"./formatted-duration-2_MIaPa4.js";import"./play-arrow-filled-BrHo1wfG.js";import"./use-player-store-BWFGgN3k.js";import"./is-ctrl-or-shift-pressed-Bx-mqgCW.js";import"./middleware-BLXTWOs6.js";import"./traditional-BcYcLesO.js";import"./Pause-B4fj-x54.js";import"./create-playlist-dialog-DeyZkjsM.js";import"./image-selector-GLpYAkj6.js";import"./file-upload-provider-DWaB2xE4.js";import"./uploaded-file-ksxfN_l-.js";import"./extension-from-filename-O0XMuZye.js";import"./pretty-bytes-bO14ePu9.js";import"./use-active-upload-BwzDBsep.js";import"./open-upload-window-CboR35vP.js";import"./AddAPhoto-y5pGVyq2.js";import"./file-input-config-DrcTpI3-.js";import"./switch-4KDjemPX.js";import"./Image-DWFqsH18.js";import"./dialog-footer-jZcc-BBM.js";import"./use-auth-click-capture-B9wu-BP4.js";import"./Add-B3RL66ee.js";import"./KeyboardArrowRight-CjTKdvdU.js";import"./FavoriteBorder-D1CUmnAo.js";import"./use-previous-BgqS7ski.js";import"./album-link-DwfnHHp7.js";import"./small-artist-image-BqXmK0zy.js";import"./Mic-DAPkQZuC.js";import"./playlist-image-zogte8rn.js";import"./PlaylistPlay-DcgxbGJx.js";import"./playlist-link-CLw6NzkW.js";import"./share-media-buttons-DtF-m4-I.js";import"./Share-C8wHCu8Q.js";import"./track-image-B3DSRXTB.js";import"./MusicNote-SjrQa4Nt.js";import"./track-link-D8mIwI0F.js";import"./tabs-BVjOaE7L.js";import"./tab-panels-BNEb_18b.js";import"./use-clipboard-CQvDhy4G.js";import"./add-to-queue-menu-button-AYv4MHMe.js";import"./check-circle-filled-BwqtgJPU.js";import"./Download-rbsKggzM.js";import"./Album-pwm22nnR.js";import"./external-link-jlnQ3iTs.js";import"./use-delete-comments-Gq9uGbac.js";import"./Reply-CVpUZh9g.js";import"./formatted-number-gsF1qEbc.js";import"./MoreVert-BiULonS7.js";import"./confirmation-dialog-DVMbD2S1.js";import"./infinite-scroll-sentinel-Br7e5Kqx.js";import"./use-flat-infinite-query-items-3ilhvvhN.js";import"./useSuspenseInfiniteQuery-Vh8v-EaZ.js";import"./infiniteQueryObserver-CQEL_EnT.js";import"./Comment-vFUyF-gf.js";import"./skeleton-BmWW5Jc-.js";import"./use-linkified-string-DMs78B9_.js";import"./linkify-Cbuu_PPG.js";import"./album-context-dialog-C5eIuCxr.js";import"./use-delete-album-VPJfiJbG.js";import"./artist-links-YW81uP4U.js";import"./toggle-in-library-menu-button-CqmQ1GOD.js";import"./toggle-repost-menu-button-DAsBpr-F.js";import"./Repeat-DTFydNM6.js";import"./track-context-dialog-DU1dwrB2.js";import"./use-should-show-radio-button-CEtJUckB.js";import"./use-track-permissions-ChTh4jJA.js";import"./download-file-from-url-BVaKcxRP.js";import"./MoreHoriz-RUUnngeG.js";import"./table-CgoYghfp.js";import"./checkbox-suk8vW77.js";import"./CheckBoxOutlineBlank-BgWeDdny.js";import"./ArrowDownward-BHYKFIfy.js";import"./useInteractOutside-BFJZ3Z5N.js";import"./useEffectEvent-pADbdn7r.js";import"./use-pointer-events-DcvSqvAc.js";import"./useGlobalListeners-BeXr-yG1.js";import"./entitiy-offline-indicator-icon-B5v2rY9X.js";import"./like-icon-button-ppQBH-Cs.js";import"./Schedule-D2nn-qO3.js";import"./TrendingUp-hWFiGDg8.js";import"./getScrollParent--OCc5gFh.js";import"./default-meta-tags-Cim_8kSD.js";import"./sort-array-of-objects-OJAulda_.js";import"./use-date-formatter-m8TmZzOM.js";import"./DateFormatter-Dix9bfnP.js";import"./use-current-date-time-BhbL04rR.js";function re(){return t.jsx(E,{offlineFallback:t.jsx(tt,{}),children:t.jsx(X,{})})}function X(){const{albumId:r}=g(["albumId"]),e=J(j.albums.get(r,"albumPage"));return t.jsx(x,{data:e.data})}function x({data:r}){var o;const{canEdit:e}=S(r.album),{canView:m,canCreate:s}=_();return t.jsxs(t.Fragment,{children:[t.jsx(z,{data:r}),r.album.image&&t.jsx(w,{image:r.album.image}),t.jsxs("div",{className:"relative",children:[t.jsxs(O,{children:[t.jsx(l,{slot:"general_top",className:"mb-44"}),t.jsx(Z,{album:r.album}),s?t.jsx($,{className:"mb-16",commentable:r.album}):null]}),(o=r.album.tags)!=null&&o.length?t.jsx(k,{children:t.jsx(K,{className:"mb-16",selectable:!0,children:r.album.tags.map(a=>t.jsxs(P,{elementType:T,to:`/tag/${a.name}`,children:["#",a.display_name||a.name]},a.id))})}):null,t.jsx(G,{description:r.album.description,className:"mt-24 text-sm"}),t.jsx(l,{slot:"album_above",className:"mt-34"}),t.jsx(Y,{album:r.album}),m&&t.jsx(H,{className:"mt-34",commentable:r.album,canDeleteAllComments:e}),t.jsx(l,{slot:"general_bottom",className:"mt-44"})]})]})}function Y({album:r}){var o;const{data:e,sortDescriptor:m,onSortChange:s}=V(r.tracks);return t.jsxs("div",{className:"mt-44",children:[t.jsx(R,{queueGroupId:f(r),tracks:e,sortDescriptor:m,onSortChange:s,hideTrackImage:!0,hideAlbum:!0,hidePopularity:!1}),(o=r.tracks)!=null&&o.length?null:t.jsx(y,{className:"mt-34",title:t.jsx(p,{message:"Nothing to display"}),description:t.jsx(p,{message:"This album does not have any tracks yet"})})]})}function Z({album:r}){var m,s,o,a,u,c;const e=(m=r.tracks)==null?void 0:m.reduce((i,b)=>i+(b.duration||0),0);return t.jsx(n.Fragment,{children:t.jsx(q,{centerItems:!0,image:t.jsx(D,{album:r,className:"rounded-panel"}),title:r.name,subtitle:t.jsx(v,{children:(s=r.artists)==null?void 0:s.map(i=>t.jsx(C,{circle:!0,src:i.image_small,label:i.name,link:L(i)},i.id))}),description:t.jsxs(M,{className:"text-sm text-muted",children:[(o=r.tracks)!=null&&o.length?t.jsx(p,{message:"[one 1 track|other :count tracks]",values:{count:r.tracks.length}}):null,(a=r.tracks)!=null&&a.length?t.jsx(W,{ms:e,verbose:!0}):null,t.jsx(U,{date:r.release_date})]}),actionsBar:t.jsxs(Q,{item:r,managesItem:!1,buttonGap:void 0,buttonSize:"sm",buttonClassName:d(),children:[t.jsx(N,{disabled:!((u=r.tracks)!=null&&u.length),buttonType:"text",queueId:f(r),className:d({isFirst:!0})}),t.jsx(I,{className:"mr-8",item:r,totalTracksCount:((c=r.tracks)==null?void 0:c.length)??0})]})})})}function tt(){const[r,e]=n.useState(null),[m,s]=n.useState(!0),{albumId:o}=g(["albumId"]);return n.useEffect(()=>{rt(+o).then(e).finally(()=>s(!1))},[o]),r?t.jsx(x,{data:r}):m?null:t.jsx(h,{})}async function rt(r){if(!A().offlinedAlbumIds.has(r))return null;const e=await B.getAlbumById(r),m=e==null?void 0:e.data;if(!m)return null;const s=await F.getTracksOfflinedBy(m);return s.length?{loader:"albumPage",album:{...m,tracks:s.map(o=>o.data)}}:null}export{re as Component};
