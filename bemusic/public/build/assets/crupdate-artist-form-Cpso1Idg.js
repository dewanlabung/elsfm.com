import{P as y,j as e,T as a,t as j,v as g,ai as v,aj as N,W as c,D as w,an as I,av as T,a3 as p,z as F,r as h,V as i,J as k,Z as A,u as D}from"./main-CUJEGI8U.js";import{G as S}from"./music-Bh2SQVZ2.js";import{A as C}from"./album-image-CkUJpPZs.js";import{A as _}from"./album-link-DwfnHHp7.js";import{u as P}from"./use-delete-album-VPJfiJbG.js";import{T as z}from"./table-CgoYghfp.js";import{u as L}from"./use-sortable-table-data-wSD3nGow.js";import{F as M}from"./formatted-date-DzIPJwiH.js";import{F as x}from"./formatted-number-gsF1qEbc.js";import{A as f}from"./Add-B3RL66ee.js";import{E as B}from"./Edit-BRVJ8AkN.js";import{C as E}from"./confirmation-dialog-DVMbD2S1.js";import{I as G}from"./info-dialog-trigger-icon-DFoUSLJK.js";import{P as R}from"./profile-links-form-D9bVZwzy.js";import{G as q}from"./genre-B_3ZyEC1.js";import{F as V}from"./form-normalized-model-chip-field-R33Z1aXc.js";import{F as b}from"./image-selector-GLpYAkj6.js";import{F as $}from"./file-upload-provider-DWaB2xE4.js";import{F as u}from"./switch-4KDjemPX.js";import{T as H,a as U,b as m}from"./tabs-BVjOaE7L.js";import{T as J,a as o}from"./tab-panels-BNEb_18b.js";const O=[{key:"name",allowsSorting:!0,header:()=>e.jsx(a,{message:"Name"}),visibleInMode:"all",width:"flex-3",body:s=>e.jsxs("div",{className:"flex items-center gap-12",children:[e.jsx(C,{album:s,className:"flex-shrink-0",size:"w-34 h-34 rounded"}),e.jsx(_,{album:s,target:"_blank"})]})},{key:"release_date",allowsSorting:!0,header:()=>e.jsx(a,{message:"Release date"}),body:s=>s.release_date?e.jsx(M,{date:s.release_date}):null},{key:"track_count",allowsSorting:!1,header:()=>e.jsx(a,{message:"Track count"}),body:s=>s.tracks_count?e.jsx(x,{value:s.tracks_count}):null},{key:"plays",allowsSorting:!0,header:()=>e.jsx(a,{message:"Plays"}),body:s=>s.plays?e.jsx(x,{value:s.plays}):null},{key:"actions",header:()=>e.jsx(a,{message:"Actions"}),width:"w-84 flex-shrink-0",visibleInMode:"all",hideHeader:!0,align:"end",body:s=>e.jsx(W,{album:s})}];function Q({albums:s=[]}){const{watch:t}=y(),r=t("id"),{data:n,sortDescriptor:l,onSortChange:d}=L(s);return e.jsxs("div",{children:[e.jsxs("div",{className:"my-24",children:[e.jsxs("div",{className:"flex items-center gap-12",children:[e.jsx("h2",{className:"text-xl font-semibold",children:e.jsx(a,{message:"Albums"})}),e.jsx(j,{variant:"outline",color:"primary",size:"xs",className:"ml-auto",startIcon:e.jsx(f,{}),elementType:r?g:void 0,to:`../../../albums/new?artistId=${r}`,relative:"path",disabled:!r,children:e.jsx(a,{message:"Add album"})})]}),!r&&e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsx(G,{viewBox:"0 0 16 16",size:"xs",className:"text-muted"}),e.jsx(a,{message:"Save changes to enable album creation."})]})]}),e.jsx(z,{columns:O,data:s,sortDescriptor:l,onSortChange:d,enableSelection:!1}),n.length?null:e.jsx(v,{className:"mt-40",image:e.jsx(N,{src:S}),title:e.jsx(a,{message:"This artist does not have any albums yet"})})]})}function W({album:s}){const t=P();return e.jsxs("div",{className:"text-muted",children:[e.jsx(g,{to:`../../../albums/${s.id}/edit`,relative:"path",children:e.jsx(c,{size:"md",children:e.jsx(B,{})})}),e.jsxs(w,{type:"modal",onClose:r=>{r&&t.mutate({albumId:s.id})},children:[e.jsx(c,{size:"md",disabled:t.isPending,children:e.jsx(I,{})}),e.jsx(E,{isDanger:!0,title:e.jsx(a,{message:"Delete album"}),body:e.jsx(a,{message:"Are you sure you want to delete this album?"}),confirm:e.jsx(a,{message:"Delete"})})]})]})}function ve({albums:s,showExternalFields:t}){const r=T();return e.jsxs($,{children:[e.jsxs("div",{className:"gap-24 md:flex",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx(b,{name:"image_small",uploadType:p.artwork,label:r?e.jsx(a,{message:"Image"}):null,variant:r?"input":"square",previewSize:r?void 0:"w-full md:w-224 aspect-square",stretchPreview:!0}),t&&e.jsxs(e.Fragment,{children:[e.jsx(u,{name:"verified",className:"mt-14",children:e.jsx(a,{message:"Verified"})}),e.jsx(u,{name:"disabled",className:"mt-14",children:e.jsx(a,{message:"Hidden"})})]})]}),e.jsx("div",{className:"mt-24 flex-auto md:mt-0",children:e.jsxs(H,{isLazy:!0,children:[e.jsxs(U,{children:[e.jsx(m,{children:e.jsx(a,{message:"Details"})}),e.jsx(m,{children:e.jsx(a,{message:"Links"})}),e.jsx(m,{children:e.jsx(a,{message:"Biography"})}),e.jsx(m,{children:e.jsx(a,{message:"Images"})})]}),e.jsxs(J,{className:"pt-20",children:[e.jsx(o,{children:e.jsx(Z,{showExternalFields:t})}),e.jsx(o,{children:e.jsx(R,{})}),e.jsx(o,{children:e.jsx(K,{})}),e.jsx(o,{children:e.jsx(X,{})})]})]})})]}),e.jsx(Q,{albums:s})]})}function Z({showExternalFields:s}){const{trans:t}=F();return e.jsxs(h.Fragment,{children:[e.jsx(i,{name:"name",label:e.jsx(a,{message:"Name"}),className:"mb-24",required:!0,autoFocus:!0,disabled:!s}),e.jsx(V,{label:e.jsx(a,{message:"Genres"}),placeholder:t(k("+Add genre")),model:q,name:"genres",allowCustomValue:!0,className:"mb-24"}),s&&e.jsx(Y,{})]})}function K(){return e.jsxs(h.Fragment,{children:[e.jsx(i,{name:"profile.country",label:e.jsx(a,{message:"Country"}),className:"mb-24"}),e.jsx(i,{name:"profile.city",label:e.jsx(a,{message:"City"}),className:"mb-24"}),e.jsx(i,{inputElementType:"textarea",rows:5,name:"profile.description",label:e.jsx(a,{message:"Description"}),className:"mb-24"})]})}function X(){const{fields:s,append:t,remove:r}=A({name:"profile_images"});return e.jsxs("div",{children:[e.jsx("div",{className:"mb-24 flex flex-wrap gap-12",children:s.map((n,l)=>e.jsx(b,{name:`profile_images.${l}.url`,uploadType:p.artwork,variant:"square",previewSize:"w-160 h-160",stretchPreview:!0,showRemoveButton:!0,onChange:d=>{d||r(l)}},n.id))}),e.jsx(j,{variant:"outline",color:"primary",startIcon:e.jsx(f,{}),onClick:()=>{t({url:""})},children:e.jsx(a,{message:"Add another image"})})]})}function Y(){const{spotify_is_setup:s}=D();return s?e.jsx(i,{name:"spotify_id",label:e.jsx(a,{message:"Spotify ID"}),className:"mb-24",minLength:22,maxLength:22}):null}export{ve as C};
