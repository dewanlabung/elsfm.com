import{a as L,b as P,P as R,b7 as Q,j as e,r as I,aP as B,z as J,ba as K,d as A,A as W,Q as D,c1 as E,J as y,o as M,p as V,a8 as k,W as G,T as H}from"./main-CUJEGI8U.js";import{u as O}from"./use-normalized-models-ClA2DWxP.js";import{S as U}from"./select-Z9R0wV6S.js";import{E as X}from"./Edit-BRVJ8AkN.js";import{S as f}from"./skeleton-BmWW5Jc-.js";function Y(s,t,n){return L({queryKey:[s,t],queryFn:()=>Z(s,t),...n})}async function Z(s,t){return P.get(s,{params:t}).then(n=>n.data)}function _({label:s,className:t,background:n,value:l,defaultValue:r="",placeholder:a=y("Select item..."),searchPlaceholder:o=y("Find an item..."),onChange:c,description:d,errorMessage:u,invalid:j,autoFocus:$,queryParams:p,endpoint:g,disabled:v,required:T,size:q}){var w;const x=I.useRef(null),[N,C]=I.useState(""),[h,S]=B(l,r,c),F=O(g,{query:N,...p}),{trans:z}=J(),m=K({size:q,background:n});return h?e.jsxs("div",{className:t,children:[s&&e.jsx("div",{className:m.label,children:s}),e.jsx("div",{className:A(m.input,j&&"border-danger"),children:e.jsx(W,{initial:!1,mode:"wait",children:e.jsx(ee,{disabled:v,endpoint:g,className:m.input,modelId:h,queryParams:p,onEditClick:()=>{S(""),C(""),requestAnimationFrame(()=>{var i,b;(i=x.current)==null||i.focus(),(b=x.current)==null||b.click()})}})})}),d&&!u&&e.jsx("div",{className:m.description,children:d}),u&&e.jsx("div",{className:m.error,children:u})]}):e.jsx(U,{className:t,showSearchField:!0,invalid:j,errorMessage:u,description:d,color:"white",isAsync:!0,background:n,placeholder:z(a),searchPlaceholder:z(o),label:s,isLoading:F.isFetching,items:(w=F.data)==null?void 0:w.results,inputValue:N,onInputValueChange:C,selectionMode:"single",selectedValue:h,onSelectionChange:S,ref:x,autoFocus:$,disabled:v,required:T,children:i=>e.jsx(D,{value:i.id,description:i.description,startIcon:e.jsx(E,{src:i.image,size:"sm",label:i.name}),children:i.name},i.id)})}function ee({modelId:s,onEditClick:t,endpoint:n,disabled:l,queryParams:r}){const{data:a,isLoading:o}=Y(`${n}/${s}`,r);return o||!(a!=null&&a.model)?e.jsx(se,{},"skeleton"):e.jsxs(M.div,{className:A("flex h-full items-center gap-8",l&&"pointer-events-none cursor-not-allowed text-disabled"),...V,children:[e.jsx(E,{src:a.model.image,label:a.model.name,size:"sm"}),e.jsx("div",{children:e.jsx(k,{label:a.model.description??a.model.name??"",children:e.jsx("div",{className:"text-sm leading-4",children:a.model.name})})}),e.jsx(k,{label:e.jsx(H,{message:"Change item"}),children:e.jsx(G,{className:"ml-auto text-muted",size:"sm",onClick:t,disabled:l,children:e.jsx(X,{})})})]},"preview")}function se(){return e.jsxs(M.div,{className:"flex h-full items-center gap-8",...V,children:[e.jsx(f,{variant:"rect",size:"w-24 h-24 flex-shrink-0"}),e.jsx(f,{className:"max-w-100 text-xs"}),e.jsx(f,{variant:"icon",size:"w-24 h-24",className:"ml-auto"})]})}function re({name:s,size:t,...n}){const{clearErrors:l}=R(),{field:{onChange:r,value:a=""},fieldState:{invalid:o,error:c}}=Q({name:s});return e.jsx(_,{size:t,value:a,onChange:d=>{r(d),l(s)},invalid:o,errorMessage:c==null?void 0:c.message,...n})}export{re as F,Y as u};
