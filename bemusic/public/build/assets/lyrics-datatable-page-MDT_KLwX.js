import{J as n,r as p,at as u,j as e,S as j,T as a,ab as y,D as c,t as b,W as D,$ as f,G as k,H as w,b as S,aa as T,I as C}from"./main-CUJEGI8U.js";import{C as L,U as P}from"./update-lyric-dialog-ChCRi6lM.js";import{c as A,u as v}from"./timestamp-filters-DydeeDDl.js";import{A as I}from"./album-link-DwfnHHp7.js";import{A as F}from"./artist-links-YW81uP4U.js";import{T as E}from"./track-image-B3DSRXTB.js";import{T as H}from"./track-link-D8mIwI0F.js";import{u as B,a as N,G as q,D as M,b as Q,c as _}from"./use-datatable-query-D9uebfzx.js";import{D as G}from"./data-table-add-item-button-_qDHIKil.js";import{D as R}from"./datatable-filters-DFYg3QEK.js";import{a as U,D as W,b as z,c as K}from"./datatable-page-with-header-layout-C4e5sJMc.js";import{T as V}from"./table-CgoYghfp.js";import{F as $}from"./formatted-date-DzIPJwiH.js";import{E as J}from"./Edit-BRVJ8AkN.js";import{C as X}from"./confirmation-dialog-DVMbD2S1.js";import"./dialog-footer-jZcc-BBM.js";import"./paginated-resources-BDxg6DLi.js";import"./switch-4KDjemPX.js";import"./normalized-model-field-8T9JWy8W.js";import"./use-normalized-models-ClA2DWxP.js";import"./select-Z9R0wV6S.js";import"./combobox-end-adornment-B0xReOuL.js";import"./skeleton-BmWW5Jc-.js";import"./use-date-range-picker-state-CSWp3d1-.js";import"./list-C96mDrnJ.js";import"./use-date-formatter-m8TmZzOM.js";import"./DateFormatter-Dix9bfnP.js";import"./ArrowRightAlt-iO8zeT1U.js";import"./is-tablet-media-query-DhMPnSWn.js";import"./use-base-date-picker-state-DaWG2IMs.js";import"./input-DAWJLQiY.js";import"./KeyboardArrowRight-CjTKdvdU.js";import"./use-current-date-time-BhbL04rR.js";import"./formatted-number-gsF1qEbc.js";import"./artist-link-XkkvBaYk.js";import"./MusicNote-SjrQa4Nt.js";import"./FilterAlt-Cw-mRuQp.js";import"./form-normalized-model-chip-field-R33Z1aXc.js";import"./form-chip-field-ehb7ckkp.js";import"./chip-list-D0uDB84E.js";import"./accordion-BALGWyw-.js";import"./checkbox-suk8vW77.js";import"./CheckBoxOutlineBlank-BgWeDdny.js";import"./DateRange-Bhvye4F9.js";import"./Add-B3RL66ee.js";import"./dashboard-layout-context-DeTNv3yG.js";import"./ArrowDownward-BHYKFIfy.js";import"./useInteractOutside-BFJZ3Z5N.js";import"./useEffectEvent-pADbdn7r.js";import"./is-ctrl-or-shift-pressed-Bx-mqgCW.js";import"./use-pointer-events-DcvSqvAc.js";import"./useGlobalListeners-BeXr-yG1.js";const d=[A({description:n("Date lyric was created")}),v({description:n("Date lyric was last updated")})],O=""+new URL("source-code-BmXy6VbC.svg",import.meta.url).href,Y=[{key:"track_id",allowsSorting:!0,header:()=>e.jsx(a,{message:"Track"}),width:"flex-3 min-w-200",visibleInMode:"all",body:t=>{var s;return t.track?e.jsxs("div",{className:"flex items-center gap-12",children:[e.jsx(E,{track:t.track,className:"flex-shrink-0 rounded",size:"w-34 h-34"}),e.jsxs("div",{children:[e.jsx(H,{track:t.track,target:"_blank"}),e.jsx(F,{className:"text-muted",artists:(s=t.track)==null?void 0:s.artists})]})]}):null}},{key:"album",width:"flex-2",header:()=>e.jsx(a,{message:"Album"}),body:t=>{var s;return(s=t.track)!=null&&s.album?e.jsx(I,{album:t.track.album}):null}},{key:"updated_at",allowsSorting:!0,width:"w-100",header:()=>e.jsx(a,{message:"Last updated"}),body:t=>e.jsx($,{date:t.updated_at})},{key:"actions",header:()=>e.jsx(a,{message:"Actions"}),hideHeader:!0,align:"end",visibleInMode:"all",width:"w-42 flex-shrink-0",body:t=>e.jsxs(c,{type:"modal",children:[e.jsx(D,{size:"md",className:"text-muted",children:e.jsx(J,{})}),e.jsx(P,{lyric:t})]})}];function Ze(){const[t,s]=p.useState([]),{searchParams:i,sortDescriptor:o,mergeIntoSearchParams:r,setSearchQuery:g,isFiltering:x}=B(y),l=N(u.lyrics.index({...i,with:"track.album.artists"})),h=e.jsxs(c,{type:"modal",children:[e.jsx(b,{variant:"flat",color:"danger",children:e.jsx(a,{message:"Delete"})}),e.jsx(ee,{selectedIds:t,onDelete:()=>s([])})]});return e.jsxs(U,{children:[e.jsx(q,{query:l}),e.jsx(j,{children:e.jsx(a,{message:"Lyrics"})}),e.jsx(W,{title:e.jsx(a,{message:"Lyrics"}),showSidebarToggleButton:!0}),e.jsxs(z,{children:[e.jsx(M,{searchValue:i.query,onSearchChange:g,actions:e.jsx(Z,{}),selectedItems:t,selectedActions:h,filters:d}),e.jsx(R,{filters:d}),e.jsxs(K,{children:[e.jsx(V,{columns:Y,data:l.items,sortDescriptor:o,onSortChange:r,enableSelection:!0,selectedRows:t,onSelectionChange:s,cellHeight:"h-54"}),l.isEmpty&&e.jsx(Q,{isFiltering:x,image:O,title:e.jsx(a,{message:"No lyrics have been created yet"}),filteringTitle:e.jsx(a,{message:"No matching lyrics"})}),e.jsx(_,{query:l,onPageChange:m=>r({page:m}),onPerPageChange:m=>r({perPage:m})})]})]})]})}function Z(){return e.jsx(p.Fragment,{children:e.jsxs(c,{type:"modal",children:[e.jsx(G,{children:e.jsx(a,{message:"Add new lyric"})}),e.jsx(L,{})]})})}function ee({selectedIds:t,onDelete:s}){const{close:i}=f(),o=k({mutationFn:()=>S.delete(`lyrics/${t.join(",")}`),onSuccess:async()=>{await T.invalidateQueries({queryKey:u.lyrics.invalidateKey}),C(n("Lyrics deleted")),s(),i()},onError:r=>w(r)});return e.jsx(X,{isDanger:!0,isLoading:o.isPending,title:e.jsx(a,{message:"Delete lyrics"}),body:e.jsx(a,{message:"Are you sure you want to delete selected lyrics?",values:{count:t.length}}),confirm:e.jsx(a,{message:"Delete"}),onConfirm:()=>o.mutate()})}export{Ze as Component};
