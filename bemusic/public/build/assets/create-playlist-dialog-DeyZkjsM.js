import{z as u,j as e,r as p,a3 as x,V as o,T as s,J as m,G as j,ag as y,b as g,I as h,aa as b,at as F,$ as f,M as v,a0 as C,a1 as P,a2 as w,as as D,t as l}from"./main-CUJEGI8U.js";import{F as I}from"./image-selector-GLpYAkj6.js";import{F as N}from"./file-upload-provider-DWaB2xE4.js";import{F as n}from"./switch-4KDjemPX.js";import{I as T}from"./Image-DWFqsH18.js";import{D as E}from"./dialog-footer-jZcc-BBM.js";function S(){const{trans:a}=u();return e.jsxs(p.Fragment,{children:[e.jsxs("div",{className:"gap-28 md:flex",children:[e.jsx(N,{children:e.jsx(I,{name:"image",uploadType:x.artwork,variant:"square",previewSize:"w-160 h-160",className:"mb-24 md:mb-0",placeholderIcon:e.jsx(T,{}),showRemoveButton:!0,stretchPreview:!0})}),e.jsxs("div",{className:"mb-34 flex-auto",children:[e.jsx(o,{autoFocus:!0,name:"name",label:e.jsx(s,{message:"Name"}),className:"mb-24"}),e.jsx(n,{name:"collaborative",description:e.jsx(s,{message:"Invite other users to add tracks."}),className:"mb-24",children:e.jsx(s,{message:"Collaborative"})}),e.jsx(n,{name:"public",description:e.jsx(s,{message:"Everyone can see public playlists."}),children:e.jsx(s,{message:"Public"})})]})]}),e.jsx(o,{name:"description",label:e.jsx(s,{message:"Description"}),inputElementType:"textarea",rows:4,placeholder:a(m("Give your playlist a catchy description."))})]})}function k(a){return j({mutationFn:r=>g.post("playlists",r).then(t=>t.data),onSuccess:()=>{h(m("Playlist created")),b.invalidateQueries({queryKey:F.playlists.invalidateKey})},onError:r=>y(r,a)})}function M(){const{close:a,formId:r}=f(),t=v(),i=k(t);return e.jsxs(C,{size:"xl",children:[e.jsx(P,{children:e.jsx(s,{message:"New playlist"})}),e.jsx(w,{children:e.jsx(D,{id:r,form:t,onSubmit:c=>{i.mutate(c,{onSuccess:d=>{a(d.playlist)}})},children:e.jsx(S,{})})}),e.jsxs(E,{children:[e.jsx(l,{onClick:()=>a(),children:e.jsx(s,{message:"Cancel"})}),e.jsx(l,{form:r,type:"submit",variant:"flat",color:"primary",disabled:i.isPending,children:e.jsx(s,{message:"Create"})})]})]})}export{M as C,S as a};
