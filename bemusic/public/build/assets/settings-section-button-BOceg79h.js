import{j as e,d as x,J as p,r as d,T as m,a4 as S,t as N,bX as b,a5 as P,Q as C,aa as I,bx as k,u as R,W as $,bY as H}from"./main-CUJEGI8U.js";import{S as M,a as O,u,b as B,s as T}from"./settings-layout-KPbHCtKd.js";import{C as W,O as E}from"./OpenInFull-D-qHNzAi.js";const j={real:{label:p("Actual size (100%)"),width:null},desktop:{label:p("Desktop"),width:1440},tablet:{label:p("Tablet"),width:768},mobile:{label:p("Mobile"),width:390}};function v({title:t,children:n,gridCols:s,allowNavigation:a,defaultRoute:i,availableRoutes:o,docsLink:l}){return e.jsx(M,{defaultRoute:i,availableRoutes:o,children:e.jsx(A,{children:e.jsxs("div",{className:x("grid h-full flex-auto grid-rows-[auto,auto,1fr] bg-elevated md:rounded-panel md:border",s??"grid-cols-1 @5xl/with-preview:grid-cols-[auto,1fr]"),children:[e.jsx(O,{className:"col-span-full row-[1/2]",title:t,allowNavigation:a,docsLink:l}),n[0],n[1]]})})})}function A({children:t}){const n=u(s=>s.isFullScreen);return e.jsx("section",{className:x("dashboard-grid-content h-full overflow-y-auto @container/with-preview",n&&"fixed inset-8"),children:t})}function D({children:t,width:n}){return e.jsx("div",{className:x("compact-scrollbar col-[1/2] row-[2/-1] h-full flex-shrink-0 overflow-y-auto p-24 @container/settings-form",n??"w-full @5xl/with-preview:w-440"),children:t})}function V({form:t,children:n,mergePreviewSettings:s}){const a=u(i=>i.preview.setValues);return d.useEffect(()=>{const i=I.getQueryData(k.settings.index.queryKey);i&&a(i,{merge:s});const o=t.watch(l=>{a(l,{merge:s})});return()=>o.unsubscribe()},[t,a]),e.jsx(B,{form:t,children:n})}function Q(){const[t,n]=d.useState("desktop"),[s,a]=d.useState({width:0,height:0}),i=j[t].width,o=u(c=>c.setIframeWindow),[l,r]=d.useState(0),[h,y]=d.useState(1);d.useEffect(()=>{if(!s)return;const c=i?Math.min(s.width/i,1):1,w=s.height/c;r(w);const g=i?Math.min(s.width/i,1):1;y(g)},[i,s]);const f=U(),z=d.useCallback(c=>{if(!c)return;const w=new ResizeObserver(g=>{a(g[0].contentRect)});return w.observe(c),()=>{w.disconnect()}},[]);return e.jsx("div",{className:"col-[2/-1] row-[2/-1] hidden grid-rows-subgrid border-l @5xl/with-preview:grid",children:f?e.jsxs(d.Fragment,{children:[e.jsx(F,{size:t,onSizeChange:n}),e.jsxs("div",{className:"col-[1/-1] row-[2/-1] mx-24 mb-24 flex flex-col overflow-hidden rounded-panel border",children:[e.jsx(L,{src:f}),e.jsx("div",{ref:z,className:"height-container relative flex-auto bg-alt",children:e.jsx("div",{className:"absolute left-0 right-0 mx-auto origin-top-left bg",style:{width:i?`${i}px`:"100%",height:l?`${l}px`:"100%",transform:`scale(${h})`},children:e.jsx("iframe",{src:f,className:"h-full w-full shadow",ref:c=>o((c==null?void 0:c.contentWindow)??null)})})})]})]}):e.jsx("div",{className:"col-[1/-1] row-[2/-1] m-auto rounded-panel border px-28 py-14",children:e.jsx(m,{message:"No preview available"})})})}function U(){const{base_url:t}=R(),n=u(a=>a.previewRoute);if(n==null)return null;const s=new URL(`${t}/${n.replace(/^\//,"")}`);return s.searchParams.set("settingsPreview","true"),s.toString()}function F({size:t,onSizeChange:n,padding:s,className:a}){const i=u(r=>r.setPreviewRoute),o=u(r=>r.previewRoute),l=Object.values(u(r=>r.availableRoutes));return e.jsxs("div",{className:x("col-[1/-1] row-[1/2] flex items-center gap-12",s??"px-24 pb-12 pt-24",a),children:[!!(l!=null&&l.length)&&e.jsxs(S,{selectionMode:"single",selectedValue:o,onSelectionChange:r=>i(r),children:[e.jsx(N,{variant:"outline",endIcon:e.jsx(b,{}),size:"xs",children:e.jsx(m,{...l.find(r=>r.route===o).label})}),e.jsx(P,{children:l.map(r=>e.jsx(C,{value:r.route,children:e.jsx(m,{...r.label})},r.route))})]}),e.jsx("div",{className:"ml-auto w-0"}),!!n&&!!t&&e.jsxs(S,{selectionMode:"single",selectedValue:t,onSelectionChange:r=>n(r),children:[e.jsx(N,{variant:"outline",endIcon:e.jsx(b,{}),size:"xs",children:e.jsx(m,{...j[t].label})}),e.jsx(P,{children:Object.entries(j).map(([r,h])=>e.jsx(C,{value:r,children:e.jsx(m,{...h.label})},r))})]}),e.jsx(q,{})]})}function q(){const t=u(s=>s.isFullScreen),n=u(s=>s.setIsFullScreen);return e.jsx($,{variant:"outline",size:"xs",onClick:()=>n(!t),children:t?e.jsx(W,{}):e.jsx(E,{})})}function L({src:t}){const n=new URL(t),s=`${n.host}${n.pathname!=="/"?n.pathname:""}`,a=`${n.protocol}//${s}`;return e.jsxs("div",{className:"flex items-center gap-4 border-b px-12 py-10",children:[e.jsxs("div",{className:"mr-auto flex items-center gap-4",children:[e.jsx("div",{className:"size-8 rounded-full bg-chip"}),e.jsx("div",{className:"size-8 rounded-full bg-chip"}),e.jsx("div",{className:"size-8 rounded-full bg-chip"})]}),e.jsx("a",{href:a,target:"_blank",rel:"noreferrer",className:x("mr-auto block max-w-384 flex-auto rounded-panel border border-divider-lighter px-40 py-4 text-center text-xs text-muted hover:text-primary",a.includes(T)&&"pointer-events-none"),children:s})]})}v.Preview=Q;v.PreviewHeader=F;v.Content=D;v.Form=V;const X=d.forwardRef(({startIcon:t,children:n,className:s,description:a,endIcon:i,size:o="md",radius:l="rounded-input",...r},h)=>e.jsxs(H,{ref:h,display:"flex",className:x(o==="md"?"h-42":"h-[58px]",l,"relative mb-10 w-full items-center gap-10","border bg-elevated px-14 hover:bg-hover",s,r.disabled&&"pointer-events-none opacity-50"),variant:null,...r,children:[t,e.jsxs("span",{className:"block min-w-0",children:[e.jsx("span",{className:"block text-sm",children:n}),a&&e.jsx("span",{className:"block overflow-hidden overflow-ellipsis whitespace-nowrap text-xs text-muted",children:a})]}),e.jsx("div",{className:"ml-auto",children:i??e.jsx(b,{"aria-hidden":!0,className:"text-muted icon-sm"})})]}));export{X as S,v as a};
