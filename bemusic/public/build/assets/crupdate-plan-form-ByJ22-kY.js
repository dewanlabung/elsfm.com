import{J as c,aD as A,z as P,P as g,r as p,j as e,T as s,V as j,Q as o,t as y,Z as C,W as B,an as I}from"./main-CUJEGI8U.js";import{F as T}from"./permission-selector-Ba4ONcTb.js";import{F as E}from"./formatted-price-o7rYOnCC.js";import{A as V,a as z}from"./accordion-BALGWyw-.js";import{F as f,S as M}from"./select-Z9R0wV6S.js";import{F as b}from"./switch-4KDjemPX.js";import{A as $}from"./Add-B3RL66ee.js";const v=[{key:"day1",label:c("Daily"),interval:"day",interval_count:1},{key:"week1",label:c("Weekly"),interval:"week",interval_count:1},{key:"month1",label:c("Monthly"),interval:"month",interval_count:1},{key:"month3",label:c("Every 3 months"),interval:"month",interval_count:3},{key:"month6",label:c("Every 6 months"),interval:"month",interval_count:6},{key:"year1",label:c("Yearly"),interval:"year",interval_count:1},{key:"custom",label:c("Custom"),interval:null,interval_count:null}],w=["USD","EUR","JPY","GBP","AUD","CAD","CHF","CNY","HKD","NZD"],q=A((r="en")=>{const i=Intl.supportedValuesOf("currency").map(n=>({code:n,name:new Intl.DisplayNames([r],{type:"currency"}).of(n)})),l=i.filter(n=>w.includes(n.code)),a=i.filter(n=>!w.includes(n.code));return[...l,...a]});function H({index:r,onRemovePrice:t}){const{trans:i}=P(),l=q(),{watch:a,getValues:n}=g(),m=!a("id"),d=a(`prices.${r}.id`)==null,F=a(`prices.${r}.subscriptions_count`)||0,[N,S]=p.useState(()=>{const x=n(`prices.${r}.interval`),_=n(`prices.${r}.interval_count`),k=v.find(D=>D.key===`${x}${_}`);return k?k.key:"custom"}),u=m||d||!F;return e.jsxs(p.Fragment,{children:[!u&&e.jsx("p",{className:"mb-20 max-w-500 text-sm text-muted",children:e.jsx(s,{message:"This price can't modified or deleted, because it has [one 1 subscriber|other :count subscribers]. You can instead add a new price.",values:{count:F}})}),e.jsx(j,{required:!0,disabled:!u,label:e.jsx(s,{message:"Amount"}),type:"number",min:.1,step:.01,name:`prices.${r}.amount`,className:"mb-20"}),e.jsx(f,{required:!0,disabled:!u,label:e.jsx(s,{message:"Currency"}),name:`prices.${r}.currency`,items:l,showSearchField:!0,searchPlaceholder:i(c("Search currencies")),selectionMode:"single",className:"mb-20",children:x=>e.jsx(o,{value:x.code,children:`${x.code}: ${x.name}`},x.code)}),e.jsx(R,{disabled:!u,index:r,value:N,onValueChange:S}),N==="custom"&&e.jsx(U,{disabled:!u,index:r}),e.jsx("div",{className:"text-right",children:e.jsx(y,{size:"xs",variant:"outline",color:"danger",disabled:!u,onClick:()=>{t()},children:e.jsx(s,{message:"Delete price"})})})]})}function R({index:r,value:t,onValueChange:i,disabled:l}){const{setValue:a}=g();return e.jsx(M,{label:e.jsx(s,{message:"Billing period"}),disabled:l,className:"mb-20",selectionMode:"single",selectedValue:t,onSelectionChange:n=>{if(i(n),n!=="custom"){const m=v.find(d=>d.key===n);m&&(a(`prices.${r}.interval`,m.interval),a(`prices.${r}.interval_count`,m.interval_count))}},children:v.map(n=>e.jsx(o,{value:n.key,children:e.jsx(s,{...n.label})},n.key))})}function U({index:r,disabled:t}){const{watch:i}=g(),l=i(`prices.${r}.interval`);let a;return l==="day"?a=365:l==="week"?a=52:a=12,e.jsxs("div",{className:"flex w-min rounded border",children:[e.jsx("div",{className:"flex items-center px-18 text-sm",children:e.jsx(s,{message:"Every"})}),e.jsx(j,{inputShadow:"shadow-none",inputBorder:"border-none",className:"w-80 border-l border-r",name:`prices.${r}.interval_count`,type:"number",min:1,max:a,disabled:t,required:!0}),e.jsxs(f,{inputShadow:"shadow-none",inputBorder:"border-none",name:`prices.${r}.interval`,selectionMode:"single",disabled:t,children:[e.jsx(o,{value:"day",children:e.jsx(s,{message:"Days"})}),e.jsx(o,{value:"week",children:e.jsx(s,{message:"Weeks"})}),e.jsx(o,{value:"month",children:e.jsx(s,{message:"Months"})})]})]})}function ee(){return e.jsxs(p.Fragment,{children:[e.jsx(j,{name:"name",label:e.jsx(s,{message:"Name"}),className:"mb-20",required:!0,autoFocus:!0}),e.jsx(j,{name:"description",label:e.jsx(s,{message:"Description"}),className:"mb-20",inputElementType:"textarea",rows:4}),e.jsxs(f,{name:"position",selectionMode:"single",label:e.jsx(s,{message:"Position in pricing table"}),className:"mb-20",children:[e.jsx(o,{value:0,children:e.jsx(s,{message:"First"})}),e.jsx(o,{value:1,children:e.jsx(s,{message:"Second"})}),e.jsx(o,{value:2,children:e.jsx(s,{message:"Third"})}),e.jsx(o,{value:3,children:e.jsx(s,{message:"Fourth"})}),e.jsx(o,{value:4,children:e.jsx(s,{message:"Fifth"})})]}),e.jsx(b,{name:"recommended",className:"mb-20",description:e.jsx(s,{message:"Plan will be displayed more prominently on pricing page."}),children:e.jsx(s,{message:"Recommend"})}),e.jsx(b,{name:"hidden",className:"mb-20",description:e.jsx(s,{message:"Plan will not be shown on pricing or upgrade pages."}),children:e.jsx(s,{message:"Hidden"})}),e.jsx(b,{name:"free",className:"mb-20",description:e.jsx(s,{message:"Will be assigned to all users, if they are not subscribed already."}),children:e.jsx(s,{message:"Free"})}),e.jsx(h,{children:e.jsx(s,{message:"Feature list"})}),e.jsx(W,{}),e.jsx(Y,{}),e.jsx(L,{}),e.jsx(h,{children:e.jsx(s,{message:"Permissions"})}),e.jsx(T,{name:"permissions",roleType:"users"})]})}function h({children:r}){return e.jsx("h2",{className:"mb-20 mt-40 text-base font-semibold",children:r})}function W(){const{fields:r,append:t,remove:i}=C({name:"feature_list"});return e.jsxs("div",{children:[r.map((l,a)=>e.jsxs("div",{className:"mb-10 flex gap-10",children:[e.jsx(j,{name:`feature_list.${a}.value`,size:"sm",className:"flex-auto"}),e.jsx(B,{size:"sm",color:"primary",className:"flex-shrink-0",onClick:()=>{i(a)},children:e.jsx(I,{})})]},l.id)),e.jsx(y,{variant:"text",color:"primary",startIcon:e.jsx($,{}),size:"xs",onClick:()=>{t({value:""})},children:e.jsx(s,{message:"Add another line"})})]})}function Y(){var n;const{watch:r,formState:{errors:t}}=g(),{fields:i,append:l,remove:a}=C({name:"prices",keyName:"key"});return r("free")?null:e.jsxs(p.Fragment,{children:[e.jsx(h,{children:e.jsx(s,{message:"Pricing"})}),((n=t.prices)==null?void 0:n.message)&&e.jsx("div",{className:"mb-20 text-sm text-danger",children:t.prices.message}),e.jsx(V,{variant:"outline",className:"mb-10",children:i.map((m,d)=>e.jsx(z,{label:e.jsx(E,{price:m}),children:e.jsx(H,{index:d,onRemovePrice:()=>{a(d)}})},m.key))}),e.jsx(y,{variant:"text",color:"primary",startIcon:e.jsx($,{}),size:"xs",onClick:()=>{l({currency:"USD",amount:1,interval_count:1,interval:"month"})},children:e.jsx(s,{message:"Add another price"})})]})}function L(){const{trans:r}=P();return e.jsxs(e.Fragment,{children:[e.jsx(h,{children:e.jsx(s,{message:"Free trial days"})}),e.jsx(j,{name:"trial_period_days",type:"number",min:0,step:1,max:14,label:e.jsx(s,{message:"Trial period days"}),labelDisplay:"hidden",className:"mb-20",placeholder:r(c("Optional")),description:e.jsx(s,{message:"Customer will only be charged after the trial period ends."})})]})}export{ee as C};
