import{ae as j,e as h,G as S,ag as D,cr as y,b as L,u as p,j as e,r as N,d as F,J as u,aL as k,aK as E,D as I,z as B,W as P,t as x,T as r,M as A,$ as R,a0 as T,a1 as q,a2 as G,as as _,V as O}from"./main-CUJEGI8U.js";import{u as W}from"./use-social-login-PeP1qq51.js";import{u as z}from"./use-all-social-logins-disabled-CojrygKD.js";import{E as M}from"./envato-DNf8Um8t.js";import{G as U}from"./google-nUE0mIIg.js";import{D as H}from"./dialog-footer-jZcc-BBM.js";function J(a){const s=j(),{getRedirectUri:t}=h();return S({mutationFn:K,onSuccess:o=>{y(o.bootstrapData),s(t(),{replace:!0})},onError:o=>D(o,a)})}function K(a){return L.post("secure/auth/social/connect",a).then(s=>s.data)}const Q=u("Continue with google"),V=u("Continue with facebook"),Y=u("Continue with twitter"),$=u("Continue with envato");function ne({dividerMessage:a,isUsingInvite:s}){var d,g,b,f;const{social:t}=p(),o=j(),{getRedirectUri:m}=h(),{loginWithSocial:i,requestingPassword:w,setIsRequestingPassword:v}=W();if(z({isUsingInvite:s}))return null;const c=async C=>{const n=await i(C);((n==null?void 0:n.status)==="SUCCESS"||(n==null?void 0:n.status)==="ALREADY_LOGGED_IN")&&o(m(),{replace:!0})};return e.jsxs(N.Fragment,{children:[e.jsx("div",{className:"relative my-20 text-center before:absolute before:left-0 before:top-1/2 before:h-1 before:w-full before:-translate-y-1/2 before:bg-divider",children:e.jsx("span",{className:"relative z-10 bg-elevated px-10 text-sm text-muted",children:a})}),e.jsxs("div",{className:F("flex items-center justify-center gap-14",!(t!=null&&t.compact_buttons)&&"flex-col"),children:[(d=t==null?void 0:t.google)!=null&&d.enable?e.jsx(l,{label:Q,icon:e.jsx(U,{viewBox:"0 0 48 48"}),onClick:()=>c("google")}):null,(g=t==null?void 0:t.facebook)!=null&&g.enable?e.jsx(l,{label:V,icon:e.jsx(k,{className:"text-facebook"}),onClick:()=>c("facebook")}):null,(b=t==null?void 0:t.twitter)!=null&&b.enable?e.jsx(l,{label:Y,icon:e.jsx(E,{className:"text-twitter"}),onClick:()=>c("twitter")}):null,(f=t==null?void 0:t.envato)!=null&&f.enable&&!s?e.jsx(l,{label:$,icon:e.jsx(M,{viewBox:"0 0 50 50",className:"text-envato"}),onClick:()=>c("envato")}):null]}),e.jsx(I,{type:"modal",isOpen:w,onOpenChange:v,children:e.jsx(X,{})})]})}function X(){const a=A(),{formId:s}=R(),t=J(a);return e.jsxs(T,{children:[e.jsx(q,{children:e.jsx(r,{message:"Password required"})}),e.jsxs(G,{children:[e.jsx("div",{className:"mb-30 text-sm text-muted",children:e.jsx(r,{message:"An account with this email address already exists. If you want to connect the two accounts, enter existing account password."})}),e.jsx(_,{form:a,id:s,onSubmit:o=>{t.mutate(o)},children:e.jsx(O,{autoFocus:!0,name:"password",type:"password",required:!0,label:e.jsx(r,{message:"Password"})})})]}),e.jsxs(H,{children:[e.jsx(x,{variant:"text",children:e.jsx(r,{message:"Cancel"})}),e.jsx(x,{type:"submit",form:s,variant:"flat",color:"primary",disabled:t.isPending,children:e.jsx(r,{message:"Connect"})})]})]})}function l({onClick:a,label:s,icon:t}){var i;const{trans:o}=B();return(i=p().social)!=null&&i.compact_buttons?e.jsx(P,{variant:"outline","aria-label":o(s),onClick:a,children:t}):e.jsx(x,{variant:"outline",startIcon:t,onClick:a,className:"min-h-42 w-full",children:e.jsx("span",{className:"min-w-160 text-start",children:e.jsx(r,{...s})})})}export{ne as S};
